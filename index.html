<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crimson Crypto - Navigate the Future of Investment</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- TradingView Widget Script -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <!-- Chart.js for charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0D0D33; /* Dark Navy Blue */
            color: #E0E0EB; /* Light grayish blue for readability */
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }
        /* Custom styles for glowing effects and subtle animations */
        .btn-crimson {
            background-color: #DC2626; /* Crimson Red */
            transition: all 0.3s ease-in-out;
            box-shadow: 0 0 0px #DC2626;
            border-radius: 0.75rem; /* rounded-lg */
        }
        .btn-crimson:hover {
            background-color: #EF4444; /* Slightly lighter crimson on hover */
            box-shadow: 0 0 15px #DC2626, 0 0 30px #DC2626; /* Glowing effect */
            transform: translateY(-2px);
        }
        .btn-outline {
            border: 1px solid #00FFFF; /* Electric Blue border */
            color: #00FFFF;
            transition: all 0.3s ease-in-out;
            border-radius: 0.75rem; /* rounded-lg */
        }
        .btn-outline:hover {
            background-color: #00FFFF;
            color: #0D0D33; /* Dark Navy Blue */
            box-shadow: 0 0 10px #00FFFF;
            transform: translateY(-2px);
        }
        .card-glow:hover {
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(57, 255, 20, 0.3); /* Electric Blue and Neon Green glow */
            transform: translateY(-5px);
            border-color: #00FFFF; /* Highlight border on hover */
        }
        /* Hero Section Background Animation */
        .hero-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
            background: linear-gradient(45deg, rgba(13,13,51,0.9) 0%, rgba(20,20,60,0.95) 100%); /* Darker navy gradient */
        }
        .hero-background::before,
        .hero-background::after {
            content: '';
            position: absolute;
            background: rgba(0, 255, 255, 0.1); /* Electric Blue */
            border-radius: 50%;
            animation: move-bg 20s infinite alternate;
        }
        .hero-background::before {
            width: 300px;
            height: 300px;
            top: -50px;
            left: -50px;
            animation-delay: 0s;
        }
        .hero-background::after {
            width: 400px;
            height: 400px;
            bottom: -100px;
            right: -100px;
            background: rgba(57, 255, 20, 0.1); /* Neon Green */
            animation-delay: 5s;
        }
        @keyframes move-bg {
            0% { transform: translate(0, 0) scale(1); opacity: 0.1; }
            25% { transform: translate(50px, 50px) scale(1.1); opacity: 0.15; }
            50% { transform: translate(0, 100px) scale(1.2); opacity: 0.2; }
            75% { transform: translate(-50px, 50px) scale(1.1); opacity: 0.15; }
            100% { transform: translate(0, 0) scale(1); opacity: 0.1; }
        }

        /* Header Specific Styles */
        header {
            background-color: rgba(13,13,51,0.95); /* Darker navy with opacity */
        }

        /* Section Backgrounds */
        section {
            background-color: #1A1A40; /* Slightly lighter navy for sections */
            border-radius: 1rem; /* rounded-xl */
            padding: 2.5rem; /* py-10 px-6 md:px-12 */
        }
        .bg-dark-navy-alt {
            background-color: #101030; /* A darker navy for alternating sections */
        }


        /* Strategies Page Specific Styles */
        .range-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            background: #303060; /* Darker blue for slider track */
            outline: none;
            opacity: 0.8;
            transition: opacity .2s;
            border-radius: 5px;
        }
        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #00FFFF; /* Electric Blue */
            cursor: pointer;
            box-shadow: 0 0 8px #00FFFF; /* More prominent glow */
        }
        .range-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #00FFFF; /* Electric Blue */
            cursor: pointer;
            box-shadow: 0 0 8px #00FFFF;
        }
        .checkbox-custom:checked {
            background-color: #39FF14; /* Neon Green */
            border-color: #39FF14;
        }
        .checkbox-custom {
            border-color: #00FFFF; /* Electric Blue */
            background-color: #1A1A40; /* Match section background */
        }
        .strategy-filter-button {
            background-color: #101030; /* Darker navy */
            border: 1px solid #303060; /* Subtle border */
            color: #E0E0EB;
            transition: all 0.3s ease-in-out;
            border-radius: 9999px; /* rounded-full */
        }
        .strategy-filter-button:hover {
            background-color: #00FFFF;
            color: #0D0D33;
            border-color: #00FFFF;
        }
        .strategy-filter-button.active {
            background-color: #00FFFF;
            color: #0D0D33;
            border-color: #00FFFF;
        }

        /* Insights Page Specific Styles */
        /* Removed .chart-placeholder as it's replaced by TradingView widget */

        /* Fear and Greed Gauge Styles - Simplified and Semicircle */
        .sentiment-gauge-container {
            position: relative;
            width: 280px; /* Base width */
            height: 140px; /* Half of width for semicircle */
            /* Removed margin: 0 auto; to allow left alignment */
            /* Removed margin-right: auto; and left: 0; as parent flex properties will handle alignment */
            overflow: hidden; /* Crucial for semicircle clipping */
            border-radius: 140px 140px 0 0; /* Top half of a circle */
            background-color: transparent; /* Container itself is transparent */
            border: 3px solid #00FFFF; /* Electric Blue border for the whole semicircle */
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5); /* Subtle glow */
        }

        .sentiment-gauge-arc {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%; /* Fill the container */
            border-radius: 140px 140px 0 0; /* Match container's shape */
            /* Linear gradient for the color segments across the semicircle */
            background: linear-gradient(to right,
                #DC2626 0%, /* Extreme Fear (0-20) */
                #FF4500 20%, /* Fear (20-40) */
                #FFD700 40%, /* Neutral (40-60) */
                #ADFF2F 60%, /* Greed (60-80) */
                #39FF14 80% /* Extreme Greed (80-100) */
            );
        }

        .sentiment-gauge-needle {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 4px; /* Thickness of the needle */
            height: 120px; /* Length of the needle */
            background-color: black; /* Black needle */
            transform-origin: bottom center;
            transform: translateX(-50%) rotate(-90deg); /* Start at 0 (far left) */
            transition: transform 0.8s ease-out; /* Smooth transition */
            border-radius: 2px 2px 0 0;
            z-index: 10;
        }

        .sentiment-gauge-labels {
            position: absolute;
            width: 100%;
            height: 100%; /* Relative to container */
            top: 0;
            left: 0;
            pointer-events: none;
        }

        .sentiment-gauge-labels .label {
            position: absolute;
            font-size: 0.8rem;
            color: #A0A0B0;
            transform: translateX(-50%); /* Center horizontally */
            bottom: -15px; /* Position slightly below the arc */
            white-space: nowrap;
            font-weight: 500;
        }

        /* Positioning for each label */
        .sentiment-gauge-labels .extreme-fear {
            left: 0%;
            transform: translateX(-0%); /* Adjust for left edge */
            color: #DC2626;
        }
        .sentiment-gauge-labels .fear {
            left: 25%;
            color: #FF4500;
        }
        .sentiment-gauge-labels .neutral {
            left: 50%;
            color: #FFD700;
        }
        .sentiment-gauge-labels .greed {
            left: 75%;
            color: #ADFF2F;
        }
        .sentiment-gauge-labels .extreme-greed {
            left: 100%;
            transform: translateX(-100%); /* Adjust for right edge */
            color: #39FF14;
        }

        /* Specific styles for the sentiment text below the gauge */
        .sentiment-status-text {
            font-size: 1.25rem; /* text-xl */
            font-weight: 600; /* font-semibold */
            text-align: center;
            margin-top: 1.5rem; /* mt-6 */
        }
        .seven-day-average-text {
            font-size: 0.875rem; /* text-sm */
            text-align: center;
            color: #A0A0B0; /* Light gray */
            margin-top: 0.5rem; /* mt-2 */
        }

        /* New styles for the value and label below the gauge */
        .current-sentiment-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 1rem; /* Space between gauge and text */
        }
        .current-sentiment-display .value {
            font-size: 3rem; /* Larger font for the number */
            font-weight: bold;
            line-height: 1; /* Adjust line height to prevent extra space */
        }
        .current-sentiment-display .label {
            font-size: 1.125rem; /* text-lg */
            margin-top: 0.25rem; /* Small space between value and label */
            font-weight: 500;
        }


        .news-article {
            background-color: #101030; /* Darker navy for articles */
            border: 1px solid #303060; /* Subtle border */
            transition: all 0.3s ease-in-out;
            border-radius: 0.75rem; /* rounded-lg */
        }
        .news-article:hover {
            background-color: #1A1A40; /* Slightly lighter on hover */
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
            border-color: #00FFFF; /* Highlight border on hover */
        }
        .news-article .text-sm.text-gray-400 {
            color: #A0A0B0; /* Slightly lighter gray for subtext */
        }
        .news-article .bg-blue-500, .news-article .bg-purple-500, .news-article .bg-green-500, .news-article .bg-yellow-500 {
            background-color: #00FFFF; /* Electric Blue for tags */
            color: #0D0D33;
        }
        .news-article .bg-crimson { /* For #DC2626 tags */
            background-color: #DC2626;
            color: #E0E0EB;
        }
        .news-article .bg-neon-green { /* For #39FF14 tags */
            background-color: #39FF14;
            color: #0D0D33;
        }


        /* Portfolio Page Specific Styles */
        .pie-chart-container {
            background-color: #101030; /* Darker navy */
            border: 1px solid #39FF14; /* Neon Green border */
            box-shadow: 0 0 15px rgba(57, 255, 20, 0.3); /* Subtle glow */
            color: #39FF14;
            height: 320px; /* Adjusted height to accommodate legend better */
            padding: 1rem; /* Added padding */
        }
        .data-table th, .data-table td {
            border-bottom: 1px solid #303060; /* Darker blue border */
        }
        .data-table th {
            background-color: #1A1A40; /* Match section background */
            color: #E0E0EB;
        }
        .data-table tr:hover {
            background-color: #101030; /* Darker navy on hover */
        }

        /* Learn Page Specific Styles */
        .guide-card {
            background-color: #1A1A40; /* Match section background */
            border: 1px solid #303060; /* Subtle border */
            border-radius: 1rem; /* rounded-xl */
        }
        .guide-card:hover {
            border-color: #00FFFF; /* Electric Blue */
            transform: translateY(-5px);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }
        .category-pill {
            background-color: #101030; /* Darker navy */
            border: 1px solid #00FFFF;
            color: #00FFFF;
            border-radius: 9999px; /* rounded-full */
        }
        .category-pill:hover, .category-pill.active {
            background-color: #00FFFF;
            color: #0D0D33; /* Dark Navy Blue */
            border-color: #00FFFF;
        }

        /* AI Assistant Page Specific Styles */
        .chat-container {
            background-color: #1A1A40; /* Match section background */
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.1);
        }
        .message-bot {
            background-color: rgba(0, 255, 255, 0.15); /* Electric Blue tint */
            color: #E0E0EB;
        }
        /* Add margin to paragraphs within bot messages for line gaps */
        .message-bot p {
            margin-bottom: 1em; /* Add space below paragraphs */
        }
        .message-bot p:last-child {
            margin-bottom: 0; /* No margin after the last paragraph */
        }

        .message-user {
            background-color: #DC2626; /* Crimson Red */
            color: #E0E0EB;
        }
        .predefined-question-btn {
            background-color: #101030; /* Darker navy */
            border: 1px solid #00FFFF;
            color: #00FFFF;
            border-radius: 9999px; /* rounded-full */
            text-align: center;
            flex-grow: 1; /* Allow buttons to grow and fill space */
            flex-basis: calc(50% - 0.5rem); /* Roughly 50% width minus half the gap */
            max-width: calc(50% - 0.5rem); /* Ensure max width for two per line */
        }
        .predefined-question-btn:hover {
            background-color: #00FFFF;
            color: #0D0D33; /* Dark Navy Blue */
            border-color: #00FFFF;
        }
        .chat-input {
            background-color: #101030; /* Darker navy */
            border: 1px solid #303060; /* Subtle border */
            color: #E0E0EB;
            border-radius: 0.75rem; /* rounded-lg */
        }
        .chat-input:focus {
            outline: none;
            border-color: #00FFFF;
            box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.5);
        }

        /* About Page Specific Styles */
        .team-member-card {
            background-color: #1A1A40; /* Match section background */
            border: 1px solid #303060; /* Subtle border */
            border-radius: 1rem; /* rounded-xl */
        }
        .team-member-card:hover {
            border-color: #00FFFF; /* Electric Blue */
            transform: translateY(-5px);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }
        .review-card {
            background-color: #101030; /* Darker navy for review cards */
            border: 1px solid #303060;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease-in-out;
        }
        .review-card:hover {
            transform: translateY(-3px);
            border-color: #00FFFF;
            box-shadow: 0 6px 15px rgba(0, 255, 255, 0.2);
        }
        .review-author {
            color: #00FFFF;
            font-weight: 600;
        }
        .review-rating {
            color: #39FF14; /* Neon Green for stars */
        }

        /* New styles for core value cards */
        .core-value-card {
            background-color: #1A1A40;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease-in-out;
            border: 1px solid #303060;
            text-align: center;
        }

        .core-value-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.4);
            border-color: #00FFFF;
        }

        .core-value-card .icon {
            color: #00FFFF; /* Electric Blue for icons */
            font-size: 4rem; /* Large icon size */
            margin-bottom: 1rem;
        }


        /* Contact Page Specific Styles */
        .form-input {
            background-color: #101030; /* Darker navy */
            border: 1px solid #303060; /* Subtle border */
            color: #E0E0EB;
            border-radius: 0.75rem; /* rounded-lg */
        }
        .form-input:focus {
            outline: none;
            border-color: #00FFFF; /* Electric Blue */
            box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.5);
        }

        /* Auth Page Specific Styles */
        .auth-container {
            background-color: #1A1A40; /* Match section background */
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.1);
        }
        .tab-button {
            border-bottom: 3px solid transparent;
        }
        .tab-button.active {
            color: #DC2626;
            border-color: #DC2626;
        }
        .tab-button:not(.active):hover {
            color: #00FFFF;
        }

        /* General Page Content Styles */
        .page-content {
            display: none; /* Hidden by default */
        }
        .page-content.active {
            display: block !important; /* Shown when active, ensure precedence */
        }

        /* Loading indicator for AI Assistant */
        .loading-dots {
            display: flex;
            align-items: center;
            height: 1.5rem; /* Adjust as needed */
        }
        .loading-dots span {
            width: 8px;
            height: 8px;
            background-color: #00FFFF;
            border-radius: 50%;
            margin: 0 2px;
            animation: bounce 0.6s infinite alternate;
        }
        .loading-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }
        .loading-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }
        @keyframes bounce {
            from {
                transform: translateY(0);
            }
            to {
                transform: translateY(-5px);
            }
        }
        /* Loading spinner for images */
        .image-loading-spinner {
            border: 4px solid rgba(0, 255, 255, 0.1);
            border-top: 4px solid #00FFFF;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Styling for transaction cards on the All Transactions page */
        .transaction-card {
            background-color: #101030; /* Darker navy */
            border: 1px solid #303060; /* Subtle border */
            border-radius: 0.75rem; /* rounded-lg */
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease-in-out;
        }
        .transaction-card:hover {
            background-color: #1A1A40; /* Slightly lighter on hover */
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.1);
        }
        .transaction-card .type {
            font-weight: 600;
            color: #E0E0EB;
        }
        .transaction-card .details {
            font-size: 0.875rem; /* text-sm */
            color: #A0A0B0;
        }
        .transaction-card .value {
            font-weight: 600;
            font-size: 1.125rem; /* text-lg */
        }
        .transaction-card .value.positive {
            color: #39FF14; /* Neon Green */
        }
        .transaction-card .value.negative {
            color: #DC2626; /* Crimson Red */
        }
        .transaction-card .value.neutral {
            color: #00FFFF; /* Electric Blue */
        }
        .transaction-card .date {
            font-size: 0.75rem; /* text-xs */
            color: #A0A0B0;
            text-align: right;
        }

        /* Style for sale transactions */
        .transaction-card[data-type="sale"] {
            border-left: 4px solid #DC2626;
        }

        /* Style for investment transactions */
        .transaction-card[data-type="investment"] {
            border-left: 4px solid #39FF14;
        } 

        /* Styles for the Floating Bot Pop-up Window */
        #bot-popup-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px; /* Adjusted width for better mobile view */
            height: 450px; /* Adjusted height */
            background-color: #1A1A40; /* Match section background */
            border: 1px solid #00FFFF; /* Electric Blue border */
            border-radius: 1rem; /* rounded-xl */
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
            display: flex;
            flex-direction: column;
            z-index: 1000; /* Ensure it's on top */
            overflow: hidden;
            transform: scale(0.8) translateY(20px); /* Initial smaller size and slight offset */
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease-in-out;
        }

        #bot-popup-container.active {
            transform: scale(1) translateY(0);
            opacity: 1;
            visibility: visible;
        }

        #bot-popup-header {
            background-color: #0D0D33; /* Darker header */
            color: #E0E0EB;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #303060;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            border-radius: 1rem 1rem 0 0; /* Rounded top corners */
        }

        #bot-popup-close-btn {
            background: none;
            border: none;
            color: #E0E0EB;
            font-size: 1.5rem;
            cursor: pointer;
            line-height: 1;
            padding: 0.25rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
        }
        #bot-popup-close-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        #bot-popup-messages {
            flex-grow: 1;
            padding: 1rem;
            overflow-y: auto;
            background-color: #1A1A40; /* Chat background */
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .bot-message-bubble {
            background-color: rgba(0, 255, 255, 0.15); /* Electric Blue tint */
            color: #E0E0EB;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            max-width: 85%; /* Slightly smaller for bot */
            align-self: flex-start;
        }

        .user-message-bubble {
            background-color: #DC2626; /* Crimson Red */
            color: #E0E0EB;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            max-width: 85%;
            align-self: flex-end;
        }

        #bot-popup-input-area {
            padding: 1rem;
            border-top: 1px solid #303060;
            display: flex;
            gap: 0.5rem;
            background-color: #1A1A40;
        }

        #bot-popup-input {
            flex-grow: 1;
            padding: 0.75rem;
            border-radius: 0.5rem;
            background-color: #101030;
            border: 1px solid #303060;
            color: #E0E0EB;
            font-size: 0.9rem;
        }
        #bot-popup-input:focus {
            outline: none;
            border-color: #00FFFF;
            box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.3);
        }

        #bot-popup-send-btn {
            background-color: #DC2626;
            color: #E0E0EB;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s;
        }
        #bot-popup-send-btn:hover {
            background-color: #EF4444;
        }

        /* Floating Action Button for Bot */
        #bot-fab {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #00FFFF; /* Electric Blue */
            color: #0D0D33; /* Dark Navy */
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.6);
            z-index: 1001; /* Above the popup */
            transition: all 0.3s ease-in-out;
        }
        #bot-fab:hover {
            transform: scale(1.1);
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.8);
        }

        /* Trade Notification Pop-up */
        #trade-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #39FF14; /* Neon Green */
            color: #0D0D33; /* Dark Navy */
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 0 15px rgba(57, 255, 20, 0.6);
            z-index: 1002; /* Highest z-index */
            opacity: 0;
            visibility: hidden;
            transform: translateY(-20px);
            transition: all 0.5s ease-in-out;
            font-weight: 600;
            max-width: 300px; /* Limit width */
            text-align: center;
        }

        #trade-notification.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        /* News Alert Notification Pop-up */
        #news-alert-notification {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: #00FFFF; /* Electric Blue */
            color: #0D0D33; /* Dark Navy */
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.6);
            z-index: 1002; /* Highest z-index */
            opacity: 0;
            visibility: hidden;
            transform: translateX(-20px); /* Slide in from left */
            transition: all 0.5s ease-in-out;
            font-weight: 600;
            max-width: 300px; /* Limit width */
            text-align: center;
            display: flex; /* Use flex to align content and close button */
            align-items: center;
            justify-content: space-between;
            gap: 10px; /* Space between text and button */
        }

        #news-alert-notification.show {
            opacity: 1;
            visibility: visible;
            transform: translateX(0);
        }

        #news-alert-notification-close-btn {
            background: none;
            border: none;
            color: #0D0D33; /* Dark Navy */
            font-size: 1.5rem;
            cursor: pointer;
            line-height: 1;
            padding: 0.25rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
        }

        #news-alert-notification-close-btn:hover {
            background-color: rgba(0, 0, 0, 0.1); /* Slightly darker on hover */
        }

        /* Portfolio Value Chart Specific Styles */
        #portfolio-value-chart-container {
            width: 100%;
            height: 400px; /* Fixed height for the chart container */
            margin-top: 2.5rem; /* mt-10 */
            background-color: #1A1A40;
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid #303060;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #portfolio-value-chart {
            width: 100%;
            height: 100%; /* Canvas fills its container */
        }

        /* Styles for chart range buttons */
        .chart-range-button {
            background-color: #101030; /* Darker navy */
            border: 1px solid #303060; /* Subtle border */
            color: #E0E0EB;
            transition: all 0.3s ease-in-out;
            border-radius: 0.5rem; /* rounded-md */
            padding: 0.5rem 1rem;
            font-weight: 500;
        }
        .chart-range-button:hover {
            background-color: #00FFFF;
            color: #0D0D33;
            border-color: #00FFFF;
        }
        .chart-range-button.active {
            background-color: #00FFFF;
            color: #0D0D33;
            border-color: #00FFFF;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        /* Add to your existing styles */
        .invest-now-btn {
            transition: all 0.3s ease-in-out;
        }

        .sell-btn {
            transition: all 0.3s ease-in-out;
            box-shadow: 0 0 0px #DC2626;
        }

        .sell-btn:hover {
            background-color: #EF4444;
            box-shadow: 0 0 15px #DC2626, 0 0 30px #DC2626;
            transform: translateY(-2px);
        }

        #investment-modal {
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        #investment-modal:not(.hidden) {
            opacity: 1;
        }

        #trade-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #39FF14;
            color: #0D0D33;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 0 15px rgba(57, 255, 20, 0.6);
            z-index: 1002;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-20px);
            transition: all 0.5s ease-in-out;
            font-weight: 600;
            max-width: 300px;
            text-align: center;
        }

        #trade-notification.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
    </style>
</head>
<body class="bg-[#0D0D33] text-[#E0E0EB]">

    <!-- Header (Navigation Bar) - Consistent across pages -->
    <header class="relative z-10 bg-opacity-90 shadow-lg py-4 px-6 md:px-12 flex flex-col md:flex-row justify-between items-center rounded-b-xl">
        <!-- Logo -->
        <div class="flex items-center mb-4 md:mb-0">
            <a href="#" id="home-link" class="flex items-center">
                <img src="https://res.cloudinary.com/dlemf0esl/image/upload/v1753584028/0b27302e-cb13-4181-a7cc-30af689ae957_odvnvl.png" alt="Crimson Crypto Logo" class="h-10 w-auto rounded-md">
                <span class="ml-3 text-2xl font-bold text-[#E0E0EB]">Crimson Crypto</span>
            </a>
        </div>

        <!-- Navigation Links -->
        <nav class="flex-grow flex justify-center md:justify-end mb-4 md:mb-0">
            <ul class="flex justify-center space-x-4 md:space-x-8 text-lg font-medium overflow-x-auto whitespace-nowrap">
              <li><a href="#" id="strategies-link" class="hover:text-[#DC2626] transition-colors duration-300">Strategies</a></li>
              <li><a href="#" id="performance-link" class="hover:text-[#DC2626] transition-colors duration-300">Performance</a></li>
              <li><a href="#" id="insights-link" class="hover:text-[#DC2626] transition-colors duration-300">Insights</a></li>
              <li><a href="#" id="portfolio-link" class="hover:text-[#DC2626] transition-colors duration-300">Portfolio</a></li>
              <li><a href="#" id="learn-link" class="hover:text-[#DC2626] transition-colors duration-300">Learn</a></li>
              <li><a href="#" id="ai-assistant-link" class="hover:text-[#DC2626] transition-colors duration-300">AI Assistant</a></li>
              <li><a href="#" id="about-link" class="hover:text-[#DC2626] transition-colors duration-300">About</a></li>
              <li><a href="#" id="contact-link" class="hover:text-[#DC2626] transition-colors duration-300">Contact</a></li>
            </ul>
          </nav>

        <!-- Sign Up / Login Buttons -->
        <div class="flex space-x-4 md:ml-16">
            <button id="signup-header-btn" class="btn-crimson px-6 py-2 font-semibold text-[#E0E0EB] shadow-md whitespace-nowrap">Sign Up</button>
            <button id="login-header-btn" class="btn-outline px-6 py-2 font-semibold shadow-md">Login</button>
        </div>
    </header>

    <!-- Main Content Container for all pages -->
    <div id="main-content-container">

        <!-- HOME PAGE CONTENT -->
        <div id="page-home" class="page-content active">
            <!-- Hero Section -->
            <section class="relative h-screen flex items-center justify-center text-center px-4 md:px-0 overflow-hidden bg-transparent rounded-none p-0">
                <div class="hero-background"></div>
                <div class="relative z-10 max-w-4xl mx-auto">
                    <h1 class="text-4xl md:text-6xl font-extrabold leading-tight mb-4 text-[#E0E0EB]">
                        Navigate the <span class="text-[#DC2626]">Future</span> of Crypto Investment with Confidence.
                    </h1>
                    <p class="text-lg md:text-xl text-[#A0A0B0] mb-8">
                        Expert Strategies, Real-Time Market Intelligence, & Personalized Guidance for Every Investor.
                    </p>
                    <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6">
                        <button id="explore-strategies-btn" class="btn-crimson px-8 py-3 text-xl font-bold shadow-lg">Explore Strategies</button>
                        <button id="learn-more-btn" class="btn-outline px-8 py-3 text-xl font-bold shadow-lg">Learn More</button>
                    </div>
                </div>
            </section>

            <!-- Why Crimson Crypto? Section -->
            <section class="py-20 px-6 md:px-12 bg-dark-navy-alt">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-16 text-[#E0E0EB]">Why Choose Crimson Crypto?</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-10 max-w-6xl mx-auto">
                    <!-- Card 1: Smart Strategies -->
                    <div class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-transparent transition-all duration-300 card-glow">
                        <div class="text-[#00FFFF] mb-6 text-5xl flex justify-center">
                            <!-- Icon: Up-arrow chart SVG -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-line-chart"><path d="M3 3v18h18"/><path d="m18 10-4 4-2-6-4 4"/></svg>
                        </div>
                        <h3 class="text-3xl font-semibold text-[#E0E0EB] mb-4 text-center">Smart Strategies</h3>
                        <p class="text-[#A0A0B0] text-lg text-center mb-6">Access a diverse range of meticulously crafted investment strategies tailored to your goals and risk tolerance.</p>
                        <div class="text-center">
                            <button id="discover-now-btn" class="btn-crimson px-6 py-2 font-semibold text-[#E0E0EB]">Discover Now</button>
                        </div>
                    </div>

                    <!-- Card 2: Intelligent Insights -->
                    <div class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-transparent transition-all duration-300 card-glow">
                        <div class="text-[#39FF14] mb-6 text-5xl flex justify-center">
                            <!-- Icon: Brain/Lightbulb SVG -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-brain"><path d="M12 5a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z"/><path d="M12 18a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z"/><path d="M19 12a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z"/><path d="M5 12a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z"/><path d="M12 12a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z"/><path d="M8.5 8.5a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z"/><path d="M15.5 8.5a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z"/><path d="M12 12v6"/><path d="M12 6v6"/><path d="M19 12h-6"/><path d="M5 12h6"/><path d="M17.5 7.5l-3 3"/><path d="M6.5 7.5l3 3"/><path d="M17.5 16.5l-3-3"/><path d="M6.5 16.5l3 3"/></svg>
                        </div>
                        <h3 class="text-3xl font-semibold text-[#E0E0EB] mb-4 text-center">Intelligent Insights</h3>
                        <p class="text-[#A0A0B0] text-lg text-center mb-6">Leverage real-time market data, sentiment analysis, and expert commentary to make informed decisions.</p>
                        <div class="text-center">
                            <button id="view-insights-btn" class="btn-crimson px-6 py-2 font-semibold text-[#E0E0EB]">View Insights</button>
                        </div>
                    </div>

                    <!-- Card 3: AI-Powered Guidance -->
                    <div class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-transparent transition-all duration-300 card-glow">
                        <div class="text-[#00FFFF] mb-6 text-5xl flex justify-center">
                            <!-- Icon: Robot head SVG -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bot"><path d="M12 8V4H8"/><path d="M2 14h2a2 2 0 0 1 2 2v3a2 2 0 0 1 2 2h8a2 2 0 0 1 2-2v-3a2 2 0 0 1 2-2h2"/><path d="M12 2v6"/><path d="M12 16v6"/><path d="M12 12h.01"/><path d="M17 12h.01"/><path d="M7 12h.01"/></svg>
                        </div>
                        <h3 class="text-3xl font-semibold text-[#E0E0EB] mb-4 text-center">AI-Powered Guidance</h3>
                        <p class="text-[#A0A0B0] text-lg text-center mb-6">Get personalized advice and quick answers to your crypto questions with our advanced AI assistant.</p>
                        <div class="text-center">
                            <button id="meet-assistant-btn" class="btn-crimson px-6 py-2 font-semibold text-[#E0E0EB]">Meet Your Assistant</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Real-time Market Snapshot (Placeholder) -->
            <section class="py-16 px-6 md:px-12 bg-dark-navy-alt border-t border-b border-[#303060]">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-10 text-[#E0E0EB]">Live Market Snapshot</h2>
                <div class="max-w-6xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Crypto Card 1 (Example: Bitcoin) -->
                    <div class="bg-[#1A1A40] p-6 rounded-xl shadow-lg flex flex-col items-center justify-center border border-[#303060]">
                        <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-2">Bitcoin (BTC)</h3>
                        <p class="text-4xl font-bold text-[#00FFFF] mb-2">$118,866.50</p>
                        <p class="text-lg font-medium text-[#39FF14]">+2.56% (24h)</p>
                    </div>
                    <!-- Crypto Card 2 (Example: Ethereum) -->
                    <div class="bg-[#1A1A40] p-6 rounded-xl shadow-lg flex flex-col items-center justify-center border border-[#303060]">
                        <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-2">Ethereum (ETH)</h3>
                        <p class="text-4xl font-bold text-[#00FFFF] mb-2">$3,779.97</p>
                        <p class="text-lg font-medium text-[#39FF14]">+2.38% (24h)</p>
                    </div>
                    <!-- Crypto Card 3 (Example: Ripple) -->
                    <div class="bg-[#1A1A40] p-6 rounded-xl shadow-lg flex flex-col items-center justify-center border border-[#303060]">
                        <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-2">Ripple (XRP)</h3>
                        <p class="text-4xl font-bold text-[#DC2626] mb-2">$3.19</p>
                        <p class="text-lg font-medium text-[#DC2626]">-2.09% (24h)</p>
                    </div>
                    <!-- Crypto Card 4 (Example: Solana) -->
                    <div class="bg-[#1A1A40] p-6 rounded-xl shadow-lg flex flex-col items-center justify-center border border-[#303060]">
                        <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-2">Solana (SOL)</h3>
                        <p class="text-4xl font-bold text-[#00FFFF] mb-2">$187.69</p>
                        <p class="text-lg font-medium text-[#39FF14]">+2.26% (24h)</p>
                    </div>
                </div>
                <p class="text-center text-sm text-[#A0A0B0] mt-8">Data for demonstration purposes only. Not real-time.</p>
            </section>

            <!-- Call to Action Strip -->
            <section class="py-20 px-6 md:px-12 bg-[#1A1A40] text-center rounded-t-xl">
                <h2 class="text-3xl md:text-4xl font-bold text-[#E0E0EB] mb-6">Unlock Exclusive Insights & Updates</h2>
                <p class="text-lg md:text-xl text-[#A0A0B0] mb-10">Subscribe to our newsletter and get the latest market analysis, strategy updates, and more, delivered directly to your inbox.</p>
                <div class="flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-4 max-w-xl mx-auto">
                    <input id="subscribe-email" type="email" placeholder="Enter your email address" class="w-full sm:w-2/3 p-4 rounded-lg bg-[#101030] border border-[#303060] text-[#E0E0EB] placeholder-[#A0A0B0] focus:outline-none focus:ring-2 focus:ring-[#00FFFF] transition-all duration-300">
                    <button id="subscribe-btn" class="btn-crimson px-8 py-4 text-lg font-bold w-full sm:w-auto shadow-lg whitespace-nowrap">Subscribe</button>
                </div>
                <div id="subscribe-response" class="mt-6 text-lg font-semibold min-h-[1.5rem]"></div>
            </section>
        </div>

        <!-- STRATEGIES PAGE CONTENT -->
        <div id="page-strategies" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">Tailored Investment Strategies for Every Horizon</h1>

                <div class="flex flex-col lg:flex-row gap-10">
                    <!-- Left Sidebar: Preferences Selection -->
                    <aside class="lg:w-1/4 bg-[#1A1A40] p-8 rounded-xl shadow-lg flex-shrink-0 border border-[#303060]">
                        <h2 class="text-2xl font-bold text-[#E0E0EB] mb-6">Filter Strategies</h2>

                        <!-- Investment Goal -->
                        <div class="mb-8">
                            <label for="investment-goal" class="block text-lg font-medium text-[#A0A0B0] mb-3">Investment Goal</label>
                            <select id="investment-goal" class="w-full p-3 rounded-lg bg-[#101030] border border-[#303060] text-[#E0E0EB] focus:outline-none focus:ring-2 focus:ring-[#00FFFF]">
                                <option value="">Select a goal</option>
                                <option value="capital-growth">Capital Growth</option>
                                <option value="passive-income">Passive Income</option>
                                <option value="diversification">Diversification</option>
                            </select>
                        </div>

                        <!-- Replace this section in your index.html file -->
                        <!-- Risk Tolerance -->
                        <div class="mb-8">
                            <label for="risk-tolerance" class="block text-lg font-medium text-[#A0A0B0] mb-3">Risk Tolerance</label>
                            <select id="risk-tolerance" class="w-full p-3 rounded-lg bg-[#101030] border border-[#303060] text-[#E0E0EB] focus:outline-none focus:ring-2 focus:ring-[#00FFFF]">
                                <option value="" selected>Select risk tolerance</option>
                                <option value="Low">Low (Conservative)</option>
                                <option value="Medium">Medium (Balanced)</option>
                                <option value="High">High (Aggressive)</option>
                            </select>
                        </div>

                        <!-- Time Horizon -->
                        <div class="mb-8">
                            <label for="time-horizon" class="block text-lg font-medium text-[#A0A0B0] mb-3">Time Horizon</label>
                            <select id="time-horizon" class="w-full p-3 rounded-lg bg-[#101030] border border-[#303060] text-[#E0E0EB] focus:outline-none focus:ring-2 focus:ring-[#00FFFF]">
                                <option value="">Select horizon</option>
                                <option value="short-term">Short-term (0-1 year)</option>
                                <option value="medium-term">Medium-term (1-3 years)</option>
                                <option value="long-term">Long-term (3+ years)</option>
                            </select>
                        </div>

                        <!-- Asset Classes -->
                        <div class="mb-8">
                            <span class="block text-lg font-medium text-[#A0A0B0] mb-3">Asset Classes</span>
                            <div class="space-y-3">
                                <label class="flex items-center text-[#E0E0EB]">
                                    <input type="checkbox" value="BTC" data-asset-class="true" class="form-checkbox h-5 w-5 text-[#00FFFF] rounded-md checkbox-custom">
                                    <span class="ml-3">Bitcoin (BTC)</span>
                                </label>
                                <label class="flex items-center text-[#E0E0EB]">
                                    <input type="checkbox" value="ETH" data-asset-class="true" class="form-checkbox h-5 w-5 text-[#00FFFF] rounded-md checkbox-custom">
                                    <span class="ml-3">Ethereum (ETH)</span>
                                </label>
                                <label class="flex items-center text-[#E0E0EB]">
                                    <input type="checkbox" value="Altcoins" data-asset-class="true" class="form-checkbox h-5 w-5 text-[#00FFFF] rounded-md checkbox-custom">
                                    <span class="ml-3">Altcoins</span>
                                </label>
                            </div>
                        </div>
                    </aside>

                    <!-- Right Content: Strategy Cards -->
                    <section class="lg:w-3/4 bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060]">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8" id="strategies-container">
                            <!-- Strategy cards will be dynamically loaded here by JavaScript -->
                        </div>
                    </section>
                </div>

                <!-- Add this modal HTML right after the existing investment modal in the Strategies page content -->
                <div id="strategies-investment-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
                    <div class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#00FFFF] max-w-md w-full">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-2xl font-bold text-[#E0E0EB]" id="strategies-modal-strategy-name">Invest in Strategy</h3>
                            <button id="strategies-close-modal" class="text-[#E0E0EB] hover:text-[#DC2626] text-2xl">&times;</button>
                        </div>
                        <form id="strategies-investment-form">
                            <input type="hidden" id="strategies-selected-strategy">
                            <div class="mb-4">
                                <label for="strategies-investment-amount" class="block text-[#A0A0B0] mb-2">Investment Amount ($)</label>
                                <input type="number" id="strategies-investment-amount" class="w-full p-3 rounded-lg bg-[#101030] border border-[#303060] text-[#E0E0EB]" min="100" step="100" value="1000" required>
                            </div>
                            <div class="mb-6">
                                <label for="strategies-investment-duration" class="block text-[#A0A0B0] mb-2">Duration (months)</label>
                                <select id="strategies-investment-duration" class="w-full p-3 rounded-lg bg-[#101030] border border-[#303060] text-[#E0E0EB]" required>
                                    <option value="3">3 months</option>
                                    <option value="6">6 months</option>
                                    <option value="12" selected>12 months</option>
                                    <option value="24">24 months</option>
                                </select>
                            </div>
                            <div class="flex justify-between">
                                <button type="button" id="strategies-cancel-investment" class="btn-outline px-6 py-2 font-semibold">Cancel</button>
                                <button type="submit" class="btn-crimson px-6 py-2 font-semibold">Confirm Investment</button>
                            </div>
                        </form>
                    </div>
                </div>
            </main>
        </div>


        <!-- PERFORMANCE PAGE CONTENT -->
        <div id="page-performance" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-6 text-[#E0E0EB]">Performance Overview</h1>
                <p class="text-xl text-center text-[#A0A0B0] mb-12 max-w-2xl mx-auto">
                    Track your investment performance with detailed analytics and historical data.
                </p>

                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060] mb-10 text-center">
                    <h2 class="text-3xl font-bold text-white mb-4">Equal-Weight Portfolio Statistics</h2>
                    
                    <h3 class="text-xl font-semibold mb-4 text-white">Key Performance Metrics</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                                <tr class="bg-gradient-to-r from-purple-800 to-indigo-800 text-white">
                                    <th scope="col" class="py-3 px-6 text-center tracking-wider">
                                        Strategy
                                    </th>
                                    <th scope="col" class="py-3 px-6 text-center tracking-wider">
                                        Annual Return (%)
                                    </th>
                                    <th scope="col" class="py-3 px-6 text-center tracking-wider">
                                        Annual Volatility (%)
                                    </th>
                                    <th scope="col" class="py-3 px-6 text-center tracking-wider">
                                        Sharpe Ratio
                                    </th>
                                    <th scope="col" class="py-3 px-6 text-center tracking-wider">
                                        Max Drawdown (%)
                                    </th>
                                    <th scope="col" class="py-3 px-6 text-center tracking-wider">
                                        Action
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        EW_Amihud_14
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        162.16
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        58.67
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        2.76
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -53.6
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="EW_Amihud_14">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        EW_Amihud_28
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        153.7
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        57.23
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        2.69
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -56.28
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="EW_Amihud_28">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        EW_Amihud_21
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        151.67
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        55.62
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        2.73
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -60.07
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="EW_Amihud_21">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                       EW_Amihud_7
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        152.43
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        55.87
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        2.73
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -52.05
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="EW_Amihud_7">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        EW_Amihud_90
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        117.5
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        53.47
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        2.2
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -56.57
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="EW_Amihud_90">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        EW_Volatility_14
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        121.24
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        68.89
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        1.76
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -55.23
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="EW_Volatility_14">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        EW_RSI_21
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        114.93
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        55.49
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        2.07
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -32.63
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="EW_RSI_21">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        EW_Momentum_4w
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        111.2
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        57.95
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        1.92
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -37.26
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="EW_Momentum_4w">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        EW_Volatility_21
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        109.98
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        66.94
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        1.64
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -59.49
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="EW_Volatility_21">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        EW_Volatility_42
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        100.12
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        69.84
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        1.43
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -63.8
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="EW_Volatility_42">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        BTC
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        65.79
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        59.91
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        1.1
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -75.9
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="BTC">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Equal-Weight Chart Selection Buttons -->
                    <div class="flex flex-wrap justify-center gap-4 mt-8 mb-6" id="ew-chart-buttons">
                        <button class="chart-range-button active" data-chart="ew-cumulative">Cumulative Returns</button>
                        <button class="chart-range-button" data-chart="ew-log-cumulative">Log Cumulative Returns</button>
                        <button class="chart-range-button" data-chart="ew-performance-radar">Performance Radar</button>
                        <button class="chart-range-button" data-chart="ew-returns-candles">Monthly Returns</button>
                        <button class="chart-range-button" data-chart="ew-performance-heatmap">Performance Heatmap</button>
                        <button class="chart-range-button" data-chart="ew-drawdown-analysis">Drawdown Analysis</button>
                        <button class="chart-range-button" data-chart="ew-rolling-sharpe">Rolling Sharpe Dashboard</button>
                        <button class="chart-range-button" data-chart="ew-mean-bars">Mean Returns</button>
                        <button class="chart-range-button" data-chart="ew-vol-bars">Volatility</button>
                        <button class="chart-range-button" data-chart="ew-sharpe-bars">Sharpe Ratios</button>
                    </div>

                    <!-- Equal-Weight Chart Containers -->
                    <div id="ew-chart-container" class="hidden">
                        <!-- Charts will be shown here when buttons are clicked -->
                    </div>
                </section>

                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060] mb-10 text-center">
                    <h2 class="text-3xl font-bold text-white mb-4">Value-Weight Portfolio Statistics</h2>
                    
                    <h3 class="text-xl font-semibold mb-4 text-white">Key Performance Metrics</h3>
                    <!-- Value-Weight Portfolio Statistics Table (modified) -->
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                                <tr class="bg-gradient-to-r from-purple-800 to-indigo-800 text-white">
                                    <th scope="col" class="py-3 px-6 text-center tracking-wider">
                                        Strategy
                                    </th>
                                    <th scope="col" class="py-3 px-6 text-center tracking-wider">
                                        Annual Return (%)
                                    </th>
                                    <th scope="col" class="py-3 px-6 text-center tracking-wider">
                                        Annual Volatility (%)
                                    </th>
                                    <th scope="col" class="py-3 px-6 text-center tracking-wider">
                                        Sharpe Ratio
                                    </th>
                                    <th scope="col" class="py-3 px-6 text-center tracking-wider">
                                        Max Drawdown (%)
                                    </th>
                                    <th scope="col" class="py-3 px-6 text-center tracking-wider">
                                        Action
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        VW_Amihud_28
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        166.88
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        101.46
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        1.64
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -76.42
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="VW_Amihud_28">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        VW_Amihud_7
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        170.93
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        109.07
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        1.57
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -53.38
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="VW_Amihud_7">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        VW_Amihud_14
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        145.61
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        106.63
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        1.37
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -71.91
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="VW_Amihud_14">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        VW_Amihud_21
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        139.34
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        98.69
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        1.41
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -76.71
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="VW_Amihud_21">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        VW_RSI_28
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        119.26
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        86.78
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        1.37
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -65.05
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="VW_RSI_28">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        VW_Momentum_4w
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        117.64
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        93.52
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        1.26
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -69.43
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="VW_Momentum_4w">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        VW_Amihud_90
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        85.71
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        100.92
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        0.85
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -73.26
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="VW_Amihud_90">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        VW_RSI_21
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        91.06
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        82.2
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        1.11
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -55.17
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="VW_RSI_21">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        VW_Strev_weekly
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        79.25
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        93.02
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        0.85
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -68.94
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="VW_Strev_weekly">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        VW_RSI_90
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        68.72
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        76.51
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        0.9
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -64.28
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="VW_RSI_90">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 transition-colors duration-200">
                                    <td class="py-4 px-6 font-semibold text-white whitespace-nowrap">
                                        BTC
                                    </td>
                                    <td class="py-4 px-6 text-center text-green-400 font-medium">
                                        65.79
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        59.91
                                    </td>
                                    <td class="py-4 px-6 text-center font-bold text-lg text-purple-300">
                                        1.1
                                    </td>
                                    <td class="py-4 px-6 text-center text-red-400">
                                        -75.9
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" data-strategy="BTC">Invest Now</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Value-Weight Chart Selection Buttons -->
                    <div class="flex flex-wrap justify-center gap-4 mt-8 mb-6" id="vw-chart-buttons">
                        <button class="chart-range-button active" data-chart="vw-cumulative">Cumulative Returns</button>
                        <button class="chart-range-button" data-chart="vw-log-cumulative">Log Cumulative Returns</button>
                        <button class="chart-range-button" data-chart="vw-performance-radar">Performance Radar</button>
                        <button class="chart-range-button" data-chart="vw-returns-candles">Monthly Returns</button>
                        <button class="chart-range-button" data-chart="vw-performance-heatmap">Performance Heatmap</button>
                        <button class="chart-range-button" data-chart="vw-drawdown-analysis">Drawdown Analysis</button>
                        <button class="chart-range-button" data-chart="vw-rolling-sharpe">Rolling Sharpe Dashboard</button>
                        <button class="chart-range-button" data-chart="vw-mean-bars">Mean Returns</button>
                        <button class="chart-range-button" data-chart="vw-vol-bars">Volatility</button>
                        <button class="chart-range-button" data-chart="vw-sharpe-bars">Sharpe Ratios</button>
                    </div>

                    <!-- Value-Weight Chart Containers -->
                    <div id="vw-chart-container" class="hidden">
                        <!-- Charts will be shown here when buttons are clicked -->
                    </div>
                </section>

                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060] mb-10 text-center">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-6">Sentiment Trading Strategy</h2>
                    
                    <!-- Sentiment Chart Selection Buttons -->
                    <div class="flex flex-wrap justify-center gap-4 mb-6" id="sentiment-chart-buttons">
                        <button class="chart-range-button active" data-chart="sentiment-cumulative">Cumulative Returns</button>
                        <button class="chart-range-button" data-chart="sentiment-log-cumulative">Log Cumulative Returns</button>
                        <button class="chart-range-button" data-chart="sentiment-sharpe">Sharpe Ratios</button>
                    </div>

                    <!-- Sentiment Chart Containers -->
                    <div id="sentiment-chart-container" class="hidden">
                        <!-- Charts will be shown here when buttons are clicked -->
                    </div>
                </section>

                <!-- This section can be expanded with more performance metrics, charts, or tables -->
                <section class="bg-dark-navy-alt p-8 rounded-xl shadow-lg border border-[#303060]">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-6">Best Performing Key Performance Indicators (KPIs)</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="bg-[#1A1A40] p-6 rounded-lg border border-[#303060] text-center">
                            <p class="text-sm text-[#A0A0B0]">Total Gain (YTD)</p>
                            <p class="text-4xl font-bold text-[#39FF14] mt-2">+170.93%</p>
                        </div>
                        <div class="bg-[#1A1A40] p-6 rounded-lg border border-[#303060] text-center">
                            <p class="text-sm text-[#A0A0B0]">Sharpe Ratio</p>
                            <p class="text-4xl font-bold text-[#00FFFF] mt-2">2.76</p>
                        </div>
                        <div class="bg-[#1A1A40] p-6 rounded-lg border border-[#303060] text-center">
                            <p class="text-sm text-[#A0A0B0]">Lowest Max Drawdown</p>
                            <p class="text-4xl font-bold text-[#DC2626] mt-2">-32.63%</p>
                        </div>
                    </div>
                    <p class="text-center text-sm text-[#A0A0B0] mt-8">
                        Further detailed performance metrics and customizable reports will be available soon.
                    </p>
                </section>

                <!-- Investment Modal (add this at the bottom of the Performance page content) -->
                <div id="investment-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
                    <div class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#00FFFF] max-w-md w-full">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-2xl font-bold text-[#E0E0EB]" id="modal-strategy-name">Invest in Strategy</h3>
                            <button id="close-modal" class="text-[#E0E0EB] hover:text-[#DC2626] text-2xl">&times;</button>
                        </div>
                        <form id="investment-form">
                            <input type="hidden" id="selected-strategy">
                            <div class="mb-4">
                                <label for="investment-amount" class="block text-[#A0A0B0] mb-2">Investment Amount ($)</label>
                                <input type="number" id="investment-amount" class="w-full p-3 rounded-lg bg-[#101030] border border-[#303060] text-[#E0E0EB]" min="100" step="100" value="1000" required>
                            </div>
                            <div class="mb-6">
                                <label for="investment-duration" class="block text-[#A0A0B0] mb-2">Duration (months)</label>
                                <select id="investment-duration" class="w-full p-3 rounded-lg bg-[#101030] border border-[#303060] text-[#E0E0EB]" required>
                                    <option value="3">3 months</option>
                                    <option value="6">6 months</option>
                                    <option value="12" selected>12 months</option>
                                    <option value="24">24 months</option>
                                </select>
                            </div>
                            <div class="flex justify-between">
                                <button type="button" id="cancel-investment" class="btn-outline px-6 py-2 font-semibold">Cancel</button>
                                <button type="submit" class="btn-crimson px-6 py-2 font-semibold">Confirm Investment</button>
                            </div>
                        </form>
                    </div>
                </div>
            </main>
        </div>

        <!-- INSIGHTS PAGE CONTENT -->
        <div id="page-insights" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">Market Insights & Analysis</h1>

                <!-- Real-time Price Chart -->
                <div class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060] mb-10">
                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-6">Real-time Price Chart</h2>
                    <!-- TradingView Widget BEGIN -->
                    <div class="tradingview-widget-container" style="height:400px; width:100%;">
                        <div id="tradingview_widget" style="height:100%; width:100%;"></div>
                        <script type="text/javascript">
                            new TradingView.widget(
                                {
                                    "width": "100%",
                                    "height": "400",
                                    "symbol": "BINANCE:BTCUSDT",
                                    "interval": "D",
                                    "timezone": "Etc/UTC",
                                    "theme": "dark",
                                    "style": "1",
                                    "locale": "en",
                                    "toolbar_bg": "#f1f3f6",
                                    "enable_publishing": false,
                                    "allow_symbol_change": true,
                                    "container_id": "tradingview_widget"
                                }
                            );
                        </script>
                    </div>
                    <!-- TradingView Widget END -->
                </div>

                <!-- Crypto Fear & Greed Index - Combined Section -->
                <div class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060] mb-10">
                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-8 text-center w-full">Crypto Fear & Greed Index</h2>
                    
                    <div class="flex flex-col md:flex-row justify-center items-center gap-8 w-full">
                        <!-- Standard Crypto Fear & Greed Index -->
                        <div class="flex flex-col items-center justify-center w-full md:w-1/2">
                            <h3 class="text-xl font-semibold text-[#E0E0EB] mb-4">Market Sentiment Index</h3>
                            <div class="sentiment-gauge-container">
                                <div class="sentiment-gauge-arc"></div>
                                <div class="sentiment-gauge-needle" id="sentiment-needle" style="transform: translateX(-50%) rotate(36deg);"></div>
                                <div class="sentiment-gauge-labels">
                                    <span class="label extreme-fear">Extreme Fear</span>
                                    <span class="label fear">Fear</span>
                                    <span class="label neutral">Neutral</span>
                                    <span class="label greed">Greed</span>
                                    <span class="label extreme-greed">Extreme Greed</span>
                                </div>
                            </div>
                            <div class="current-sentiment-display w-full">
                                <p id="current-sentiment-value" class="value text-[#00FFFF]">70</p>
                                <p id="current-sentiment-label" style="color: #00FF00;">Current Status: Greed</p>
                            </div>
                            <p id="seven-day-average" class="seven-day-average-text w-full">Last 7-day average</p>
                        </div>

                        <!-- Polarity Crypto Fear & Greed Index -->
                        <div class="flex flex-col items-center justify-center w-full md:w-1/2">
                            <h3 class="text-xl font-semibold text-[#E0E0EB] mb-4">Polarity Sentiment Index</h3>
                            <div class="sentiment-gauge-container">
                                <div class="sentiment-gauge-arc"></div>
                                <div class="sentiment-gauge-needle" id="sentiment-needle-2" style="transform: translateX(-50%) rotate(14.4deg);"></div>
                                <div class="sentiment-gauge-labels">
                                    <span class="label extreme-fear">Extreme Fear</span>
                                    <span class="label fear">Fear</span>
                                    <span class="label neutral">Neutral</span>
                                    <span class="label greed">Greed</span>
                                    <span class="label extreme-greed">Extreme Greed</span>
                                </div>
                            </div>
                            <div class="current-sentiment-display w-full">
                                <p id="current-sentiment-value-2" class="value text-[#00FFFF]">58</p>
                                <p id="current-sentiment-label-2" class="label text-[#FFFF00]">Current Status: Neutral</p>
                            </div>
                            <p id="seven-day-average-2" class="seven-day-average-text w-full">Last 7-day average</p>
                        </div>
                    </div>
                </div>
                
                

                <!-- Replace the existing Sentiment Across Time section with this code -->
                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060] mb-10 text-center">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-6">Sentiment Across Time</h2>
                    
                    <!-- Chart Selection Buttons -->
                    <div class="flex flex-wrap justify-center gap-4 mb-6" id="vader-chart-buttons">
                        <button class="chart-range-button active" data-chart="sentiment-daily">Daily Average</button>
                        <button class="chart-range-button" data-chart="sentiment-monthly">Monthly Heatmap</button>
                    </div>

                    <!-- Chart Containers -->
                    <div id="vader-chart-container" class="hidden">
                        <!-- Charts will be shown here when buttons are clicked -->
                    </div>
                </section>


                <!-- Replace the existing Polarity Sentiment Across Time section with this code -->
                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060] mb-10 text-center">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-6">Polarity Sentiment Across Time</h2>
                    
                    <!-- Chart Selection Buttons -->
                    <div class="flex flex-wrap justify-center gap-4 mb-6" id="polarity-chart-buttons">
                        <button class="chart-range-button active" data-chart="polarity-daily">Daily Average</button>
                        <button class="chart-range-button" data-chart="polarity-monthly">Monthly Heatmap</button>
                    </div>

                    <!-- Chart Containers -->
                    <div id="polarity-chart-container" class="hidden">
                        <!-- Charts will be shown here when buttons are clicked -->
                    </div>
                </section>

                <!-- Replace the existing Positive and Negative WordClouds section with this code -->
                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060] mb-10 text-center">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-6">WordClouds</h2>
                    
                    <!-- Chart Selection Buttons -->
                    <div class="flex flex-wrap justify-center gap-4 mb-6" id="wordcloud-buttons">
                        <button class="chart-range-button active" data-chart="wordcloud-positive">Positive Words</button>
                        <button class="chart-range-button" data-chart="wordcloud-negative">Negative Words</button>
                    </div>

                    <!-- Chart Containers -->
                    <div id="wordcloud-container" class="hidden">
                        <!-- Charts will be shown here when buttons are clicked -->
                    </div>
                </section>

                <!-- Latest News & Analysis -->
                <section class="bg-dark-navy-alt p-8 rounded-xl shadow-lg border border-[#303060]">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-8">Latest News & Analysis</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="news-articles-container">
                        <!-- News articles will be dynamically loaded here -->
                    </div>
                    <div class="text-center mt-10">
                        <button id="load-more-news-btn" class="btn-outline px-8 py-3 text-lg font-semibold">Load More News</button>
                    </div>
                </section>
            </main>
        </div>

        <!-- PORTFOLIO PAGE CONTENT -->
        <div id="page-portfolio" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">Your Crypto Portfolio</h1>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-10">
                    <!-- Portfolio Summary & Chart -->
                    <div class="lg:col-span-2 bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060]">
                        <h2 class="text-2xl font-bold text-[#E0E0EB] mb-6">Portfolio Overview</h2>
                        <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                            <div>
                                <p class="text-lg text-[#A0A0B0]">Total Value</p>
                                <p id="total-portfolio-value" class="text-5xl font-bold text-[#39FF14]">$0.01</p>
                            </div>
                            <div class="mt-4 md:mt-0 text-right">
                                <p class="text-lg text-[#A0A0B0]">24h Change</p>
                                <p id="portfolio-24h-change" class="text-3xl font-bold text-[#39FF14]">+$0.00 (+0.00%)</p>
                            </div>
                        </div>
                        <!-- Portfolio Distribution Chart -->
                        <div class="pie-chart-container flex flex-col md:flex-row items-center justify-center">
                            <svg id="portfolio-pie-chart" class="w-full max-w-[200px] h-auto md:w-1/2 md:max-w-none md:h-full" viewBox="0 0 200 200"></svg>
                            <div id="portfolio-legend" class="w-full md:w-1/2 mt-6 md:mt-0 md:ml-8 flex flex-col items-start space-y-2 text-lg">
                                <!-- Legend items will be appended here by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Recent Transactions -->
                    <div class="lg:col-span-1 bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060]">
                        <h2 class="text-2xl font-bold text-[#E0E0EB] mb-6">Recent Transactions</h2>
                        <div class="space-y-4">
                            <div class="bg-[#101030] p-4 rounded-lg flex justify-between items-center border border-[#303060]">
                                <div>
                                    <p class="font-semibold text-[#E0E0EB]">Buy Bitcoin</p>
                                    <p class="text-sm text-[#A0A0B0]">0.05 BTC @ $68,000</p>
                                </div>
                                <span class="text-[#39FF14] font-semibold">+$3,400.00</span>
                            </div>
                            <div class="bg-[#101030] p-4 rounded-lg flex justify-between items-center border border-[#303060]">
                                <div>
                                    <p class="font-semibold text-[#E0E0EB]">Sell Ethereum</p>
                                    <p class="text-sm text-[#A0A0B0]">0.8 ETH @ $3,900</p>
                                </div>
                                <span class="text-[#DC2626] font-semibold">-$3,120.00</span>
                            </div>
                            <div class="bg-[#101030] p-4 rounded-lg flex justify-between items-center border border-[#303060]">
                                <div>
                                    <p class="font-semibold text-[#E0E0EB]">Stake Solana</p>
                                    <p class="text-sm text-[#A0A0B0]">10 SOL</p>
                                </div>
                                <span class="text-[#00FFFF] font-semibold">Staked</span>
                            </div>
                        </div>
                        <div class="text-center mt-6">
                            <button id="view-all-transactions-btn" class="btn-outline px-6 py-2 font-semibold">View All Transactions</button>
                        </div>
                    </div>
                </div>

                <!-- Portfolio Holdings Table -->
                <section class="mt-10 bg-dark-navy-alt p-8 rounded-xl shadow-lg border border-[#303060]">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-8">Your Holdings</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left data-table">
                            <thead>
                                <tr>
                                    <th class="py-3 px-4 text-sm font-medium uppercase tracking-wider">Asset</th>
                                    <th class="py-3 px-4 text-sm font-medium uppercase tracking-wider">Amount</th>
                                    <th class="py-3 px-4 text-sm font-medium uppercase tracking-wider">Current Price</th>
                                    <th class="py-3 px-4 text-sm font-medium uppercase tracking-wider">Value</th>
                                    <th class="py-3 px-4 text-sm font-medium uppercase tracking-wider">Action</th>
                                </tr>
                            </thead>
                            <tbody id="holdings-table-body">
                                <!-- Holdings will be dynamically added here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Portfolio Value Over Time Chart -->
                <section id="portfolio-value-chart-section" class="mt-10">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-8 text-center">Portfolio Value Over Time</h2>
                    <!-- Date Range Buttons -->
                    <div class="flex justify-center gap-4 mb-6" id="portfolio-chart-range-buttons">
                        <button class="chart-range-button active" data-range="1m">1M</button>
                        <button class="chart-range-button" data-range="3m">3M</button>
                        <button class="chart-range-button" data-range="6m">6M</button>
                        <button class="chart-range-button" data-range="1y">1Y</button>
                        <button class="chart-range-button" data-range="all">All</button>
                    </div>
                    <div id="portfolio-value-chart-container">
                        <canvas id="portfolio-value-chart"></canvas>
                    </div>
                </section>
            </main>
        </div>

        <!-- LEARN PAGE CONTENT -->
        <div id="page-learn" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">Learn & Grow Your Crypto Knowledge</h1>

                <!-- Category Filters -->
                <div class="flex flex-wrap justify-center gap-4 mb-10" id="category-filters">
                    <button class="category-pill px-5 py-2 font-semibold text-lg active" data-category="All">All</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="Basics">Basics</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="Trading">Trading</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="DeFi">DeFi</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="NFTs">NFTs</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="Security">Security</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="Investing">Investing</button>
                </div>

                <!-- Learning Guides Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="learning-guides-container">
                    <!-- Guide cards will be dynamically loaded here -->
                </div>
                <div class="text-center mt-10">
                    <button id="load-more-guides-btn" class="btn-outline px-8 py-3 text-lg font-semibold">Load More Guides</button>
                </div>
            </main>
        </div>

        <!-- AI ASSISTANT PAGE CONTENT -->
        <div id="page-ai-assistant" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20 flex flex-col items-center">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">Your AI Crypto Assistant</h1>

                <div class="chat-container w-full max-w-3xl h-[600px] flex flex-col rounded-xl shadow-lg border border-[#303060]">
                    <!-- Chat Messages Display -->
                    <div id="chat-messages" class="flex-grow p-6 overflow-y-auto space-y-4">
                        <!-- Initial Bot Message -->
                        <div class="flex justify-start">
                            <div class="message-bot p-4 rounded-lg max-w-[80%]" data-raw-text="Hello! I'm your AI Crypto Assistant. How can I help you navigate the crypto world today?">
                                <p>Hello! I'm your AI Crypto Assistant. How can I help you navigate the crypto world today?</p>
                            </div>
                        </div>
                    </div>

                    <!-- Predefined Questions -->
                    <!-- Changed to flex-wrap and justify-center for two per line -->
                    <div class="p-4 border-t border-[#303060] flex flex-wrap justify-center gap-3">
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="What is Bitcoin?">What is Bitcoin?</button>
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="Explain DeFi.">Explain DeFi.</button>
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="How do I secure my wallet?">How do I secure my wallet?</button>
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="Summarize today's crypto news">Summarize today's crypto news</button>
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="What are the risks of investing in crypto?">What are the risks of investing in crypto?</button>
                    </div>

                    <!-- Message Input -->
                    <div class="p-4 border-t border-[#303060] flex items-center space-x-4">
                        <input type="text" id="user-input" placeholder="Ask me anything about crypto..." class="chat-input flex-grow p-3 focus:outline-none">
                        <button id="send-button" class="btn-crimson px-6 py-3 font-semibold">Send</button>
                    </div>
                </div>

                <!-- How Our AI Assistant Works Section -->
                <section class="mt-10 bg-dark-navy-alt p-8 rounded-xl shadow-lg border border-[#303060] w-full max-w-3xl">
                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4 text-center">How Our AI Assistant Works</h2>
                    <p class="text-lg text-[#A0A0B0] leading-relaxed mb-4">
                        Our AI assistant is powered by advanced language models, trained on a vast dataset of cryptocurrency information. It can provide summaries, answer factual questions, and guide you through complex topics.
                    </p>
                    <ul class="list-disc list-inside space-y-2 text-lg text-[#00FFFF]">
                        <li><span class="font-semibold">Instant Answers:</span> Get quick, concise responses to your crypto queries.</li>
                        <li><span class="font-semibold">News Summaries:</span> Stay updated with AI-generated summaries of the latest market news.</li>
                        <li><span class="font-semibold">Educational Support:</span> Understand complex concepts with simplified explanations.</li>
                    </ul>
                </section>
            </main>
        </div>

        <!-- ABOUT PAGE CONTENT -->
        <div id="page-about" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">About Crimson Crypto</h1>

                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060] mb-10">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-6 text-center">Our Mission</h2>
                    <p class="text-lg text-[#A0A0B0] leading-relaxed text-center">
                        At Crimson Crypto, our mission is to empower individuals to confidently navigate the complex and rapidly evolving world of cryptocurrency investment. We believe that access to reliable information, intelligent insights, and personalized strategies is crucial for success in the digital asset space. We are committed to providing a platform that simplifies crypto investing, making it accessible and understandable for everyone, from beginners to seasoned traders.
                    </p>
                    
                </section>

                <section class="bg-dark-navy-alt p-8 rounded-xl shadow-lg border border-[#303060] mb-10">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-8 text-center">Our Core Values</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Core Value 1: Transparency -->
                        <div class="core-value-card">
                            <div class="icon flex justify-center">
                                <!-- Icon: Eye or Magnifying Glass for Transparency -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                            </div>
                            <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-3">Transparency</h3>
                            <p class="text-lg text-[#A0A0B0]">We believe in open and honest communication, providing clear insights and data so you can always understand your investments.</p>
                        </div>
                        <!-- Core Value 2: Innovation -->
                        <div class="core-value-card">
                            <div class="icon flex justify-center">
                                <!-- Icon: Lightbulb or Gear for Innovation -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lightbulb"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 3c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 22h6"/><path d="M12 14v8"/></svg>
                            </div>
                            <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-3">Innovation</h3>
                            <p class="text-lg text-[#A0A0B0]">We are constantly exploring new technologies and strategies to bring you cutting-edge tools and a superior investment experience.</p>
                        </div>
                        <!-- Core Value 3: Empowerment -->
                        <div class="core-value-card">
                            <div class="icon flex justify-center">
                                <!-- Icon: Hand holding coin or Up-arrow for Empowerment -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-hand-coin"><path d="M11 11.5V10a2 2 0 0 1 4 0v1.5"/><path d="M17.2 18.2 21 22"/><path d="M18.6 15.6c-.4.8-.8 1.5-1.4 2.1l-2.4-2.4c.6-.6 1.3-1 2.1-1.4l2.1-2.1c-.4-.4-1.1-.4-1.5 0l-2.5-2.5c-.4-.4-1.1-.4-1.5 0l-2.1 2.1c-.8.4-1.5.8-2.1 1.4l-2.4-2.4c-.6-.6-1-1.3-1.4-2.1L3 6"/><path d="m14 14 2 2"/></svg>
                            </div>
                            <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-3">Empowerment</h3>
                            <p class="text-lg text-[#A0A0B0]">We equip you with the knowledge and tools to make confident investment decisions, fostering financial independence.</p>
                        </div>
                    </div>
                </section>

                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060]">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-8 text-center">What Our Users Say</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Review Card 1 -->
                        <div class="review-card">
                            <div class="flex items-center mb-3">
                                <span class="review-rating text-xl mr-2">★★★★★</span>
                                <p class="text-sm text-[#A0A0B0]">"Crimson Crypto has transformed my investment approach!"</p>
                            </div>
                            <p class="text-[#E0E0EB] leading-relaxed mb-4">"The strategies are clear, the insights are invaluable, and the AI assistant is a game-changer. Highly recommend for anyone serious about crypto."</p>
                            <p class="review-author">- CryptoEnthusiast123</p>
                        </div>
                        <!-- Review Card 2 -->
                        <div class="review-card">
                            <div class="flex items-center mb-3">
                                <span class="review-rating text-xl mr-2">★★★★★</span>
                                <p class="text-sm text-[#A0A0B0]">"Finally, a crypto platform that makes sense."</p>
                            </div>
                            <p class="text-[#E0E0EB] leading-relaxed mb-4">"As a beginner, I was overwhelmed. Crimson Crypto's learn section and personalized guidance have made me confident in my investments."</p>
                            <p class="review-author">- BlockchainNewbie</p>
                        </div>
                        <!-- New Review Card 3 -->
                        <div class="review-card">
                            <div class="flex items-center mb-3">
                                <span class="review-rating text-xl mr-2">★★★★★</span>
                                <p class="text-sm text-[#A0A0B0]">"Exceptional support and user-friendly interface!"</p>
                            </div>
                            <p class="text-[#E0E0EB] leading-relaxed mb-4">"I've tried several platforms, but Crimson Crypto stands out with its intuitive design and prompt customer support. A truly empowering experience."</p>
                            <p class="review-author">- DigitalNomad22</p>
                        </div>
                        <!-- New Review Card 4 -->
                        <div class="review-card">
                            <div class="flex items-center mb-3">
                                <span class="review-rating text-xl mr-2">★★★★★</span>
                                <p class="text-sm text-[#A0A0B0]">"My go-to for crypto insights."</p>
                            </div>
                            <p class="text-[#E0E0EB] leading-relaxed mb-4">"The market analysis and news updates are always spot on, helping me stay ahead in this fast-paced market. Couldn't ask for more!"</p>
                            <p class="review-author">- HodlerPro</p>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- LEARN PAGE CONTENT -->
        <div id="page-learn" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">Learn & Grow Your Crypto Knowledge</h1>

                <!-- Category Filters -->
                <div class="flex flex-wrap justify-center gap-4 mb-10" id="category-filters">
                    <button class="category-pill px-5 py-2 font-semibold text-lg active" data-category="All">All</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="Basics">Basics</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="Trading">Trading</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="DeFi">DeFi</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="NFTs">NFTs</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="Security">Security</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="Investing">Investing</button>
                </div>

                <!-- Learning Guides Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="learning-guides-container">
                    <!-- Guide cards will be dynamically loaded here -->
                </div>
                <div class="text-center mt-10">
                    <button id="load-more-guides-btn" class="btn-outline px-8 py-3 text-lg font-semibold">Load More Guides</button>
                </div>
            </main>
        </div>

        <!-- AI ASSISTANT PAGE CONTENT -->
        <div id="page-ai-assistant" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20 flex flex-col items-center">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">Your AI Crypto Assistant</h1>

                <div class="chat-container w-full max-w-3xl h-[600px] flex flex-col rounded-xl shadow-lg border border-[#303060]">
                    <!-- Chat Messages Display -->
                    <div id="chat-messages" class="flex-grow p-6 overflow-y-auto space-y-4">
                        <!-- Initial Bot Message -->
                        <div class="flex justify-start">
                            <div class="message-bot p-4 rounded-lg max-w-[80%]" data-raw-text="Hello! I'm your AI Crypto Assistant. How can I help you navigate the crypto world today?">
                                <p>Hello! I'm your AI Crypto Assistant. How can I help you navigate the crypto world today?</p>
                            </div>
                        </div>
                    </div>

                    <!-- Predefined Questions -->
                    <!-- Changed to flex-wrap and justify-center for two per line -->
                    <div class="p-4 border-t border-[#303060] flex flex-wrap justify-center gap-3">
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="What is Bitcoin?">What is Bitcoin?</button>
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="Explain DeFi.">Explain DeFi.</button>
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="How do I secure my wallet?">How do I secure my wallet?</button>
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="Summarize today's crypto news">Summarize today's crypto news</button>
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="What are the risks of investing in crypto?">What are the risks of investing in crypto?</button>
                    </div>

                    <!-- Message Input -->
                    <div class="p-4 border-t border-[#303060] flex items-center space-x-4">
                        <input type="text" id="user-input" placeholder="Ask me anything about crypto..." class="chat-input flex-grow p-3 focus:outline-none">
                        <button id="send-button" class="btn-crimson px-6 py-3 font-semibold">Send</button>
                    </div>
                </div>

                <!-- How Our AI Assistant Works Section -->
                <section class="mt-10 bg-dark-navy-alt p-8 rounded-xl shadow-lg border border-[#303060] w-full max-w-3xl">
                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4 text-center">How Our AI Assistant Works</h2>
                    <p class="text-lg text-[#A0A0B0] leading-relaxed mb-4">
                        Our AI assistant is powered by advanced language models, trained on a vast dataset of cryptocurrency information. It can provide summaries, answer factual questions, and guide you through complex topics.
                    </p>
                    <ul class="list-disc list-inside space-y-2 text-lg text-[#00FFFF]">
                        <li><span class="font-semibold">Instant Answers:</span> Get quick, concise responses to your crypto queries.</li>
                        <li><span class="font-semibold">News Summaries:</span> Stay updated with AI-generated summaries of the latest market news.</li>
                        <li><span class="font-semibold">Educational Support:</span> Understand complex concepts with simplified explanations.</li>
                    </ul>
                </section>
            </main>
        </div>

        <!-- ABOUT PAGE CONTENT -->
        <div id="page-about" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">About Crimson Crypto</h1>

                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060] mb-10">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-6">Our Mission</h2>
                    <p class="text-lg text-[#A0A0B0] leading-relaxed">
                        At Crimson Crypto, our mission is to empower individuals to confidently navigate the complex and rapidly evolving world of cryptocurrency investment. We believe that access to reliable information, intelligent insights, and personalized strategies is crucial for success in the digital asset space. We are committed to providing a platform that simplifies crypto investing, making it accessible and understandable for everyone, from beginners to seasoned traders.
                    </p>
                </section>

                <section class="bg-dark-navy-alt p-8 rounded-xl shadow-lg border border-[#303060] mb-10">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-8 text-center">Our Core Values</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Core Value 1: Transparency -->
                        <div class="core-value-card">
                            <div class="icon flex justify-center">
                                <!-- Icon: Eye or Magnifying Glass for Transparency -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                            </div>
                            <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-3">Transparency</h3>
                            <p class="text-lg text-[#A0A0B0]">We believe in open and honest communication, providing clear insights and data so you can always understand your investments.</p>
                        </div>
                        <!-- Core Value 2: Innovation -->
                        <div class="core-value-card">
                            <div class="icon flex justify-center">
                                <!-- Icon: Lightbulb or Gear for Innovation -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lightbulb"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 3c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 22h6"/><path d="M12 14v8"/></svg>
                            </div>
                            <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-3">Innovation</h3>
                            <p class="text-lg text-[#A0A0B0]">We are constantly exploring new technologies and strategies to bring you cutting-edge tools and a superior investment experience.</p>
                        </div>
                        <!-- Core Value 3: Empowerment -->
                        <div class="core-value-card">
                            <div class="icon flex justify-center">
                                <!-- Icon: Hand holding coin or Up-arrow for Empowerment -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-hand-coin"><path d="M11 11.5V10a2 2 0 0 1 4 0v1.5"/><path d="M17.2 18.2 21 22"/><path d="M18.6 15.6c-.4.8-.8 1.5-1.4 2.1l-2.4-2.4c.6-.6 1.3-1 2.1-1.4l2.1-2.1c-.4-.4-1.1-.4-1.5 0l-2.5-2.5c-.4-.4-1.1-.4-1.5 0l-2.1 2.1c-.8.4-1.5.8-2.1 1.4l-2.4-2.4c-.6-.6-1-1.3-1.4-2.1L3 6"/><path d="m14 14 2 2"/></svg>
                            </div>
                            <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-3">Empowerment</h3>
                            <p class="text-lg text-[#A0A0B0]">We equip you with the knowledge and tools to make confident investment decisions, fostering financial independence.</p>
                        </div>
                    </div>
                </section>

                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060]">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-8 text-center">What Our Users Say</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Review Card 1 -->
                        <div class="review-card">
                            <div class="flex items-center mb-3">
                                <span class="review-rating text-xl mr-2">★★★★★</span>
                                <p class="text-sm text-[#A0A0B0]">"Crimson Crypto has transformed my investment approach!"</p>
                            </div>
                            <p class="text-[#E0E0EB] leading-relaxed mb-4">"The strategies are clear, the insights are invaluable, and the AI assistant is a game-changer. Highly recommend for anyone serious about crypto."</p>
                            <p class="review-author">- CryptoEnthusiast123</p>
                        </div>
                        <!-- Review Card 2 -->
                        <div class="review-card">
                            <div class="flex items-center mb-3">
                                <span class="review-rating text-xl mr-2">★★★★★</span>
                                <p class="text-sm text-[#A0A0B0]">"Finally, a crypto platform that makes sense."</p>
                            </div>
                            <p class="text-[#E0E0EB] leading-relaxed mb-4">"As a beginner, I was overwhelmed. Crimson Crypto's learn section and personalized guidance have made me confident in my investments."</p>
                            <p class="review-author">- BlockchainNewbie</p>
                        </div>
                        <!-- New Review Card 3 -->
                        <div class="review-card">
                            <div class="flex items-center mb-3">
                                <span class="review-rating text-xl mr-2">★★★★★</span>
                                <p class="text-sm text-[#A0A0B0]">"Exceptional support and user-friendly interface!"</p>
                            </div>
                            <p class="text-[#E0E0EB] leading-relaxed mb-4">"I've tried several platforms, but Crimson Crypto stands out with its intuitive design and prompt customer support. A truly empowering experience."</p>
                            <p class="review-author">- DigitalNomad22</p>
                        </div>
                        <!-- New Review Card 4 -->
                        <div class="review-card">
                            <div class="flex items-center mb-3">
                                <span class="review-rating text-xl mr-2">★★★★★</span>
                                <p class="text-sm text-[#A0A0B0]">"My go-to for crypto insights."</p>
                            </div>
                            <p class="text-[#E0E0EB] leading-relaxed mb-4">"The market analysis and news updates are always spot on, helping me stay ahead in this fast-paced market. Couldn't ask for more!"</p>
                            <p class="review-author">- HodlerPro</p>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- LEARN PAGE CONTENT -->
        <div id="page-learn" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">Learn & Grow Your Crypto Knowledge</h1>

                <!-- Category Filters -->
                <div class="flex flex-wrap justify-center gap-4 mb-10" id="category-filters">
                    <button class="category-pill px-5 py-2 font-semibold text-lg active" data-category="All">All</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="Basics">Basics</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="Trading">Trading</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="DeFi">DeFi</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="NFTs">NFTs</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="Security">Security</button>
                    <button class="category-pill px-5 py-2 font-semibold text-lg" data-category="Investing">Investing</button>
                </div>

                <!-- Learning Guides Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="learning-guides-container">
                    <!-- Guide cards will be dynamically loaded here -->
                </div>
                <div class="text-center mt-10">
                    <button id="load-more-guides-btn" class="btn-outline px-8 py-3 text-lg font-semibold">Load More Guides</button>
                </div>
            </main>
        </div>

        <!-- AI ASSISTANT PAGE CONTENT -->
        <div id="page-ai-assistant" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20 flex flex-col items-center">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">Your AI Crypto Assistant</h1>

                <div class="chat-container w-full max-w-3xl h-[600px] flex flex-col rounded-xl shadow-lg border border-[#303060]">
                    <!-- Chat Messages Display -->
                    <div id="chat-messages" class="flex-grow p-6 overflow-y-auto space-y-4">
                        <!-- Initial Bot Message -->
                        <div class="flex justify-start">
                            <div class="message-bot p-4 rounded-lg max-w-[80%]" data-raw-text="Hello! I'm your AI Crypto Assistant. How can I help you navigate the crypto world today?">
                                <p>Hello! I'm your AI Crypto Assistant. How can I help you navigate the crypto world today?</p>
                            </div>
                        </div>
                    </div>

                    <!-- Predefined Questions -->
                    <!-- Changed to flex-wrap and justify-center for two per line -->
                    <div class="p-4 border-t border-[#303060] flex flex-wrap justify-center gap-3">
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="What is Bitcoin?">What is Bitcoin?</button>
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="Explain DeFi.">Explain DeFi.</button>
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="How do I secure my wallet?">How do I secure my wallet?</button>
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="Summarize today's crypto news">Summarize today's crypto news</button>
                        <button class="predefined-question-btn px-4 py-2 text-sm font-medium" data-question="What are the risks of investing in crypto?">What are the risks of investing in crypto?</button>
                    </div>

                    <!-- Message Input -->
                    <div class="p-4 border-t border-[#303060] flex items-center space-x-4">
                        <input type="text" id="user-input" placeholder="Ask me anything about crypto..." class="chat-input flex-grow p-3 focus:outline-none">
                        <button id="send-button" class="btn-crimson px-6 py-3 font-semibold">Send</button>
                    </div>
                </div>

                <!-- How Our AI Assistant Works Section -->
                <section class="mt-10 bg-dark-navy-alt p-8 rounded-xl shadow-lg border border-[#303060] w-full max-w-3xl">
                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4 text-center">How Our AI Assistant Works</h2>
                    <p class="text-lg text-[#A0A0B0] leading-relaxed mb-4">
                        Our AI assistant is powered by advanced language models, trained on a vast dataset of cryptocurrency information. It can provide summaries, answer factual questions, and guide you through complex topics.
                    </p>
                    <ul class="list-disc list-inside space-y-2 text-lg text-[#00FFFF]">
                        <li><span class="font-semibold">Instant Answers:</span> Get quick, concise responses to your crypto queries.</li>
                        <li><span class="font-semibold">News Summaries:</span> Stay updated with AI-generated summaries of the latest market news.</li>
                        <li><span class="font-semibold">Educational Support:</span> Understand complex concepts with simplified explanations.</li>
                    </ul>
                </section>
            </main>
        </div>

        <!-- ABOUT PAGE CONTENT -->
        <div id="page-about" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">About Crimson Crypto</h1>

                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060] mb-10">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-6">Our Mission</h2>
                    <p class="text-lg text-[#A0A0B0] leading-relaxed">
                        At Crimson Crypto, our mission is to empower individuals to confidently navigate the complex and rapidly evolving world of cryptocurrency investment. We believe that access to reliable information, intelligent insights, and personalized strategies is crucial for success in the digital asset space. We are committed to providing a platform that simplifies crypto investing, making it accessible and understandable for everyone, from beginners to seasoned traders.
                    </p>
                </section>

                <section class="bg-dark-navy-alt p-8 rounded-xl shadow-lg border border-[#303060] mb-10">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-8 text-center">Our Core Values</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Core Value 1: Transparency -->
                        <div class="core-value-card">
                            <div class="icon flex justify-center">
                                <!-- Icon: Eye or Magnifying Glass for Transparency -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                            </div>
                            <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-3">Transparency</h3>
                            <p class="text-lg text-[#A0A0B0]">We believe in open and honest communication, providing clear insights and data so you can always understand your investments.</p>
                        </div>
                        <!-- Core Value 2: Innovation -->
                        <div class="core-value-card">
                            <div class="icon flex justify-center">
                                <!-- Icon: Lightbulb or Gear for Innovation -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lightbulb"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 3c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 22h6"/><path d="M12 14v8"/></svg>
                            </div>
                            <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-3">Innovation</h3>
                            <p class="text-lg text-[#A0A0B0]">We are constantly exploring new technologies and strategies to bring you cutting-edge tools and a superior investment experience.</p>
                        </div>
                        <!-- Core Value 3: Empowerment -->
                        <div class="core-value-card">
                            <div class="icon flex justify-center">
                                <!-- Icon: Hand holding coin or Up-arrow for Empowerment -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-hand-coin"><path d="M11 11.5V10a2 2 0 0 1 4 0v1.5"/><path d="M17.2 18.2 21 22"/><path d="M18.6 15.6c-.4.8-.8 1.5-1.4 2.1l-2.4-2.4c.6-.6 1.3-1 2.1-1.4l2.1-2.1c-.4-.4-1.1-.4-1.5 0l-2.5-2.5c-.4-.4-1.1-.4-1.5 0l-2.1 2.1c-.8.4-1.5.8-2.1 1.4l-2.4-2.4c-.6-.6-1-1.3-1.4-2.1L3 6"/><path d="m14 14 2 2"/></svg>
                            </div>
                            <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-3">Empowerment</h3>
                            <p class="text-lg text-[#A0A0B0]">We equip you with the knowledge and tools to make confident investment decisions, fostering financial independence.</p>
                        </div>
                    </div>
                </section>

                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060]">
                    <h2 class="text-3xl font-bold text-[#E0E0EB] mb-8 text-center">What Our Users Say</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Review Card 1 -->
                        <div class="review-card">
                            <div class="flex items-center mb-3">
                                <span class="review-rating text-xl mr-2">★★★★★</span>
                                <p class="text-sm text-[#A0A0B0]">"Crimson Crypto has transformed my investment approach!"</p>
                            </div>
                            <p class="text-[#E0E0EB] leading-relaxed mb-4">"The strategies are clear, the insights are invaluable, and the AI assistant is a game-changer. Highly recommend for anyone serious about crypto."</p>
                            <p class="review-author">- CryptoEnthusiast123</p>
                        </div>
                        <!-- Review Card 2 -->
                        <div class="review-card">
                            <div class="flex items-center mb-3">
                                <span class="review-rating text-xl mr-2">★★★★★</span>
                                <p class="text-sm text-[#A0A0B0]">"Finally, a crypto platform that makes sense."</p>
                            </div>
                            <p class="text-[#E0E0EB] leading-relaxed mb-4">"As a beginner, I was overwhelmed. Crimson Crypto's learn section and personalized guidance have made me confident in my investments."</p>
                            <p class="review-author">- BlockchainNewbie</p>
                        </div>
                        <!-- New Review Card 3 -->
                        <div class="review-card">
                            <div class="flex items-center mb-3">
                                <span class="review-rating text-xl mr-2">★★★★★</span>
                                <p class="text-sm text-[#A0A0B0]">"Exceptional support and user-friendly interface!"</p>
                            </div>
                            <p class="text-[#E0E0EB] leading-relaxed mb-4">"I've tried several platforms, but Crimson Crypto stands out with its intuitive design and prompt customer support. A truly empowering experience."</p>
                            <p class="review-author">- DigitalNomad22</p>
                        </div>
                        <!-- New Review Card 4 -->
                        <div class="review-card">
                            <div class="flex items-center mb-3">
                                <span class="review-rating text-xl mr-2">★★★★★</span>
                                <p class="text-sm text-[#A0A0B0]">"My go-to for crypto insights."</p>
                            </div>
                            <p class="text-[#E0E0EB] leading-relaxed mb-4">"The market analysis and news updates are always spot on, helping me stay ahead in this fast-paced market. Couldn't ask for more!"</p>
                            <p class="review-author">- HodlerPro</p>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <div id="page-contact" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-6xl font-extrabold text-center mb-4 text-white animate-fade-in">Connect with Us</h1>
                <p class="text-xl text-[#A0A0B0] text-center mb-12 max-w-3xl mx-auto animate-fade-in-up">
                    We're here to help! Whether you have questions, feedback, or need support, feel free to reach out.
                </p>
        
                <section class="relative bg-white/5 backdrop-blur-md rounded-3xl shadow-2xl border border-white/10 p-8 md:p-12 max-w-3xl mx-auto transition-all duration-500 hover:shadow-cyan-500/30">
                    <div class="relative z-10">
                        <form id="contact-form" action="#" method="post" class="space-y-8">
                            <div>
                                <label for="contact-name" class="block text-lg font-semibold text-white mb-2 text-center">Your Name</label>
                                <input type="text" id="contact-name" name="name" placeholder="Enter your name" class="w-full p-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-4 focus:ring-cyan-500/50 transition-all duration-300">
                            </div>
                            <div>
                                <label for="contact-email" class="block text-lg font-semibold text-white mb-2 text-center">Your Email</label>
                                <input type="email" id="contact-email" name="email" placeholder="Enter your email address" class="w-full p-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-4 focus:ring-cyan-500/50 transition-all duration-300">
                            </div>
                            <div>
                                <label for="contact-subject" class="block text-lg font-semibold text-white mb-2 text-center">Subject</label>
                                <input type="text" id="contact-subject" name="subject" placeholder="What's this about?" class="w-full p-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-4 focus:ring-cyan-500/50 transition-all duration-300">
                            </div>
                            <div>
                                <label for="contact-message" class="block text-lg font-semibold text-white mb-2 text-center">Your Message</label>
                                <textarea id="contact-message" name="message" rows="6" placeholder="Write your message here..." class="w-full p-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-4 focus:ring-cyan-500/50 transition-all duration-300"></textarea>
                            </div>
                            <div class="flex justify-center pt-4">
                                <button type="submit" id="send-message-btn" class="btn-gradient px-12 py-4 text-xl font-bold shadow-lg rounded-full transform transition-all duration-300 hover:scale-105 active:scale-95 animate-pulse-slow">Send Message</button>
                            </div>
                        </form>
                        <div id="contact-response" class="mt-8 text-lg font-semibold text-center text-cyan-400 min-h-[1.5rem] animate-fade-in"></div>
                    </div>
                </section>
        
                <section class="mt-16 text-center text-white/80 animate-fade-in">
                    <h2 class="text-3xl font-extrabold mb-6">Contact Information</h2>
                    <div class="flex flex-col md:flex-row justify-center items-center gap-8 md:gap-16">
                        <div class="flex items-center space-x-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-cyan-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                            </svg>
                            <a href="mailto:support@crimsoncrypto.com" class="text-xl text-cyan-400 hover:text-cyan-300 hover:underline transition-colors duration-300">support@crimsoncrypto.com</a>
                        </div>
                        <div class="flex items-center space-x-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-cyan-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                            <p class="text-xl">123 Crypto Lane, Blockchain City, 98765</p>
                        </div>
                    </div>
                </section>
            </main>
        </div>
        
        <style>
            .btn-gradient {
                background: linear-gradient(90deg, #FF6B6B 0%, #FFB643 100%);
                box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
            }
            .btn-gradient:hover {
                background: linear-gradient(90deg, #FFB643 0%, #FF6B6B 100%);
                box-shadow: 0 0 30px rgba(255, 182, 67, 0.7);
            }
            @keyframes fade-in {
                from { opacity: 0; transform: translateY(-20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .animate-fade-in { animation: fade-in 1s ease-out forwards; }
        
            @keyframes fade-in-up {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .animate-fade-in-up { animation: fade-in-up 1s ease-out 0.5s forwards; opacity: 0; }
            
            @keyframes pulse-slow {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.02); }
            }
            .animate-pulse-slow {
                animation: pulse-slow 3s infinite ease-in-out;
            }
        </style>

        <!-- AUTHENTICATION PAGE CONTENT (Login/Sign Up) -->
        <div id="page-auth" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20 flex justify-center items-center min-h-[calc(100vh-150px)]">
                <div class="auth-container w-full max-w-md p-8 rounded-xl shadow-lg border border-[#303060] text-center">
                    <div class="flex justify-center mb-8">
                        <button id="tab-signup" class="tab-button px-6 py-3 text-xl font-semibold text-[#E0E0EB] mr-4 active">Sign Up</button>
                        <button id="tab-login" class="tab-button px-6 py-3 text-xl font-semibold text-[#E0E0EB]">Login</button>
                    </div>

                    <!-- Sign Up Form -->
                    <form id="signup-form" class="space-y-6 active-tab-content">
                        <h2 class="text-3xl font-bold text-[#E0E0EB] mb-4">Create Your Account</h2>
                        <div>
                            <input type="text" id="signup-username" class="form-input w-full p-3" placeholder="Username" required>
                        </div>
                        <div>
                            <input type="email" id="signup-email" class="form-input w-full p-3" placeholder="Email" required>
                        </div>
                        <div>
                            <input type="password" id="signup-password" class="form-input w-full p-3" placeholder="Password" required>
                        </div>
                        <div>
                            <input type="password" id="signup-confirm-password" class="form-input w-full p-3" placeholder="Confirm Password" required>
                        </div>
                        <button type="submit" class="btn-crimson w-full px-6 py-3 text-xl font-bold">Sign Up</button>
                    </form>

                    <!-- Login Form -->
                    <form id="login-form" class="space-y-6 hidden active-tab-content">
                        <h2 class="text-3xl font-bold text-[#E0E0EB] mb-4">Welcome Back!</h2>
                        <div>
                            <input type="email" id="login-email" class="form-input w-full p-3" placeholder="Email" required>
                        </div>
                        <div>
                            <input type="password" id="login-password" class="form-input w-full p-3" placeholder="Password" required>
                        </div>
                        <button type="submit" class="btn-crimson w-full px-6 py-3 text-xl font-bold">Login</button>
                        <p class="text-sm text-[#A0A0B0] mt-4">
                            <a href="#" class="text-[#00FFFF] hover:underline">Forgot Password?</a>
                        </p>
                    </form>
                </div>
            </main>
        </div>

        <!-- PRIVACY POLICY PAGE CONTENT -->
        <div id="page-privacy-policy" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">Privacy Policy</h1>

                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060] max-w-4xl mx-auto">
                    <p class="text-lg text-[#A0A0B0] mb-6">
                        This Privacy Policy describes how Crimson Crypto ("we," "us," or "our") collects, uses, and discloses your personal information when you use our website and services (the "Service"). By accessing or using the Service, you agree to be bound by these Terms.
                    </p>

                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4">1. Information We Collect</h2>
                    <p class="text-lg text-[#A0A0B0] mb-4">
                        We collect information you provide directly to us when you create an account, use our services, or communicate with us. This may include:
                    </p>
                    <ul class="list-disc list-inside text-lg text-[#A0A0B0] mb-4">
                        <li><strong>Personal Identifiable Information:</strong> Name, email address, and any other information you choose to provide.</li>
                        <li><strong>Financial Information:</strong> Details related to your crypto portfolio and transactions, which you input into the platform.</li>
                        <li><strong>Usage Data:</strong> Information about how you access and use the Service, such as your IP address, browser type, pages viewed, and time spent on pages.</li>
                    </ul>

                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4">2. How We Use Your Information</h2>
                    <p class="text-lg text-[#A0A0B0] mb-4">
                        We use the information we collect for various purposes, including to:
                    </p>
                    <ul class="list-disc list-inside text-lg text-[#A0A0B0] mb-4">
                        <li>Provide, maintain, and improve our Service.</li>
                        <li>Process your transactions and manage your account.</li>
                        <li>Personalize your experience and offer tailored content.</li>
                        <li>Communicate with you about updates, security alerts, and support messages.</li>
                        <li>Monitor and analyze trends, usage, and activities in connection with our Service.</li>
                        <li>Detect, investigate, and prevent fraudulent transactions and other illegal activities.</li>
                    </ul>

                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4">3. Sharing Your Information</h2>
                    <p class="text-lg text-[#A0A0B0] mb-4">
                        We may share your information with third parties in the following circumstances:
                    </p>
                    <ul class="list-disc list-inside text-lg text-[#A0A0B0] mb-4">
                        <li>With your consent or at your direction.</li>
                        <li>With service providers who perform services on our behalf (e.g., hosting, analytics, customer support).</li>
                        <li>To comply with legal obligations or respond to lawful requests.</li>
                        <li>To protect our rights, property, or safety, and the rights, property, or safety of our users or the public.</li>
                    </ul>

                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4">4. Data Security</h2>
                    <p class="text-lg text-[#A0A0B0] mb-6">
                        We implement reasonable security measures to protect your personal information from unauthorized access, alteration, disclosure, or destruction. However, no method of transmission over the Internet or electronic storage is 100% secure.
                    </p>

                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4">5. Your Choices</h2>
                    <p class="text-lg text-[#A0A0B0] mb-6">
                        You may update, correct, or delete your account information at any time by logging into your account settings. You may also opt-out of receiving promotional communications from us by following the instructions in those communications.
                    </p>

                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4">6. Changes to This Policy</h2>
                    <p class="text-lg text-[#A0A0B0] mb-6">
                        We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page.
                    </p>

                    <p class="text-lg text-[#A0A0B0] text-right mt-8">
                        Last updated: July 28, 2025
                    </p>
                </section>
            </main>
        </div>

        <!-- TERMS OF SERVICE PAGE CONTENT -->
        <div id="page-terms-of-service" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">Terms of Service</h1>

                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060] max-w-4xl mx-auto">
                    <p class="text-lg text-[#A0A0B0] mb-6">
                        Welcome to Crimson Crypto. These Terms of Service ("Terms") govern your access to and use of the Crimson Crypto website and services (the "Service"). By accessing or using the Service, you agree to be bound by these Terms.
                    </p>

                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4">1. Acceptance of Terms</h2>
                    <p class="text-lg text-[#A0A0B0] mb-4">
                        By accessing or using the Service, you confirm that you have read, understood, and agree to be bound by these Terms. If you do not agree with any part of these Terms, you must not use the Service.
                    </p>

                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4">2. Eligibility</h2>
                    <p class="text-lg text-[#A0A0B0] mb-4">
                        You must be at least 18 years old to use the Service. By using the Service, you represent and warrant that you are of legal age to form a binding contract with Crimson Crypto.
                    </p>

                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4">3. Your Account</h2>
                    <p class="text-lg text-[#A0A0B0] mb-4">
                        You are responsible for maintaining the confidentiality of your account login information and for all activities that occur under your account. You agree to notify us immediately of any unauthorized use of your account.
                    </p>

                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4">4. Use of Service</h2>
                    <p class="text-lg text-[#A0A0B0] mb-4">
                        You agree to use the Service only for lawful purposes and in accordance with these Terms. You agree not to:
                    </p>
                    <ul class="list-disc list-inside text-lg text-[#A0A0B0] mb-4">
                        <li>Use the Service in any way that violates any applicable federal, state, local, or international law or regulation.</li>
                        <li>Engage in any conduct that restricts or inhibits anyone's use or enjoyment of the Service.</li>
                        <li>Attempt to gain unauthorized access to any portion or feature of the Service.</li>
                    </ul>

                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4">5. Disclaimers</h2>
                    <p class="text-lg text-[#A0A0B0] mb-4">
                        The Service is provided on an "as is" and "as available" basis. Crimson Crypto makes no warranties, express or implied, regarding the Service, including, without limitation, implied warranties of merchantability, fitness for a particular purpose, or non-infringement.
                    </p>
                    <p class="text-lg text-[#A0A0B0] mb-4">
                        <strong>Cryptocurrency investments are highly volatile and inherently risky. The information provided on this Service is for educational and informational purposes only and does not constitute financial, investment, or trading advice. You are solely responsible for your investment decisions.</strong>
                    </p>

                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4">6. Limitation of Liability</h2>
                    <p class="text-lg text-[#A0A0B0] mb-6">
                        In no event shall Crimson Crypto, its affiliates, or their licensors, service providers, employees, agents, officers, or directors be liable for damages of any kind, under any legal theory, arising out of or in connection with your use, or inability to use, the Service.
                    </p>

                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-4">7. Changes to Terms</h2>
                    <p class="text-lg text-[#A0A0B0] mb-6">
                        We reserve the right to revise and update these Terms from time to time in our sole discretion. All changes are effective immediately when we post them and apply to all access to and use of the Service thereafter.
                    </p>

                    <p class="text-lg text-[#A0A0B0] text-right mt-8">
                        Last updated: July 28, 2025
                    </p>
                </section>
            </main>
        </div>

        <!-- ALL TRANSACTIONS PAGE CONTENT -->
        <div id="page-all-transactions" class="page-content">
            <main class="container mx-auto px-6 py-12 md:py-20">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-[#E0E0EB]">All Transactions</h1>

                <div class="flex justify-center mb-8">
                    <button id="back-to-portfolio-btn" class="btn-outline px-6 py-2 font-semibold">← Back to Portfolio</button>
                </div>

                <section class="bg-[#1A1A40] p-8 rounded-xl shadow-lg border border-[#303060]">
                    <h2 class="text-2xl font-bold text-[#E0E0EB] mb-6">Transaction History</h2>
                    <div class="space-y-4" id="all-transactions-container">
                        <!-- All transactions will be dynamically loaded here by JavaScript -->
                    </div>
                </section>
            </main>
        </div>

    </div> <!-- End of main-content-container -->

    <!-- Footer - Consistent across pages -->
    <footer class="bg-[#1A1A40] py-8 px-6 md:px-12 text-center text-[#A0A0B0] rounded-t-xl mt-10">
        <div class="max-w-6xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                <div class="mb-4 md:mb-0">
                    <p class="text-lg font-semibold text-[#E0E0EB]">Crimson Crypto</p>
                    <p class="text-sm">Navigate the Future of Investment</p>
                </div>
                <nav class="flex flex-wrap justify-center space-x-4 md:space-x-8 text-sm">
                    <a href="#" id="about-footer-link" class="hover:text-[#00FFFF] transition-colors duration-300">About Us</a>
                    <a href="#" id="contact-footer-link" class="hover:text-[#00FFFF] transition-colors duration-300">Contact</a>
                    <a href="#" id="privacy-policy-footer-link" class="hover:text-[#00FFFF] transition-colors duration-300">Privacy Policy</a>
                    <a href="#" id="terms-of-service-footer-link" class="hover:text-[#00FFFF] transition-colors duration-300">Terms of Service</a>
                </nav>
            </div>
            <p class="text-sm">&copy; 2025 Crimson Crypto. All rights reserved.</p>
            <p class="text-xs mt-2">Disclaimer: Cryptocurrency investments are volatile and high-risk. This platform provides educational content and tools; it is not financial advice. Consult with a professional financial advisor before making any investment decisions.</p>
        </div>
    </footer>

    <!-- Floating Bot Button -->
    <div id="bot-fab">
        🤖
    </div>

    <!-- Bot Pop-up Chat Window -->
    <div id="bot-popup-container">
        <div id="bot-popup-header">
            <span>Crimson Bot</span>
            <button id="bot-popup-close-btn">&times;</button>
        </div>
        <div id="bot-popup-messages">
            <!-- Bot messages will appear here -->
            <div class="bot-message-bubble">Hello! I'm your automated trading bot. I'll keep you updated on my trades. Ask me anything!</div>
        </div>
        <div id="bot-popup-input-area">
            <input type="text" id="bot-popup-input" placeholder="Type your message...">
            <button id="bot-popup-send-btn">Send</button>
        </div>
    </div>

    <!-- Trade Notification Pop-up -->
    <div id="trade-notification">
        <!-- Trade messages will appear here -->
    </div>

    <!-- News Alert Notification Pop-up -->
    <div id="news-alert-notification">
        <span id="news-alert-message"></span>
        <button id="news-alert-notification-close-btn">&times;</button>
    </div>


    <script type="module">
        console.log("Crimson Crypto script starting..."); // Added for debugging
        // Firebase imports (will be populated by the environment)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, collection, query, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        let app;
        let db;
        let auth;
        let userId = null; // To store the authenticated user's ID
        let investmentModal = document.getElementById('investment-modal');
        // Add this at the top with other variable declarations
        let userPortfolio = {
            totalValue: 0,
            holdings: {},
            transactions: []
        };
        // Track user transactions
        let userTransactions = [];
        


        // Initialize Firebase and set up auth listener
        const initializeFirebase = async () => {
            try {
                const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        userId = user.uid;
                        console.log("User is signed in:", userId);
                        // You can now safely perform Firestore operations
                        // For example, load user-specific data
                    } else {
                        console.log("No user is signed in. Attempting anonymous sign-in.");
                        try {
                            if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                                await signInWithCustomToken(auth, __initial_auth_token);
                            } else {
                                await signInAnonymously(auth);
                            }
                        } catch (error) {
                            console.error("Firebase authentication error:", error);
                        }
                    }
                });
            } catch (error) {
                console.error("Error initializing Firebase:", error);
            }
        };

        // Call Firebase initialization
        initializeFirebase();

        // Add this variable at the top of your script to track the active chart buttons
        let activeInsightsChartButtons = {
            vader: null,
            polarity: null,
            wordcloud: null
        };
        
        function closeAllModals() {
            const investmentModal = document.getElementById('investment-modal');
            const strategiesModal = document.getElementById('strategies-investment-modal');
            
            if (investmentModal && !investmentModal.classList.contains('hidden')) {
                investmentModal.classList.add('hidden');
            }
            if (strategiesModal && !strategiesModal.classList.contains('hidden')) {
                strategiesModal.classList.add('hidden');
            }
        }


        // Function to show a specific page and hide others
        function showPage(pageId, authTab = '') {
            console.log(`[showPage] Attempting to show page: ${pageId}`); // Debugging log
                // Close any open investment modal when navigating away
            if (investmentModal && !investmentModal.classList.contains('hidden')) {
                investmentModal.classList.add('hidden');
                console.log("Closed investment modal during page navigation");
            }
            closeAllModals();
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => {
                console.log(`[showPage] Page '${page.id}' computed display BEFORE removing active: ${window.getComputedStyle(page).display}`);
                page.classList.remove('active');
                // Log the computed display style after removing 'active' with a small delay
                setTimeout(() => {
                    console.log(`[showPage] Page '${page.id}' computed display AFTER removing active: ${window.getComputedStyle(page).display}`);
                }, 10); // Small delay
            });

            const targetPage = document.getElementById(`page-${pageId}`);
            if (targetPage) {
                console.log(`[showPage] Page '${targetPage.id}' computed display BEFORE adding active: ${window.getComputedStyle(targetPage).display}`);
                targetPage.classList.add('active');
                // Log the computed display style after adding 'active' with a small delay
                setTimeout(() => {
                    console.log(`[showPage] Page '${targetPage.id}' computed display AFTER adding active: ${window.getComputedStyle(targetPage).display}`);
                }, 10); // Small delay
            } 
                    // Reset Insights page charts if navigating to Insights
            if (pageId === 'insights') {
                resetInsightsCharts();
            }
            else {
                console.error(`[showPage] Page with ID 'page-${pageId}' not found.`); // Debugging log
            }


            // Handle auth page specific tab display
            if (pageId === 'auth') {
                showAuthTab(authTab);
            }

                // If navigating to performance page, setup the chart toggling
            if (pageId === 'performance') {
                setupPerformancePage();
            }

            // If navigating to insights page, fetch fear and greed index and load news
            if (pageId === 'insights') {
                fetchFearGreedIndex();
                currentNewsDisplayed = 0; // Reset news count
                loadMoreNews(true); // Load initial news articles
            }

            // If navigating to learn page, load initial guides
            if (pageId === 'learn') {
                // Ensure categoryFilterButtons are initialized before calling filterGuides
                if (!categoryFilterButtons) {
                    categoryFilterButtons = document.querySelectorAll('#category-filters .category-pill');
                }
                const allCategoryButton = document.querySelector('#category-filters [data-category="All"]');
                if (allCategoryButton) {
                    filterGuides('All', allCategoryButton);
                } else {
                    console.error("The 'All' category button was not found on the Learn page.");
                }
            }

            // If navigating to strategies page, apply filters to display strategies
            if (pageId === 'strategies') {
                filterStrategies(); // Call filterStrategies to display initial strategies
            }

            // If navigating to portfolio page, draw the pie chart and value chart
            if (pageId === 'portfolio') {
                drawPortfolioPieChart();
                // Ensure the 'all' button is active by default when navigating to portfolio
                const allRangeButton = document.querySelector('#portfolio-chart-range-buttons [data-range="all"]');
                if (allRangeButton) {
                    portfolioChartRangeButtons.forEach(btn => btn.classList.remove('active'));
                    allRangeButton.classList.add('active');
                }
                updateRecentTransactions();
                drawPortfolioValueChart('all'); // Call the new chart function with 'all' data
            }

            // If navigating to all-transactions page, load all transactions
            if (pageId === 'all-transactions') {
                renderAllTransactions();
            }

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Add this new function to reset Insights charts
        function resetInsightsCharts() {
            // Reset Vader charts
            const vaderDefaultButton = document.querySelector('#vader-chart-buttons button[data-chart="sentiment-daily"]');
            if (vaderDefaultButton) {
                vaderDefaultButton.click();
            }
            
            // Reset Polarity charts
            const polarityDefaultButton = document.querySelector('#polarity-chart-buttons button[data-chart="polarity-daily"]');
            if (polarityDefaultButton) {
                polarityDefaultButton.click();
            }
            
            // Reset Wordcloud charts
            const wordcloudDefaultButton = document.querySelector('#wordcloud-buttons button[data-chart="wordcloud-positive"]');
            if (wordcloudDefaultButton) {
                wordcloudDefaultButton.click();
            }
            
            console.log("Insights page charts reset to default views");
        }

        // Modify your existing chart button setup code (if you have one) to track active buttons
        function setupInsightsChartButtons() {
            // Vader chart buttons
            const vaderButtons = document.querySelectorAll('#vader-chart-buttons .chart-range-button');
            vaderButtons.forEach(button => {
                button.addEventListener('click', () => {
                    vaderButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    activeInsightsChartButtons.vader = button.dataset.chart;
                    // Your existing chart display logic here
                });
            });

            // Polarity chart buttons
            const polarityButtons = document.querySelectorAll('#polarity-chart-buttons .chart-range-button');
            polarityButtons.forEach(button => {
                button.addEventListener('click', () => {
                    polarityButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    activeInsightsChartButtons.polarity = button.dataset.chart;
                    // Your existing chart display logic here
                });
            });

            // Wordcloud buttons
            const wordcloudButtons = document.querySelectorAll('#wordcloud-buttons .chart-range-button');
            wordcloudButtons.forEach(button => {
                button.addEventListener('click', () => {
                    wordcloudButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    activeInsightsChartButtons.wordcloud = button.dataset.chart;
                    // Your existing chart display logic here
                });
            });
        }

        // Call this function when initializing your page
        setupInsightsChartButtons();

        // Function to add a new transaction
        function addTransaction(type, strategy, amount, date = new Date()) {
            const transaction = {
                type: type,
                strategy: strategy,
                amount: amount,
                date: date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                }),
                value: amount
            };
            
            // Add to beginning of array to keep most recent first
            userTransactions.unshift(transaction);
            
            // Update UI if on portfolio page
            if (document.getElementById('page-portfolio')?.classList.contains('active')) {
                updateRecentTransactions();
                setupPortfolioPage();
            }
            
            // Also update the all transactions page if it's active
            if (document.getElementById('page-all-transactions')?.classList.contains('active')) {
                renderAllTransactions();
            }
            
            // Show trade notification
            showTradeNotification(`Invested $${amount} in ${strategy}`);
        }

        // Function to update the Recent Transactions UI
        function updateRecentTransactions() {
            const transactionsContainer = document.querySelector('#page-portfolio .space-y-4');
            if (!transactionsContainer) return;
            
            // Clear existing transactions
            transactionsContainer.innerHTML = '';
            
            // Show only the 3 most recent transactions
            const recentTransactions = userPortfolio.transactions.slice(0, 3);
            
            if (recentTransactions.length === 0) {
                // Show empty state if no transactions
                transactionsContainer.innerHTML = `
                    <div class="bg-[#101030] p-4 rounded-lg text-center text-[#A0A0B0] border border-[#303060]">
                        No transactions yet. Invest in a strategy to see transactions here.
                    </div>
                `;
                return;
            }
            
            // Add each transaction to the UI
            recentTransactions.forEach(transaction => {
                const transactionElement = document.createElement('div');
                transactionElement.className = 'bg-[#101030] p-4 rounded-lg flex justify-between items-center border border-[#303060] transaction-card';
                
                // Determine styling based on transaction type
                const isSale = transaction.type === 'sale';
                const valueClass = isSale ? 'text-[#DC2626]' : 'text-[#39FF14]';
                const valuePrefix = isSale ? '-' : '+';
                const icon = isSale ? '↓' : '↑';
                const typeText = isSale ? 'Sold' : 'Invested in';
                
                transactionElement.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <span class="text-lg ${valueClass}">${icon}</span>
                        <div>
                            <p class="font-semibold text-[#E0E0EB]">${typeText} ${transaction.strategy}</p>
                            <p class="text-sm text-[#A0A0B0]">${transaction.date}</p>
                        </div>
                    </div>
                    <span class="${valueClass} font-semibold">${valuePrefix}$${transaction.amount.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span>
                `;
                
                transactionsContainer.appendChild(transactionElement);
            });
        }

        // Add this new function to handle portfolio updates
        function addToPortfolio(strategy, amount) {
            // Update total portfolio value
            userPortfolio.totalValue += amount;
            
            // Update or create holding for this strategy
            if (!userPortfolio.holdings[strategy]) {
                userPortfolio.holdings[strategy] = {
                    amount: amount,
                    currentValue: amount // Assuming initial value equals investment
                };
            } else {
                userPortfolio.holdings[strategy].amount += amount;
                userPortfolio.holdings[strategy].currentValue += amount;
            }
            
            // Add transaction record
            const transaction = {
                type: 'investment',
                strategy: strategy,
                amount: amount,
                date: new Date().toLocaleDateString(),
                value: amount
            };
            userPortfolio.transactions.push(transaction);
            
            // Update UI
            updatePortfolioUI();
            updateHoldingsTable(); // Add this line to update the table
        }

        // Add this function to update the portfolio UI
        function updatePortfolioUI() {
            // Update total value display
            const totalValueElement = document.getElementById('total-portfolio-value');
            if (totalValueElement) {
                totalValueElement.textContent = `$${userPortfolio.totalValue.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            }
            
            // Update holdings table if on portfolio page
            if (document.getElementById('page-portfolio')?.classList.contains('active')) {
                drawPortfolioPieChart();
                updateRecentTransactions();
                updateHoldingsTable(); // Add this line
                renderAllTransactions();
            }
        }

        // Add this function to update the holdings table
        function updateHoldingsTable() {
            const holdingsTableBody = document.getElementById('holdings-table-body');
            if (!holdingsTableBody) return;

            // Clear existing rows
            holdingsTableBody.innerHTML = '';

            // Add a row for each holding
            for (const [strategy, holding] of Object.entries(userPortfolio.holdings)) {
                const row = document.createElement('tr');
                row.className = 'hover:bg-[#101030] transition-colors duration-200';

                // Calculate current value and price
                const currentValue = holding.currentValue;
                const currentPrice = currentValue / holding.amount;
                
                row.innerHTML = `
                    <td class="py-4 px-4 font-semibold text-[#E0E0EB]">${strategy}</td>
                    <td class="py-4 px-4">${holding.amount.toFixed(4)}</td>
                    <td class="py-4 px-4">$${currentPrice.toFixed(2)}</td>
                    <td class="py-4 px-4">$${currentValue.toFixed(2)}</td>
                    <td class="py-4 px-4">
                        <button class="sell-btn px-4 py-2 rounded-lg bg-[#DC2626] text-white font-semibold hover:bg-[#EF4444] transition-colors" 
                                data-strategy="${strategy}"
                                data-amount="${holding.amount}">
                            Sell
                        </button>
                    </td>
                `;
                
                holdingsTableBody.appendChild(row);
            }

            // If no holdings, show a message
            if (Object.keys(userPortfolio.holdings).length === 0) {
                const emptyRow = document.createElement('tr');
                emptyRow.innerHTML = `
                    <td colspan="5" class="py-8 text-center text-[#A0A0B0]">
                        No holdings yet. Invest in a strategy to see your portfolio here.
                    </td>
                `;
                holdingsTableBody.appendChild(emptyRow);
            }

            // Add event listeners to all sell buttons
            document.querySelectorAll('.sell-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const strategy = e.target.dataset.strategy;
                    const amount = parseFloat(e.target.dataset.amount);
                    sellInvestment(strategy, amount);
                });
            });
        }


        // Add this new function to handle selling investments
        function sellInvestment(strategy) {
            if (!userPortfolio.holdings[strategy]) {
                console.error(`No holdings found for strategy: ${strategy}`);
                return;
            }

            // Get the current value of the investment
            const amount = userPortfolio.holdings[strategy].currentValue;

            // Create and show custom confirmation dialog
            const dialog = document.createElement('div');
            dialog.className = 'confirmation-dialog';
            dialog.innerHTML = `
                <div class="dialog-content">
                    <p>Are you sure you want to sell your ${strategy} investment for $${amount.toLocaleString()}?</p>
                    <div class="dialog-buttons">
                        <button id="confirm-sell">Yes, Sell</button>
                        <button id="cancel-sell">Cancel</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(dialog);
            
            const style = document.createElement('style');
            style.textContent = `
                .confirmation-dialog {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-color: rgba(0,0,0,0.5);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 1000;
                }
                .dialog-content {
                    background: #1a237e; /* Dark blue background */
                    color: white; /* White text for contrast */
                    padding: 20px;
                    border-radius: 8px;
                    max-width: 400px;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                }
                .dialog-buttons {
                    display: flex;
                    justify-content: flex-end;
                    margin-top: 20px;
                    gap: 10px;
                }
                .dialog-buttons button {
                    padding: 8px 16px;
                    border: none;
                    border-radius: 4px;
                    cursor: pointer;
                }
                #confirm-sell {
                    background-color: #ff4444;
                    color: white;
                }
                #cancel-sell {
                    background-color: #f0f0f0;
                    color: #333; /* Dark text for light button */
                }
            `;
            document.head.appendChild(style);

            // Event listeners remain the same
            document.getElementById('confirm-sell').addEventListener('click', () => {
                userPortfolio.totalValue -= amount;
                delete userPortfolio.holdings[strategy];

                const transaction = {
                    type: 'sale',
                    strategy: strategy,
                    amount: amount,
                    date: new Date().toLocaleDateString(),
                    value: amount
                };
                userPortfolio.transactions.unshift(transaction);

                updatePortfolioUI();
                showTradeNotification(`Sold $${amount.toLocaleString()} of ${strategy}`);
                
                document.body.removeChild(dialog);
                document.head.removeChild(style);
            });

            document.getElementById('cancel-sell').addEventListener('click', () => {
                document.body.removeChild(dialog);
                document.head.removeChild(style);
            });
        }
        

        // Function to show either login or signup tab on the auth page
        function showAuthTab(tab) {
            const signupForm = document.getElementById('signup-form');
            const loginForm = document.getElementById('login-form');
            const tabSignup = document.getElementById('tab-signup');
            const tabLogin = document.getElementById('tab-login');

            // Reset active state for tabs
            tabSignup.classList.remove('active');
            tabLogin.classList.remove('active');

            if (tab === 'login') {
                signupForm.classList.add('hidden');
                loginForm.classList.remove('hidden');
                tabLogin.classList.add('active');
            } else { // Default to signup
                signupForm.classList.remove('hidden');
                loginForm.classList.add('hidden');
                tabSignup.classList.add('active');
            }
        }

        // AI Assistant functionality
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');

        // In-memory chat history
        let inMemoryChatHistory = [];

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Modified sendMessage to accept optional messageText
        async function sendMessage(messageText) {
            console.log("sendMessage called. MessageText received:", messageText);

            // Determine message to send
            let messageToSend;
            if (messageText === undefined || messageText.trim() === '') {
                messageToSend = userInput.value.trim();
                console.log("sendMessage: Falling back to userInput.value:", messageToSend);
                if (messageToSend === '') {
                    console.log("Empty message, returning.");
                    return;
                }
            } else {
                messageToSend = messageText;
            }

            // Add user message to chat display and in-memory history
            appendMessage(messageToSend, 'user');
            userInput.value = ''; // Clear input after sending

            // Show loading dots
            const loadingDots = appendLoadingDots();

            try {
                // Prepare chat history for the API call directly from inMemoryChatHistory
                const payload = { contents: inMemoryChatHistory };
                const apiKey = ""; // Canvas will automatically provide the API key
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                console.log("Sending request to API:", apiUrl, "with payload:", payload);

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                console.log("API response received. Status:", response.status);
                const result = await response.json();
                console.log("API response JSON:", result);

                // Remove loading dots
                loadingDots.remove();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const botResponse = result.candidates[0].content.parts[0].text;
                    console.log("Bot response received:", botResponse);
                    // Add bot response to chat display and in-memory history
                    appendMessage(botResponse, 'bot');
                } else {
                    appendMessage("Sorry, I couldn't get a response. Please try again.", 'bot');
                    console.error("Unexpected API response structure or empty content:", result);
                }
            } catch (error) {
                // Remove loading dots on error
                loadingDots.remove();
                appendMessage("An error occurred while fetching the response. Please try again later.", 'bot');
                console.error("Error calling Gemini API:", error);
            }
        }

        function appendMessage(text, sender) {
            console.log(`appendMessage called: sender=${sender}, text=${text}`);
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('flex', sender === 'user' ? 'justify-end' : 'justify-start');

            const messageBubble = document.createElement('div');
            messageBubble.classList.add('p-4', 'rounded-lg', 'max-w-[80%]', sender === 'user' ? 'message-user' : 'message-bot', 'message-bubble');
            
            // Store the raw text in the in-memory history
            inMemoryChatHistory.push({ role: sender === 'user' ? 'user' : 'model', parts: [{ text: text }] });
            console.log("inMemoryChatHistory after append:", inMemoryChatHistory);

            // Split the text into paragraphs by double newline
            let paragraphs = text.split('\n\n');

            // Process each paragraph: replace markdown bolding and wrap in <p> tags
            let formattedParagraphs = paragraphs.map(p => {
                // Replace **word** with <strong>word</strong> for bolding
                let boldedText = p.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                return `<p>${boldedText}</p>`;
            });

            // Join the formatted paragraphs directly. The CSS will handle the spacing.
            let finalHtml = formattedParagraphs.join('');

            // Set innerHTML because we are inserting HTML tags
            messageBubble.innerHTML = finalHtml;

            messageDiv.appendChild(messageBubble);
            chatMessages.appendChild(messageDiv); // Append the messageDiv, not just the bubble
            chatMessages.scrollTop = chatMessages.scrollHeight;
            console.log("Message appended to DOM and scrolled.");
        }

        function appendLoadingDots() {
            console.log("appendLoadingDots called.");
            const loadingDiv = document.createElement('div');
            loadingDiv.classList.add('flex', 'justify-start');
            loadingDiv.innerHTML = `
                <div class="message-bot p-4 rounded-lg flex items-center loading-message">
                    <div class="loading-dots">
                        <span></span><span></span><span></span>
                    </div>
                </div>
            `;
            chatMessages.appendChild(loadingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            return loadingDiv; // Return the element so it can be removed later
        }

        // sendPredefinedQuestion now explicitly sets userInput.value and then calls sendMessage
        function sendPredefinedQuestion(question) {
            console.log("Predefined question clicked:", question); // Debug log
            userInput.value = question; // Set the input field value for visual feedback
            sendMessage(question); // Call sendMessage, explicitly passing the question
        }


        // Fear and Greed Index Gauge Logic (Insights Page)
        // Fear and Greed Index Gauge Logic (Insights Page)
        function updateFearGreedGauge(value, gaugeNumber = 1) {
            const needle = document.getElementById(`sentiment-needle${gaugeNumber > 1 ? '-' + gaugeNumber : ''}`);
            const sentimentValueText = document.getElementById(`current-sentiment-value${gaugeNumber > 1 ? '-' + gaugeNumber : ''}`);
            const sentimentLabelText = document.getElementById(`current-sentiment-label${gaugeNumber > 1 ? '-' + gaugeNumber : ''}`);

            if (!needle || !sentimentValueText || !sentimentLabelText) {
                console.warn("Fear & Greed Index elements not found. Skipping gauge update.");
                return;
            }

            // Map value (0-100) to rotation (0 to 180 degrees)
            // -90deg is for 0 value (Extreme Fear), +90deg is for 100 value (Extreme Greed)
            const rotation = (value / 100) * 180 - 90;
            needle.style.transform = `translateX(-50%) rotate(${rotation}deg)`;

            sentimentValueText.textContent = value;

            let sentimentLabel = '';
            let sentimentColor = '';
            if (value >= 0 && value <= 20) {
                sentimentLabel = 'Extreme Fear';
                sentimentColor = '#DC2626'; // Crimson Red
            } else if (value > 20 && value <= 40) {
                sentimentLabel = 'Fear';
                sentimentColor = '#FF4500'; // Orange Red
            } else if (value > 40 && value <= 60) {
                sentimentLabel = 'Neutral';
                sentimentColor = '#FFD700'; // Gold
            } else if (value > 60 && value <= 80) {
                sentimentLabel = 'Greed';
                sentimentColor = '#ADFF2F'; // Green Yellow
            } else if (value > 80 && value <= 100) {
                sentimentLabel = 'Extreme Greed';
                sentimentColor = '#39FF14'; // Neon Green
            }
            sentimentLabelText.textContent = sentimentLabel;
            sentimentValueText.style.color = sentimentColor;
            sentimentLabelText.style.color = sentimentColor;
        }

        // Function to fetch and set Fear & Greed Index data from Firestore
        async function fetchFearGreedIndex() {
            const sevenDayAverageElement = document.getElementById('seven-day-average');
            if (!sevenDayAverageElement || !db) {
                console.warn("Fear & Greed Index elements or Firestore not ready. Skipping fetch.");
                return;
            }

            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            const docRef = doc(db, `artifacts/${appId}/public/data/fearGreedIndex/current`);

            try {
                const docSnap = await getDoc(docRef);

                let currentValue;
                if (docSnap.exists()) {
                    currentValue = docSnap.data().value;
                    console.log("Fear & Greed Index loaded from Firestore:", currentValue);
                } else {
                    // If no value exists, set it to 71 and save it
                    currentValue = 71;
                    await setDoc(docRef, { value: currentValue });
                    console.log("Fear & Greed Index initialized to 71 and saved to Firestore.");
                }

                updateFearGreedGauge(currentValue);

                // Updated the text content to "Last 7-day average "
                sevenDayAverageElement.textContent = `Last 7-day average `;

            } catch (error) {
                console.error("Error fetching or setting Fear & Greed Index from Firestore:", error);
                // Fallback to a default or random value if Firestore fails
                sevenDayAverageElement.textContent = `Last 7-day average `; // Updated label from fallback
                updateFearGreedGauge(50); // Default to Neutral if error
            }
        }

        function getSentimentLabel(value) {
            if (value >= 0 && value <= 20) return 'Extreme Fear';
            if (value > 20 && value <= 40) return 'Fear';
            if (value > 40 && value <= 60) return 'Neutral';
            if (value > 60 && value <= 80) return 'Greed';
            if (value > 80 && value <= 100) return 'Extreme Greed';
            return '';
        }

        // A simple observer to run fetchFearGreedIndex when the insights page becomes visible
        const insightsPage = document.getElementById('page-insights');
        if (insightsPage) {
            const observer = new MutationObserver((mutatorsList) => {
                for (const mutation of mutatorsList) {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                        if (insightsPage.classList.contains('active')) {
                            console.log("[Observer] Insights page became active. Initiating data fetch.");
                            // Ensure Firebase is initialized before fetching
                            if (db) {
                                fetchFearGreedIndex();
                                currentNewsDisplayed = 0; // Reset news count
                                loadMoreNews(true); // Load initial news articles
                            } else {
                                // Wait for Firebase to be initialized if not ready
                                const checkFirebaseInterval = setInterval(() => {
                                    if (db) {
                                        fetchFearGreedIndex();
                                        currentNewsDisplayed = 0;
                                        loadMoreNews(true);
                                        clearInterval(checkFirebaseInterval);
                                        console.log("[Observer] Firebase ready, Insights data fetched.");
                                    }
                                }, 100);
                            }
                        }
                    }
                }
            });
            observer.observe(insightsPage, { attributes: true });
        }


        // Strategies Page Data and Logic
        const allStrategies = [
            {
                title: "Long-Term HODL",
                description: "A classic strategy focused on holding major cryptocurrencies like Bitcoin and Ethereum for extended periods, riding out market volatility for long-term capital appreciation.",
                investmentGoal: "capital-growth",
                riskTolerance: "Low",
                timeHorizon: "long-term",
                assetClasses: ["BTC", "ETH"],
                expectedReturn: "High",
                volatility: "Medium"
            },
            {
                title: "DeFi Yield Farming",
                description: "Maximize returns by providing liquidity to decentralized finance (DeFi) protocols, earning interest and governance tokens. Higher risk, higher reward.",
                investmentGoal: "passive-income",
                riskTolerance: "High",
                timeHorizon: "short-term",
                assetClasses: ["Altcoins"],
                expectedReturn: "Very High",
                volatility: "Very High"
            },
            {
                title: "Venture Vulture",
                description: "This aggressive strategy involves actively chasing the highest return cryptocurrencies, often new and highly volatile assets, for rapid capital growth. It requires constant monitoring and carries extreme risk.",
                investmentGoal: "capital-growth",
                riskTolerance: "High",
                timeHorizon: "short-term",
                assetClasses: ["Altcoins"],
                expectedReturn: "Extremely High",
                volatility: "Extreme"
            },
            {
                title: "Diversified Crypto Portfolio",
                description: "Spread your investment across a basket of top cryptocurrencies to mitigate risk and capture broad market growth.",
                investmentGoal: "diversification",
                riskTolerance: "Medium",
                timeHorizon: "long-term",
                assetClasses: ["BTC", "ETH", "Altcoins"],
                expectedReturn: "Medium-High",
                volatility: "Medium"
            },
            {
                title: "Balanced Risk-Adjusted Returns",
                description: "This strategy employs mean-variance optimization to construct a portfolio that maximizes expected returns for a given level of risk, or minimizes risk for a given level of expected return. It aims for a balanced approach, suitable for investors seeking consistent growth without excessive volatility.",
                investmentGoal: "capital-growth",
                riskTolerance: "Low",
                timeHorizon: "medium-term",
                assetClasses: ["BTC", "ETH", "Altcoins"],
                expectedReturn: "Medium",
                volatility: "Low"
            },
            {
                title: "Reduced Volatility",
                description: "This strategy focuses on constructing a portfolio with the lowest possible variance, aiming to minimize overall volatility. It is suitable for risk-averse investors who prioritize capital preservation over high returns, seeking stable growth even in fluctuating markets.",
                investmentGoal: "diversification",
                riskTolerance: "Low",
                timeHorizon: "medium-term",
                assetClasses: ["Altcoins"],
                expectedReturn: "Low-Medium",
                volatility: "Very Low"
            },
            {
                title: "Long-Short Equity (Crypto)",
                description: "A market-neutral strategy involving simultaneously buying undervalued and short-selling overvalued cryptocurrencies to profit from relative price movements.",
                investmentGoal: "capital-growth",
                riskTolerance: "Medium",
                timeHorizon: "medium-term",
                assetClasses: ["BTC", "ETH", "Altcoins"],
                expectedReturn: "Medium",
                volatility: "Medium"
            },
            {
                title: "Automated Grid Trading",
                description: "Utilize bots to place a series of buy and sell orders at predetermined intervals around a set price, profiting from market fluctuations within a range.",
                investmentGoal: "passive-income",
                riskTolerance: "Medium",
                timeHorizon: "short-term",
                assetClasses: ["Altcoins"],
                expectedReturn: "Medium",
                volatility: "Low-Medium"
            },
            {
                title: "Quantitative Momentum",
                description: "This strategy identifies cryptocurrencies with strong recent price performance and invests in them, aiming to capitalize on continuation of trends. It involves systematic analysis of price and volume data to pinpoint assets exhibiting positive momentum, while avoiding Stablecoins or NFTs.",
                investmentGoal: "capital-growth",
                riskTolerance: "High",
                timeHorizon: "short-term",
                assetClasses: ["BTC", "ETH", "Altcoins"],
                expectedReturn: "Very High",
                volatility: "Very High"
            },
            {
                title: "Liquidity Exposure",
                description: "This strategy aims to capture the illiquidity risk premium by investing in less liquid cryptocurrencies. These assets may offer higher potential returns as compensation for their reduced ease of buying and selling. It requires a longer time horizon and a higher risk tolerance, as price discovery can be slower and volatility more pronounced due to lower trading volumes. This strategy focuses solely on non-stablecoin and non-NFT crypto assets.",
                investmentGoal: "capital-growth",
                riskTolerance: "High",
                timeHorizon: "long-term",
                assetClasses: ["BTC", "ETH", "Altcoins"],
                expectedReturn: "High",
                volatility: "High"
            },
            {
                title: "Volatility Trading",
                description: "This strategy focuses on profiting from significant price swings in highly volatile cryptocurrencies, regardless of market direction. It often involves using derivatives like options or futures, or employing short-term trading techniques to capitalize on rapid price movements. This approach carries substantial risk and requires active management.",
                investmentGoal: "capital-growth",
                riskTolerance: "High",
                timeHorizon: "short-term",
                assetClasses: ["BTC", "ETH", "Altcoins"],
                expectedReturn: "Very High",
                volatility: "Extreme"
            },
            {
                title: "Volume Shock",
                description: "This strategy identifies cryptocurrencies experiencing sudden, significant increases in trading volume, often indicative of upcoming price movements. It aims to capitalize on these 'shocks' by entering positions early, focusing on high-liquidity assets.",
                investmentGoal: "capital-growth",
                riskTolerance: "Medium", // Changed from High to Medium
                timeHorizon: "short-term",
                assetClasses: ["BTC", "ETH", "Altcoins"],
                expectedReturn: "Very High",
                volatility: "Medium" // Changed from High to Medium
            },
            {
                title: "Reversal Indicator",
                description: "This strategy uses technical analysis indicators to spot potential reversals in price trends, aiming to buy at the bottom of a downtrend or sell at the top of an uptrend. It requires careful monitoring and quick execution.",
                investmentGoal: "capital-growth",
                riskTolerance: "Medium",
                timeHorizon: "short-term", // Changed from medium-term to short-term
                assetClasses: ["BTC", "ETH", "Altcoins"],
                expectedReturn: "High",
                volatility: "Medium"
            },
            {
                title: "Relative Strength Indicator",
                description: "This strategy leverages the Relative Strength Index (RSI) to identify overbought or oversold conditions in cryptocurrencies, signaling potential price reversals. It aims for timely entry and exit points based on momentum shifts.",
                investmentGoal: "capital-growth",
                riskTolerance: "Medium",
                timeHorizon: "short-term",
                assetClasses: ["BTC", "ETH", "Altcoins"],
                expectedReturn: "High",
                volatility: "Medium"
            },
            {
                title: "Value-at-Risk Hedge",
                description: "This strategy focuses on mitigating potential losses by using derivatives or other hedging instruments to offset downside risk in a cryptocurrency portfolio. It's designed for investors who prioritize capital preservation and risk control, aiming to limit maximum potential losses over a specified timeframe and confidence level.",
                investmentGoal: "diversification",
                riskTolerance: "Low",
                timeHorizon: "medium-term",
                assetClasses: ["BTC", "ETH", "Altcoins"],
                expectedReturn: "Medium",
                volatility: "Low"
            },
            {
                title: "Sentiment Trading",
                description: "This strategy involves analyzing market sentiment (e.g., from social media, news, and fear & greed index) to predict price movements. It aims to capitalize on collective investor emotions, buying when sentiment is overly negative (fear) and selling when it's overly positive (greed).",
                investmentGoal: "capital-growth",
                riskTolerance: "Medium", // Changed from High to Medium
                timeHorizon: "short-term",
                assetClasses: ["BTC", "ETH", "Altcoins"],
                expectedReturn: "Medium-High", // Changed from Very High to Medium-High
                volatility: "Medium" // Changed from High to Medium
            },
            {
                title: "Contrarian Investing",
                description: "This strategy involves going against prevailing market trends, buying assets when they are out of favor and selling them when they become popular. It requires a strong conviction and ability to identify undervalued assets.",
                investmentGoal: "capital-growth",
                riskTolerance: "Medium", // Changed from High to Medium
                timeHorizon: "medium-term", // Changed from long-term to medium-term
                assetClasses: ["BTC", "ETH", "Altcoins"],
                expectedReturn: "High",
                volatility: "Medium-High" // Changed from High to Medium-High
            },
            {
                title: "Event-Driven Trading",
                description: "This strategy focuses on profiting from specific events such as protocol upgrades, regulatory announcements, or significant partnerships. It involves extensive research and quick execution to capitalize on anticipated price movements before, during, and after the event.",
                investmentGoal: "capital-growth",
                riskTolerance: "High",
                timeHorizon: "short-term",
                assetClasses: ["BTC", "ETH", "Altcoins"],
                expectedReturn: "Very High",
                volatility: "High"
            },
            {
                title: "Dollar-Cost Averaging",
                description: "A long-term investment strategy where an investor divides the total amount to be invested across periodic purchases of a target asset (e.g., Bitcoin, Ethereum) in an effort to reduce the impact of volatility on the overall purchase. Purchases occur regardless of the asset's price and at regular intervals.",
                investmentGoal: "capital-growth",
                riskTolerance: "Low",
                timeHorizon: "long-term",
                assetClasses: ["BTC", "ETH"],
                expectedReturn: "Medium",
                volatility: "Low"
            }
        ];

        const strategiesContainer = document.getElementById('strategies-container');


        function renderStrategies(strategiesToRender) {
            strategiesContainer.innerHTML = ''; // Clear existing cards

            if (strategiesToRender.length === 0) {
                strategiesContainer.innerHTML = '<p class="text-center text-xl text-[#A0A0B0] col-span-full">No strategies match your selection.</p>';
                return;
            }

            strategiesToRender.forEach(strategy => {
                const strategyCard = document.createElement('div');
                strategyCard.classList.add('bg-[#101030]', 'p-6', 'rounded-xl', 'shadow-md', 'border', 'border-transparent', 'transition-all', 'duration-300', 'card-glow');

                const tagColors = {
                    "Capital Growth": "bg-[#00FFFF]",
                    "Passive Income": "bg-[#39FF14]",
                    "Diversification": "bg-[#DC2626]",
                    "Low Risk": "bg-[#39FF14]",
                    "Medium Risk": "bg-[#FFD700]",
                    "High Risk": "bg-[#DC2626]",
                    "Extreme Risk": "bg-[#DC2626]",
                    "Very Low Risk": "bg-[#39FF14]",
                    "Short-term": "bg-[#FFD700]",
                    "Medium-term": "bg-[#00FFFF]",
                    "Long-term": "bg-[#39FF14]",
                    "BTC": "bg-[#00FFFF]",
                    "ETH": "bg-[#00FFFF]",
                    "Altcoins": "bg-[#00FFFF]",
                    "Stablecoins": "bg-gray-500", // Keep for existing strategies that might have it
                    "NFTs": "bg-purple-500" // Keep for existing strategies that might have it
                };

                const getTagHtml = (tags) => tags.map(tag => {
                    const bgColorClass = tagColors[tag] || 'bg-gray-600';
                    const textColorClass = (bgColorClass === 'bg-[#DC2626]' || bgColorClass === 'bg-gray-600') ? 'text-[#E0E0EB]' : 'text-[#0D0D33]';
                    return `<span class="strategy-filter-button ${bgColorClass} ${textColorClass} px-3 py-1 text-sm">${tag}</span>`;
                }).join('');

                // Combine all relevant tags for display
                const displayedTags = [];
                if (strategy.investmentGoal) {
                    const formattedGoal = strategy.investmentGoal.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
                    displayedTags.push(formattedGoal);
                }
                if (strategy.riskTolerance) displayedTags.push(`${strategy.riskTolerance} Risk`);
                if (strategy.timeHorizon) {
                    const formattedHorizon = strategy.timeHorizon.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
                    displayedTags.push(formattedHorizon);
                }
                if (strategy.assetClasses && strategy.assetClasses.length > 0) {
                    displayedTags.push(...strategy.assetClasses);
                }


                strategyCard.innerHTML = `
                    <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-3">${strategy.title}</h3>
                    <p class="text-[#A0A0B0] mb-4">${strategy.description}</p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        ${getTagHtml(displayedTags)}
                    </div>
                    <div class="flex justify-between items-center text-sm text-[#A0A0B0] mb-4">
                        <span>Expected Return: <span class="text-[#39FF14]">${strategy.expectedReturn || 'N/A'}</span></span>
                        <span>Volatility: <span class="text-[#FFD700]">${strategy.volatility || 'N/A'}</span></span>
                    </div>
                    <button class="btn-crimson w-full py-2 font-semibold invest-now-btn" data-strategy="Strategy">Invest in Strategy</button>
                `;
                strategiesContainer.appendChild(strategyCard);
            });
        }

        // Update the openInvestmentModal function to use the strategy name
        function openInvestmentModal(strategyName) {
            const modal = document.getElementById('strategies-investment-modal');
            const strategyNameElement = document.getElementById('strategies-modal-strategy-name');
            const strategyInput = document.getElementById('strategies-selected-strategy');
            
            if (!modal || !strategyNameElement || !strategyInput) return;
            
            strategyNameElement.textContent = `Invest in ${strategyName}`;
            strategyInput.value = strategyName;
            modal.classList.remove('hidden');
        }

        // Update the filterStrategies function to use the strategy titles
        function filterStrategies() {
            const strategiesContainer = document.getElementById('strategies-container');
            if (!strategiesContainer) return;

            // Get filter values
            const goalFilter = document.getElementById('investment-goal').value;
            const riskFilter = document.getElementById('risk-tolerance').value;
            const horizonFilter = document.getElementById('time-horizon').value;
            const assetCheckboxes = document.querySelectorAll('input[data-asset-class="true"]:checked');
            const selectedAssets = Array.from(assetCheckboxes).map(cb => cb.value);

            // Filter strategies
            const filteredStrategies = allStrategies.filter(strategy => {
                // Check investment goal filter
                if (goalFilter && strategy.investmentGoal !== goalFilter) return false;

                // Check risk tolerance filter
                if (riskFilter && strategy.riskTolerance !== riskFilter) return false;

                // Check time horizon
                if (horizonFilter && strategy.timeHorizon !== horizonFilter) return false;
                
                // Check asset classes
                if (selectedAssets.length > 0) {
                    const hasSelectedAsset = selectedAssets.some(asset => 
                        strategy.assetClasses.includes(asset)
                    );
                    if (!hasSelectedAsset) return false;
                }
                
                return true;
            });

            // Clear existing strategies
            strategiesContainer.innerHTML = '';

            // Add filtered strategies
            if (filteredStrategies.length === 0) {
                strategiesContainer.innerHTML = `
                    <div class="col-span-1 md:col-span-2 text-center py-10">
                        <p class="text-xl text-[#A0A0B0]">No strategies match your current filters.</p>
                        <button id="reset-filters-btn" class="btn-outline px-6 py-2 mt-4 font-semibold">Reset Filters</button>
                    </div>
                `;
                
                document.getElementById('reset-filters-btn')?.addEventListener('click', () => {
                    document.getElementById('investment-goal').value = '';
                    document.getElementById('risk-tolerance').value = '';
                    document.getElementById('time-horizon').value = '';
                    document.querySelectorAll('input[data-asset-class="true"]').forEach(cb => cb.checked = false);
                    filterStrategies();
                });
                return;
            }

            filteredStrategies.forEach(strategy => {
                const strategyCard = document.createElement('div');
                strategyCard.className = 'bg-[#101030] p-6 rounded-lg border border-[#303060] transition-all duration-300 hover:border-[#00FFFF] hover:shadow-lg hover:shadow-[#00FFFF]/20';
                strategyCard.innerHTML = `
                    <h3 class="text-2xl font-bold text-[#E0E0EB] mb-2">${strategy.title}</h3>
                    <p class="text-[#A0A0B0] mb-4">${strategy.description}</p>
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div>
                            <p class="text-sm text-[#A0A0B0]">Risk Tolerance</p>
                            <p class="font-semibold ${getRiskColorClass(strategy.riskTolerance)}">${strategy.riskTolerance}</p>
                        </div>
                        <div>
                            <p class="text-sm text-[#A0A0B0]">Time Horizon</p>
                            <p class="font-semibold text-[#00FFFF]">${formatTimeHorizon(strategy.timeHorizon)}</p>
                        </div>
                        <div>
                            <p class="text-sm text-[#A0A0B0]">Expected Return</p>
                            <p class="font-semibold ${getReturnColorClass(strategy.expectedReturn)}">${strategy.expectedReturn}</p>
                        </div>
                        <div>
                            <p class="text-sm text-[#A0A0B0]">Volatility</p>
                            <p class="font-semibold ${getVolatilityColorClass(strategy.volatility)}">${strategy.volatility}</p>
                        </div>
                    </div>
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-sm text-[#A0A0B0]">Asset Classes</p>
                            <p class="font-medium text-[#E0E0EB]">${strategy.assetClasses.join(', ')}</p>
                        </div>
                        <button class="invest-now-btn px-4 py-2 rounded-lg bg-[#00FFFF] text-[#0D0D33] font-semibold hover:bg-[#39FF14] transition-colors" 
                                data-strategy="${strategy.title}">
                            Invest Now
                        </button>
                    </div>
                `;
                strategiesContainer.appendChild(strategyCard);
            });

            // Add event listeners to all invest buttons
            document.querySelectorAll('.invest-now-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const strategyName = e.target.dataset.strategy;
                    openInvestmentModal(strategyName);
                });
            });
        }
        

        // Helper functions for strategy display
        function getRiskLevel(riskText) {
            if (riskText.includes('Extreme') || riskText.includes('High')) return 'High';
            if (riskText.includes('Medium')) return 'Medium';
            return 'Low';
        }

        function getRiskColorClass(risk) {
            if (risk.includes('Extreme') || risk.includes('High')) return 'text-[#DC2626]';
            if (risk.includes('Medium')) return 'text-[#FFD700]';
            return 'text-[#39FF14]';
        }

        function getReturnColorClass(returnLevel) {
            if (returnLevel.includes('Extremely') || returnLevel.includes('Very High')) return 'text-[#39FF14]';
            if (returnLevel.includes('High') || returnLevel.includes('Medium-High')) return 'text-[#00FFFF]';
            if (returnLevel.includes('Medium')) return 'text-[#FFD700]';
            return 'text-[#A0A0B0]';
        }

        function getVolatilityColorClass(volatility) {
            if (volatility.includes('Extreme') || volatility.includes('Very High')) return 'text-[#DC2626]';
            if (volatility.includes('High') || volatility.includes('Medium-High')) return 'text-[#FFD700]';
            if (volatility.includes('Medium')) return 'text-[#00FFFF]';
            return 'text-[#39FF14]';
        }

        function formatTimeHorizon(horizon) {
            if (horizon === 'short-term') return 'Short-term (0-1 year)';
            if (horizon === 'medium-term') return 'Medium-term (1-3 years)';
            return 'Long-term (3+ years)';
        }

        


        // Learn Page Guides Data and Logic
        const allGuides = [
            {
                title: "Understanding Blockchain Technology",
                description: "A foundational guide to the distributed ledger technology that powers cryptocurrencies.",
                categories: ["Basics"],
                readingTime: "15 min"
            },
            {
                title: "Crypto Trading Strategies for Beginners",
                description: "Learn about common trading approaches like dollar-cost averaging, swing trading, and more.",
                categories: ["Trading", "Basics"],
                readingTime: "20 min"
            },
            {
                title: "DeFi Explained: Decentralized Finance Ecosystem",
                description: "Dive into the world of DeFi, including lending, borrowing, and decentralized exchanges.",
                categories: ["DeFi"],
                readingTime: "25 min"
            },
            {
                title: "Securing Your Crypto Assets: Best Practices",
                description: "Essential tips and tools to protect your cryptocurrencies from hacks and scams.",
                categories: ["Security", "Basics"],
                readingTime: "18 min"
            },
            {
                title: "NFTs for Artists and Collectors",
                description: "A comprehensive overview of non-fungible tokens, their creation, marketplaces, and value.",
                categories: ["NFTs"],
                readingTime: "22 min"
            },
            {
                title: "Advanced Technical Analysis in Crypto",
                description: "Explore complex charting patterns, indicators, and strategies for advanced crypto traders.",
                categories: ["Trading"],
                readingTime: "30 min"
            },
            {
                title: "Introduction to Cryptocurrency Investing",
                description: "Start your crypto journey: understanding digital assets and their investment potential.",
                categories: ["Basics", "Investing"],
                readingTime: "12 min"
            },
            {
                title: "How to Choose Your First Cryptocurrency",
                description: "A guide to researching and selecting the right digital asset for your initial investment.",
                categories: ["Basics", "Investing"],
                readingTime: "10 min"
            },
            {
                title: "Understanding Crypto Wallets: Hot vs. Cold Storage",
                description: "Learn the differences between online (hot) and offline (cold) wallets and which is best for you.",
                categories: ["Security", "Basics"],
                readingTime: "17 min"
            },
            {
                title: "The Basics of Decentralized Exchanges (DEXs)",
                description: "Explore how DEXs work and their role in the decentralized finance landscape.",
                categories: ["DeFi", "Basics"],
                readingTime: "14 min"
            },
            {
                title: "Risk Management in Crypto Trading",
                description: "Strategies to minimize potential losses and protect your capital in volatile crypto markets.",
                categories: ["Trading", "Investing"],
                readingTime: "28 min"
            },
            {
                title: "Understanding Staking and Yield Generation",
                description: "Earn passive income by locking up your crypto assets in staking and yield farming protocols.",
                categories: ["DeFi", "Investing"],
                readingTime: "23 min"
            },
            {
                title: "NFT Marketplaces: A Buyer's Guide",
                description: "Navigate the top NFT marketplaces to buy, sell, and discover unique digital collectibles.",
                categories: ["NFTs", "Trading"],
                readingTime: "19 min"
            },
            {
                title: "Common Crypto Scams and How to Avoid Them",
                description: "Protect yourself from phishing, rug pulls, and other prevalent scams in the crypto space.",
                categories: ["Security"],
                readingTime: "16 min"
            },
            {
                title: "Introduction to Web3 and the Metaverse",
                description: "Discover the next evolution of the internet and its intersection with blockchain and NFTs.",
                categories: ["Basics", "NFTs"],
                readingTime: "21 min"
            },
            {
                title: "Algorithmic Trading for Cryptocurrencies",
                description: "Automate your trading strategies using bots and advanced algorithms.",
                categories: ["Trading"],
                readingTime: "35 min"
            },
            {
                title: "Understanding Stablecoins and Their Use Cases",
                description: "Learn about cryptocurrencies pegged to stable assets like fiat currency or gold.",
                categories: ["Basics", "Investing"],
                readingTime: "13 min"
            },
            {
                title: "Introduction to Crypto Lending and Borrowing",
                description: "How to lend your crypto to earn interest or borrow against your assets.",
                categories: ["DeFi", "Investing"],
                readingTime: "20 min"
            },
            {
                title: "On-Chain Analysis for Crypto Investors",
                description: "Using blockchain data to gain insights into market trends and investor behavior.",
                categories: ["Trading", "Investing"],
                readingTime: "27 min"
            },
            {
                title: "The Future of NFTs Beyond Art",
                description: "Exploring the utility of NFTs in gaming, real estate, identity, and more.",
                categories: ["NFTs"],
                readingTime: "24 min"
            },
            {
                title: "Protecting Your Digital Identity in Web3",
                description: "Best practices for maintaining privacy and security in decentralized environments.",
                categories: ["Security"],
                readingTime: "18 min"
            },
            {
                title: "Understanding Crypto Taxes: A Global Overview",
                description: "Navigating the complexities of cryptocurrency taxation in different jurisdictions.",
                categories: ["Investing"],
                readingTime: "30 min"
            },
            {
                title: "Decentralized Autonomous Organizations (DAOs) Explained",
                description: "Learn about DAOs, their structure, and how they are changing governance in crypto.",
                categories: ["DeFi", "Basics"],
                readingTime: "20 min"
            },
            {
                title: "Scalability Solutions for Blockchains (Layer 2s)",
                description: "Understanding how technologies like rollups and sidechains improve blockchain performance.",
                categories: ["Basics"],
                readingTime: "22 min"
            },
            {
                title: "Swing Trading Strategies for Short-Term Gains",
                description: "Techniques for profiting from price swings in volatile crypto markets.",
                categories: ["Trading"],
                readingTime: "26 min"
            },
            {
                title: "Investing in Metaverse Land and Virtual Assets",
                description: "A guide to acquiring and managing digital real estate and other assets in virtual worlds.",
                categories: ["Investing", "NFTs"],
                readingTime: "25 min"
            },
            {
                title: "Custodial vs. Non-Custodial Wallets: What's the Difference?",
                description: "Detailed comparison to help you choose the right wallet for your crypto holdings.",
                categories: ["Security", "Basics"],
                readingTime: "15 min"
            },
            {
                title: "Introduction to GameFi: Play-to-Earn Gaming",
                description: "Discover how blockchain gaming allows players to earn cryptocurrency and NFTs.",
                categories: ["NFTs", "DeFi"],
                readingTime: "17 min"
            },
            {
                title: "Macroeconomic Factors Affecting Crypto Prices",
                description: "How global economic trends and policies influence the cryptocurrency market.",
                categories: ["Investing"],
                readingTime: "28 min"
            },
            {
                title: "Building a Diversified Crypto Portfolio",
                description: "Strategies for spreading your investments across various cryptocurrencies to reduce risk.",
                categories: ["Investing"],
                readingTime: "20 min"
            },
            {
                title: "Understanding Liquidity Pools and Impermanent Loss",
                description: "Key concepts for participating in decentralized finance liquidity provision.",
                categories: ["DeFi", "Trading"],
                readingTime: "24 min"
            },
            {
                title: "The Role of Oracles in Decentralized Applications",
                description: "How external data is brought onto the blockchain for smart contracts.",
                categories: ["DeFi", "Basics"],
                readingTime: "16 min"
            },
            {
                title: "Psychology of Trading: Mastering Your Emotions",
                description: "Tips for controlling fear and greed to make rational trading decisions.",
                categories: ["Trading"],
                readingTime: "20 min"
            },
            {
                title: "Hardware Wallet Setup and Best Practices",
                description: "A step-by-step guide to setting up and securely using a hardware wallet.",
                categories: ["Security"],
                readingTime: "19 min"
            },
            {
                title: "Exploring Cross-Chain Bridges and Interoperability",
                description: "How different blockchains communicate and transfer assets between each other.",
                categories: ["Basics"],
                readingTime: "21 min"
            },
            {
                title: "Evaluating Crypto Projects: A Due Diligence Checklist",
                description: "Key factors to consider before investing in a new cryptocurrency project.",
                categories: ["Investing"],
                readingTime: "30 min"
            }
        ];

        let filteredGuides = [...allGuides]; // Array to hold currently filtered guides
        const guidesPerPage = 6;
        let currentGuidesDisplayed = 0;

        const learningGuidesContainer = document.getElementById('learning-guides-container');
        const loadMoreGuidesBtn = document.getElementById('load-more-guides-btn');
        let categoryFilterButtons; // Will be assigned in DOMContentLoaded

        // Function to render guide cards
        function renderGuides(guidesToRender, clearExisting = true) {
            if (clearExisting) {
                learningGuidesContainer.innerHTML = ''; // Clear existing cards
            }

            guidesToRender.forEach(guide => {
                const guideCard = document.createElement('div');
                guideCard.classList.add('guide-card', 'p-8', 'shadow-lg', 'transition-all', 'duration-300');

                const tagColors = {
                    "Basics": "bg-[#00FFFF]",
                    "Trading": "bg-[#39FF14]",
                    "DeFi": "bg-[#DC2626]",
                    "NFTs": "bg-[#FFD700]",
                    "Security": "bg-[#ADFF2F]",
                    "Investing": "bg-[#00FFFF]"
                };

                const categoryTags = guide.categories.map(category => {
                    const bgColorClass = tagColors[category] || 'bg-gray-600'; // Default if no specific color
                    const textColorClass = (bgColorClass === 'bg-[#DC2626]') ? 'text-E0E0EB' : 'text-0D0D33';
                    return `<span class="${bgColorClass} ${textColorClass} text-xs font-semibold px-2.5 py-0.5 rounded-full">${category}</span>`;
                }).join('');

                guideCard.innerHTML = `
                    <h3 class="text-2xl font-semibold text-[#E0E0EB] mb-3">${guide.title}</h3>
                    <p class="text-[#A0A0B0] mb-4">${guide.description}</p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        ${categoryTags}
                    </div>
                    <div class="flex justify-between items-center text-sm text-[#A0A0B0]">
                        <span>Reading Time: ${guide.readingTime}</span>
                        <button class="btn-crimson px-4 py-1.5 text-sm font-semibold">Read Guide</button>
                    </div>
                `;
                learningGuidesContainer.appendChild(guideCard);
            });
        }

        // Function to load more guides
        function loadMoreGuides() {
            const nextStartIndex = currentGuidesDisplayed;
            const nextEndIndex = Math.min(currentGuidesDisplayed + guidesPerPage, filteredGuides.length);

            const guidesToLoad = filteredGuides.slice(nextStartIndex, nextEndIndex);
            renderGuides(guidesToLoad, false); // Append, don't clear

            currentGuidesDisplayed = nextEndIndex;

            // Hide button if all guides are displayed
            if (currentGuidesDisplayed >= filteredGuides.length) {
                loadMoreGuidesBtn.classList.add('hidden');
            } else {
                loadMoreGuidesBtn.classList.remove('hidden');
            }
        }

        // Function to filter guides by category
        function filterGuides(category, clickedButton) {
            // Update active button styling
            categoryFilterButtons.forEach(btn => btn.classList.remove('active'));
            if (clickedButton) { // clickedButton might be null if called from observer
                clickedButton.classList.add('active');
            } else { // If called from observer, find the 'All' button and activate it
                const allButton = document.querySelector('#category-filters [data-category="All"]');
                if (allButton) allButton.classList.add('active');
            }


            if (category === 'All') {
                filteredGuides = [...allGuides];
            } else {
                filteredGuides = allGuides.filter(guide => guide.categories.includes(category));
            }

            // Sort filtered guides to ensure consistent loading order
            filteredGuides.sort((a, b) => a.title.localeCompare(b.title));

            currentGuidesDisplayed = 0; // Reset count for new filter
            renderGuides(filteredGuides.slice(0, guidesPerPage), true); // Render first batch of filtered guides

            // Show/hide load more button based on filtered results
            if (filteredGuides.length > guidesPerPage) {
                loadMoreGuidesBtn.classList.remove('hidden');
            } else {
                loadMoreGuidesBtn.classList.add('hidden'); // Ensure it's visible if there are more
            }
        }


        // News Articles Data and Logic (Insights Page)
        const allNewsArticles = [
            {
                title: "Bitcoin Halving: What Investors Need to Know",
                description: "The upcoming Bitcoin halving event is set to reduce the supply of new BTC, potentially impacting its price. Experts weigh in on the implications.",
                categories: ["Bitcoin", "Analysis"],
                date: "May 22, 2025"
            },
            {
                title: "Ethereum's Dencun Upgrade: A Game Changer for DeFi?",
                description: "The Dencun upgrade aims to significantly lower transaction fees on Ethereum, which could boost the adoption and profitability of DeFi applications.",
                categories: ["Ethereum", "DeFi"],
                date: "May 20, 2025"
            },
            {
                title: "NFT Market Trends: Is the Hype Sustainable?",
                description: "A deep dive into the current state of the NFT market, exploring recent sales, emerging trends, and the long-term viability of digital collectibles.",
                categories: ["NFTs", "Market Report"],
                date: "May 18, 2025"
            },
            {
                title: "Solana's Ecosystem Growth: A Threat to Ethereum?",
                description: "Solana continues to attract developers and users with its high throughput and low fees, posing a significant challenge to Ethereum's dominance.",
                categories: ["Solana", "Analysis"],
                date: "May 15, 2025"
            },
            {
                title: "The Rise of AI in Crypto Trading: A New Frontier",
                description: "Artificial intelligence is increasingly being integrated into crypto trading bots and analytical tools, offering new opportunities for investors.",
                categories: ["AI", "Trading"],
                date: "May 12, 2025"
            },
            {
                title: "Central Bank Digital Currencies (CBDCs): Impact on Crypto",
                description: "Governments worldwide are exploring CBDCs, raising questions about their potential effects on decentralized cryptocurrencies.",
                categories: ["Regulation", "CBDC"],
                date: "May 10, 2025"
            },
            {
                title: "Layer-2 Solutions: Scaling Ethereum for Mass Adoption",
                description: "An in-depth look at various Layer-2 technologies like rollups and sidechains designed to improve Ethereum's scalability and reduce gas fees.",
                categories: ["Ethereum", "Technology"],
                date: "May 8, 2025"
            },
            {
                title: "Web3 Gaming: The Future of Entertainment and Ownership",
                description: "Play-to-earn models and NFT integration are revolutionizing the gaming industry, giving players true ownership of in-game assets.",
                categories: ["Web3", "Gaming", "NFTs"],
                date: "May 5, 2025"
            },
            {
                title: "Decentralized Autonomous Organizations (DAOs): Governance Revolution",
                description: "DAOs are reshaping how projects are managed in the crypto space, offering community-led decision-making and transparency.",
                categories: ["DeFi", "Governance"],
                date: "May 3, 2025"
            },
            {
                title: "The Growing Importance of Crypto Security Audits",
                description: "With increasing hacks, security audits for smart contracts and blockchain protocols are becoming crucial for investor protection.",
                categories: ["Security", "Technology"],
                date: "April 30, 2025"
            },
            {
                title: "Institutional Adoption of Bitcoin: A Turning Point?",
                description: "Major financial institutions are increasingly adding Bitcoin to their balance sheets, signaling a shift in mainstream acceptance.",
                categories: ["Bitcoin", "Investing"],
                date: "April 28, 2025"
            },
            {
                title: "Understanding Stablecoin Regulations: A Global Perspective",
                description: "Regulators worldwide are grappling with how to classify and oversee stablecoins, impacting their future use and stability.",
                categories: ["Regulation", "Stablecoins"],
                date: "April 25, 2025"
            },
            {
                title: "The Metaverse Economy: Opportunities Beyond NFTs",
                description: "Beyond digital art, the metaverse offers vast economic potential in virtual real estate, fashion, and immersive experiences.",
                categories: ["Metaverse", "Investing"],
                date: "April 22, 2025"
            },
            {
                title: "Cardano's Smart Contract Development: Progress and Challenges",
                description: "A look into the ongoing development of smart contract capabilities on the Cardano blockchain and its competitive landscape.",
                categories: ["Cardano", "Technology"],
                date: "April 20, 2025"
            },
            {
                title: "Privacy Coins: Balancing Anonymity and Regulation",
                description: "Exploring the debate around privacy-focused cryptocurrencies and the regulatory push for greater transparency.",
                categories: ["Privacy", "Regulation"],
                date: "April 18, 2025"
            }
        ];

        let currentNewsDisplayed = 0;
        const newsPerPage = 3;

        const newsArticlesContainer = document.getElementById('news-articles-container');
        const loadMoreNewsBtn = document.getElementById('load-more-news-btn');

        // Function to render news articles
        function renderNewsArticles(articlesToRender, clearExisting = true) {
            console.log("--- renderNewsArticles called ---");
            console.log("clearExisting parameter:", clearExisting);
            console.log("Articles to render count:", articlesToRender.length);

            if (clearExisting) {
                console.log("Clearing existing news articles in container.");
                newsArticlesContainer.innerHTML = ''; // Clear existing articles
                console.trace("Call stack for clearing news articles:"); // Trace when clearing happens
            } else {
                console.log("Appending new news articles to container.");
            }

            articlesToRender.forEach(article => {
                const newsArticleCard = document.createElement('div');
                newsArticleCard.classList.add('news-article', 'p-6');

                // Determine tag colors based on category/cryptocurrency
                const tagColors = {
                    "Bitcoin": "bg-crimson",
                    "Ethereum": "bg-crimson",
                    "Solana": "bg-crimson",
                    "Cardano": "bg-crimson",
                    "Analysis": "bg-neon-green",
                    "DeFi": "bg-neon-green",
                    "Market Report": "bg-neon-green",
                    "AI": "bg-neon-green",
                    "Regulation": "bg-neon-green",
                    "CBDC": "bg-neon-green",
                    "Technology": "bg-neon-green",
                    "Web3": "bg-neon-green",
                    "Gaming": "bg-neon-green",
                    "Governance": "bg-neon-green",
                    "Security": "bg-neon-green",
                    "Investing": "bg-neon-green",
                    "Stablecoins": "bg-neon-green",
                    "Metaverse": "bg-neon-green",
                    "Privacy": "bg-neon-green",
                    "NFTs": "bg-neon-green"
                };

                const categoryTags = article.categories.map(category => {
                    const bgColorClass = tagColors[category] || 'bg-gray-600'; // Default if no specific color
                    // Ensure text color contrasts with background
                    const textColorClass = (bgColorClass === 'bg-crimson' || bgColorClass === 'bg-gray-600') ? 'text-[#E0E0EB]' : 'text-[#0D0D33]';
                    return `<span class="${bgColorClass} ${textColorClass} text-xs font-semibold px-2.5 py-0.5 rounded-full">${category}</span>`;
                }).join('');

                newsArticleCard.innerHTML = `
                    <h3 class="text-xl font-semibold text-[#E0E0EB] mb-2">${article.title}</h3>
                    <p class="text-[#A0A0B0] text-sm mb-3">${article.description}</p>
                    <div class="flex flex-wrap gap-2 mb-3">
                        ${categoryTags}
                    </div>
                    <p class="text-sm text-gray-400">${article.date}</p>
                `;
                newsArticlesContainer.appendChild(newsArticleCard);
                console.log("Appended article:", article.title);
            });
            console.log("Current number of articles in container:", newsArticlesContainer.children.length);
            console.log("--- renderNewsArticles finished ---");
        }

        // Function to load more news articles
        function loadMoreNews(initialLoad = false) {
            console.log("--- loadMoreNews called ---");
            console.log("InitialLoad parameter:", initialLoad);
            console.log("currentNewsDisplayed (before logic):", currentNewsDisplayed);

            const nextStartIndex = currentNewsDisplayed;
            const articlesToLoadCount = newsPerPage; // Always load 'newsPerPage' articles
            const nextEndIndex = Math.min(nextStartIndex + articlesToLoadCount, allNewsArticles.length);

            const articlesToLoad = allNewsArticles.slice(nextStartIndex, nextEndIndex);
            console.log("Attempting to load articles from index", nextStartIndex, "to", nextEndIndex - 1);
            console.log("Articles to load (count):", articlesToLoad.length, "Articles data:", articlesToLoad);

            renderNewsArticles(articlesToLoad, initialLoad); // Pass initialLoad to determine clearing

            currentNewsDisplayed = nextEndIndex;
            console.log("currentNewsDisplayed (after update):", currentNewsDisplayed);
            console.log("Total articles available:", allNewsArticles.length);

            // Hide button if all articles are displayed
            if (currentNewsDisplayed >= allNewsArticles.length) {
                console.log("All news articles displayed. Hiding 'Load More News' button.");
                if (loadMoreNewsBtn) {
                    loadMoreNewsBtn.classList.add('hidden');
                }
            } else {
                console.log("More news articles available. Showing 'Load More News' button.");
                if (loadMoreNewsBtn) {
                    loadMoreNewsBtn.classList.remove('hidden');
                }
            }
            console.log("--- loadMoreNews finished ---");
        }

        // Portfolio Page Pie Chart Logic
        const portfolioData = [
            { asset: "Bitcoin (BTC)", percentage: 45, color: "#00FFFF" }, // Electric Blue
            { asset: "Ethereum (ETH)", percentage: 30, color: "#39FF14" }, // Neon Green
            { asset: "Solana (SOL)", percentage: 15, color: "#DC2626" }, // Crimson Red
            { asset: "Cardano (ADA)", percentage: 10, color: "#FFD700" }  // Gold
        ];

        function polarToCartesian(centerX, centerY, radius, angleInDegrees) {
            const angleInRadians = (angleInDegrees - 90) * Math.PI / 180.0;
            return {
                x: centerX + (radius * Math.cos(angleInRadians)),
                y: centerY + (radius * Math.sin(angleInRadians))
            };
        }

        function describeArc(x, y, radius, startAngle, endAngle) {
            const start = polarToCartesian(x, y, radius, endAngle);
            const end = polarToCartesian(x, y, radius, startAngle);
            const largeArcFlag = endAngle - startAngle <= 180 ? "0" : "1";
            const d = [
                "M", x, y, // Move to center
                "L", start.x, start.y, // Line to start of arc
                "A", radius, radius, 0, largeArcFlag, 0, end.x, end.y, // Arc
                "Z" // Close path back to center
            ].join(" ");
            return d;
        }

        // Modify the existing drawPortfolioPieChart function
// Modify the drawPortfolioPieChart function to handle single strategy case
        function drawPortfolioPieChart() {
            const pieChartContainer = document.querySelector('.pie-chart-container');
            const pieChartSvg = document.getElementById('portfolio-pie-chart');
            const legendContainer = document.getElementById('portfolio-legend');
            
            if (!pieChartSvg || !legendContainer) return;

            // Clear previous chart
            pieChartSvg.innerHTML = '';
            legendContainer.innerHTML = '';

            // Get the current holdings from userPortfolio
            const holdings = userPortfolio.holdings;
            const strategies = Object.keys(holdings);
            
            // If no strategies, show empty state
            if (strategies.length === 0) {
                pieChartSvg.innerHTML = `
                    <text x="100" y="100" text-anchor="middle" fill="#A0A0B0" font-size="14">
                        No investments yet
                    </text>
                `;
                legendContainer.innerHTML = '<p class="text-[#A0A0B0]">No holdings</p>';
                return;
            }

            // Define color palette
            const colors = ['#00FFFF', '#39FF14', '#DC2626', '#FFD700', '#ADFF2F', '#FF4500', '#8A2BE2',
          '#FF1493', '#00CED1', '#7FFF00', '#FF8C00', '#4B0082'];
            
            // Calculate total value for percentages
            const totalValue = userPortfolio.totalValue;
            
            // For single strategy, create a full circle
            if (strategies.length === 1) {
                const strategy = strategies[0];
                const value = holdings[strategy].currentValue;
                const percentage = (value / totalValue * 100).toFixed(1);
                
                // Draw full circle
                pieChartSvg.innerHTML = `
                    <circle cx="100" cy="100" r="80" fill="${colors[0]}" />
                    <text x="100" y="100" text-anchor="middle" fill="#0D0D33" font-size="16" font-weight="bold">
                        ${percentage}%
                    </text>
                `;
                
                // Create legend
                legendContainer.innerHTML = `
                    <div class="flex items-center mb-2">
                        <div class="w-4 h-4 rounded-full mr-2" style="background-color: ${colors[0]}"></div>
                        <span class="text-[#E0E0EB]">${strategy}: $${value.toLocaleString()}</span>
                    </div>
                `;
                
                return;
            }
            
            // For multiple strategies, create pie chart as before
            let cumulativePercent = 0;
            let colorIndex = 0;
            
            strategies.forEach(strategy => {
                const value = holdings[strategy].currentValue;
                const percentage = (value / totalValue) * 100;
                const startX = 100 + 80 * Math.cos(2 * Math.PI * cumulativePercent / 100);
                const startY = 100 + 80 * Math.sin(2 * Math.PI * cumulativePercent / 100);
                
                cumulativePercent += percentage;
                const endX = 100 + 80 * Math.cos(2 * Math.PI * cumulativePercent / 100);
                const endY = 100 + 80 * Math.sin(2 * Math.PI * cumulativePercent / 100);
                
                const largeArcFlag = percentage > 50 ? 1 : 0;
                
                const pathData = [
                    `M 100 100`,
                    `L ${startX} ${startY}`,
                    `A 80 80 0 ${largeArcFlag} 1 ${endX} ${endY}`,
                    `Z`
                ].join(' ');
                
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', pathData);
                path.setAttribute('fill', colors[colorIndex % colors.length]);
                pieChartSvg.appendChild(path);
                
                // Add legend item
                const legendItem = document.createElement('div');
                legendItem.className = 'flex items-center mb-2';
                legendItem.innerHTML = `
                    <div class="w-4 h-4 rounded-full mr-2" style="background-color: ${colors[colorIndex % colors.length]}"></div>
                    <span class="text-[#E0E0EB]">${strategy}: $${value.toLocaleString()}</span>
                `;
                legendContainer.appendChild(legendItem);
                
                colorIndex++;
            });
            
            // Add center text with total value
            const centerText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            centerText.setAttribute('x', '100');
            centerText.setAttribute('y', '100');
            centerText.setAttribute('text-anchor', 'middle');
            centerText.setAttribute('fill', '#000000');
            centerText.setAttribute('font-size', '14');
            centerText.textContent = `$${totalValue.toLocaleString()}`;
            pieChartSvg.appendChild(centerText);
        }

        // --- Portfolio Value Over Time Chart Logic ---
        const fullPortfolioValueData = [
            { date: "2025-01-01", value: 50000 },
            { date: "2025-01-15", value: 52000 },
            { date: "2025-02-01", value: 51000 },
            { date: "2025-02-15", value: 55000 },
            { date: "2025-03-01", value: 58000 },
            { date: "2025-03-15", value: 57000 },
            { date: "2025-04-01", value: 60000 },
            { date: "2025-04-15", value: 63000 },
            { date: "2025-05-01", value: 62000 },
            { date: "2025-05-15", value: 65000 },
            { date: "2025-06-01", value: 68000 },
            { date: "2025-06-15", value: 70000 },
            { date: "2025-07-01", value: 72000 },
            { date: "2025-07-15", value: 75000 },
            { date: "2025-07-28", value: 76500 } // Current mock value
        ];

        let portfolioValueChartInstance = null; // To store the Chart.js instance

        // Function to filter portfolio data by range
        function filterPortfolioData(range) {
            const now = new Date(fullPortfolioValueData[fullPortfolioValueData.length - 1].date); // Use the last date in data as "now" for consistency
            let startDate;

            switch (range) {
                case '1m':
                    startDate = new Date(now.getFullYear(), now.getMonth() - 1, now.getDate());
                    break;
                case '3m':
                    startDate = new Date(now.getFullYear(), now.getMonth() - 3, now.getDate());
                    break;
                case '6m':
                    startDate = new Date(now.getFullYear(), now.getMonth() - 6, now.getDate());
                    break;
                case '1y':
                    startDate = new Date(now.getFullYear() - 1, now.getMonth(), now.getDate());
                    break;
                case 'all':
                default:
                    return fullPortfolioValueData; // Return all data
            }

            return fullPortfolioValueData.filter(dataPoint => {
                const dataDate = new Date(dataPoint.date);
                return dataDate >= startDate;
            });
        }

        // Function to render the portfolio value line chart using Chart.js
        function drawPortfolioValueChart(timeRange = 'all') {
            const chartCanvas = document.getElementById('portfolio-value-chart');
            if (!chartCanvas || typeof Chart === 'undefined') {
                console.warn("Chart.js not loaded or canvas not found. Skipping drawing.");
                return;
            }

            const filteredData = filterPortfolioData(timeRange);
            const labels = filteredData.map(d => d.date);
            const values = filteredData.map(d => d.value);

            // Destroy existing chart instance if it exists
            if (portfolioValueChartInstance) {
                portfolioValueChartInstance.destroy();
            }

            portfolioValueChartInstance = new Chart(chartCanvas, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Portfolio Value (USD)',
                        data: values,
                        borderColor: '#39FF14', // Neon Green
                        backgroundColor: 'rgba(57, 255, 20, 0.2)', // Light Neon Green fill
                        tension: 0.4,
                        fill: true,
                        pointBackgroundColor: '#39FF14',
                        pointBorderColor: '#39FF14',
                        pointHoverBackgroundColor: '#00FFFF', // Electric Blue on hover
                        pointHoverBorderColor: '#00FFFF',
                        pointRadius: 3,
                        pointHoverRadius: 6,
                        borderWidth: 2,
                        hoverBorderWidth: 3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `Value: $${context.parsed.y.toLocaleString()}`;
                                },
                                // Removed the title callback to hide the date
                                title: () => null
                            },
                            backgroundColor: '#1A1A40', // Match section background
                            titleColor: '#E0E0EB',
                            bodyColor: '#E0E0EB',
                            borderColor: '#00FFFF',
                            borderWidth: 1,
                            cornerRadius: 8,
                            displayColors: false
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: '#A0A0B0'
                            },
                            grid: {
                                color: '#303060'
                            }
                        },
                        y: {
                            ticks: {
                                color: '#A0A0B0',
                                callback: function(value, index, values) {
                                    return '$' + value.toLocaleString();
                                }
                            },
                            grid: {
                                color: '#303060'
                            }
                        }
                    }
                }
            });
        }

        // Event listeners for portfolio chart range buttons
        const portfolioChartRangeButtons = document.querySelectorAll('#portfolio-chart-range-buttons .chart-range-button');
        portfolioChartRangeButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons
                portfolioChartRangeButtons.forEach(btn => btn.classList.remove('active'));
                // Add active class to the clicked button
                button.classList.add('active');
                // Render chart with the selected range
                drawPortfolioValueChart(button.dataset.range);
            });
        });

        // Handle Invest in Strategy buttons on strategy cards
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('invest-now-btn')) {
                const strategyName = e.target.getAttribute('data-strategy');
                document.getElementById('strategies-selected-strategy').value = strategyName;
                document.getElementById('strategies-modal-strategy-name').textContent = `Invest in ${strategyName}`;
                document.getElementById('strategies-investment-modal').classList.remove('hidden');
            }
        });

        // Strategies Page Investment Modal Logic
        document.addEventListener('DOMContentLoaded', function() {
            // Handle "Invest Now" buttons in the Strategies page
            document.querySelectorAll('#strategies-container .invest-now-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const strategyName = this.getAttribute('data-strategy');
                    document.getElementById('strategies-selected-strategy').value = strategyName;
                    document.getElementById('strategies-modal-strategy-name').textContent = `Invest in ${strategyName}`;
                    document.getElementById('strategies-investment-modal').classList.remove('hidden');
                });
            });

            // Also add this event listener to close modal when clicking outside
            document.addEventListener('click', function(event) {
                if (investmentModal && !investmentModal.classList.contains('hidden')) {
                    if (event.target === investmentModal) {
                        investmentModal.classList.add('hidden');
                        console.log("Closed investment modal by clicking outside");
                    }
                }
                
                // Also handle strategies modal
                const strategiesModal = document.getElementById('strategies-investment-modal');
                if (strategiesModal && !strategiesModal.classList.contains('hidden')) {
                    if (event.target === strategiesModal) {
                        strategiesModal.classList.add('hidden');
                        console.log("Closed strategies investment modal by clicking outside");
                    }
                }
            });

            // Close modal button for Strategies page
            document.getElementById('strategies-close-modal').addEventListener('click', function() {
                document.getElementById('strategies-investment-modal').classList.add('hidden');
            });

            // Cancel button for Strategies page
            document.getElementById('strategies-cancel-investment').addEventListener('click', function() {
                document.getElementById('strategies-investment-modal').classList.add('hidden');
            });

            // Form submission for Strategies page
            document.getElementById('strategies-investment-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const strategy = document.getElementById('strategies-selected-strategy').value;
                const amount = parseFloat(document.getElementById('strategies-investment-amount').value);
                const duration = document.getElementById('strategies-investment-duration').value;

                
                
                // Here you would normally process the investment
                console.log(`Investing in ${strategy}: $${amount} for ${duration} months`);

                if (isNaN(amount)) {
                    alert('Please enter a valid investment amount');
                    return;
                }

                // Add the transaction
                addTransaction('investment', strategy, amount);

                // Add to portfolio
                addToPortfolio(strategy, amount);
                            
                // Show success notification
                showTradeNotification(`Successfully invested $${amount} in ${strategy} for ${duration} months`);
                
                // Close the modal
                document.getElementById('strategies-investment-modal').classList.add('hidden');
            });
        });

        // Performance Page Investment Modal Logic (existing code, just for reference)
        document.addEventListener('DOMContentLoaded', function() {
            // Handle "Invest Now" buttons in the Performance page
            document.querySelectorAll('.invest-now-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const strategyName = this.getAttribute('data-strategy');
                    document.getElementById('selected-strategy').value = strategyName;
                    document.getElementById('modal-strategy-name').textContent = `Invest in ${strategyName}`;
                    document.getElementById('investment-modal').classList.remove('hidden');
                });
            });

            // Close modal button for Performance page
            document.getElementById('close-modal').addEventListener('click', function() {
                document.getElementById('investment-modal').classList.add('hidden');
            });

            // Cancel button for Performance page
            document.getElementById('cancel-investment').addEventListener('click', function() {
                document.getElementById('investment-modal').classList.add('hidden');
            });

            // Form submission for Performance page
            document.getElementById('investment-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const strategy = document.getElementById('selected-strategy').value;
                const amount = parseFloat(document.getElementById('investment-amount').value);
                const duration = document.getElementById('investment-duration').value;
                
                // Here you would normally process the investment
                console.log(`Investing in ${strategy}: $${amount} for ${duration} months`);

                if (isNaN(amount)) {
                    alert('Please enter a valid investment amount');
                    return;
                }

                // Add the transaction
                addTransaction('investment', strategy, amount);

                // Add to portfolio
                addToPortfolio(strategy, amount);
                
                // Show success notification
                showTradeNotification(`Successfully invested $${amount} in ${strategy} for ${duration} months`);
                
                // Close the modal
                document.getElementById('investment-modal').classList.add('hidden');
            });

            
        });
        // All Transactions Page Data and Logic
        const allTransactions = [
            { type: "Buy", asset: "Bitcoin", amount: "0.05 BTC", price: "$68,000", value: "+$3,400.00", date: "2025-07-25", status: "positive" },
            { type: "Sell", asset: "Ethereum", amount: "0.8 ETH", price: "$3,900", value: "-$3,120.00", date: "2025-07-24", status: "negative" },
            { type: "Stake", asset: "Solana", amount: "10 SOL", value: "Staked", date: "2025-07-23", status: "neutral" },
            { type: "Buy", asset: "Cardano", amount: "1500 ADA", price: "$0.45", value: "+$675.00", date: "2025-07-22", status: "positive" },
            { type: "Withdraw", asset: "USD", amount: "$500.00", value: "-$500.00", date: "2025-07-21", status: "negative" },
            { type: "Deposit", asset: "USD", amount: "$1,000.00", value: "+$1,000.00", date: "2025-07-20", status: "positive" },
            { type: "Sell", asset: "Bitcoin", amount: "0.02 BTC", price: "$69,500", value: "-$1,390.00", date: "2025-07-19", status: "negative" },
            { type: "Buy", asset: "Ethereum", amount: "0.5 ETH", price: "$3,850", value: "+$1,925.00", date: "2025-07-18", status: "positive" },
            { type: "Unstake", asset: "Solana", amount: "5 SOL", value: "Unstaked", date: "2025-07-17", status: "neutral" },
            { type: "Buy", asset: "Polkadot", amount: "50 DOT", price: "$7.20", value: "+$360.00", date: "2025-07-16", status: "positive" },
            { type: "Sell", asset: "Cardano", amount: "200 ADA", price: "$0.48", value: "-$96.00", date: "2025-07-15", status: "negative" },
            { type: "Swap", asset: "ETH to USDC", amount: "0.1 ETH", value: "Swapped", date: "2025-07-14", status: "neutral" },
            { type: "Buy", asset: "Chainlink", amount: "15 LINK", price: "$15.00", value: "+$225.00", date: "2025-07-13", status: "positive" },
            { type: "Sell", asset: "Polkadot", amount: "10 DOT", price: "$7.50", value: "-$75.00", date: "2025-07-12", status: "negative" },
            { type: "Stake", asset: "Ethereum", amount: "0.2 ETH", value: "Staked", date: "2025-07-11", status: "neutral" }
        ];

        // Modify the existing renderAllTransactions function
        function renderAllTransactions() {
            const container = document.getElementById('all-transactions-container');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (userPortfolio.transactions.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8 text-[#A0A0B0]">
                        No transactions yet
                    </div>
                `;
                return;
            }
            
            // Sort transactions by date (newest first)
            const sortedTransactions = [...userPortfolio.transactions].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedTransactions.forEach(tx => {
                const txElement = document.createElement('div');
                txElement.className = 'transaction-card';
                
                const isPositive = tx.type === 'investment';
                const valueClass = isPositive ? 'positive' : 'negative';
                const valuePrefix = isPositive ? '+' : '-';
                
                txElement.innerHTML = `
                    <div>
                        <p class="type">${tx.strategy} ${tx.type}</p>
                        <p class="details">${tx.amount} ${tx.type === 'investment' ? 'invested' : 'withdrawn'}</p>
                    </div>
                    <div class="text-right">
                        <p class="value ${valueClass}">${valuePrefix}$${tx.value.toFixed(2)}</p>
                        <p class="date">${tx.date}</p>
                    </div>
                `;
                
                container.appendChild(txElement);
            });
        }

        // --- Trading Bot Logic ---
        const botFab = document.getElementById('bot-fab');
        const botPopupContainer = document.getElementById('bot-popup-container');
        const botPopupCloseBtn = document.getElementById('bot-popup-close-btn');
        const botPopupMessages = document.getElementById('bot-popup-messages');
        const botPopupInput = document.getElementById('bot-popup-input');
        const botPopupSendBtn = document.getElementById('bot-popup-send-btn');
        const tradeNotification = document.getElementById('trade-notification');

        let botPortfolio = { usd: 10000, btc: 0, eth: 0 }; // Initial mock portfolio
        let botTradeIntervalId;
        const tradeInterval = 10000; // Trade every 10 seconds

        // Mock crypto prices (simplified for this demo)
        const mockPrices = {
            btc: 70000,
            eth: 4000
        };

        function appendBotMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add(type === 'user' ? 'user-message-bubble' : 'bot-message-bubble');
            messageDiv.textContent = message;
            botPopupMessages.appendChild(messageDiv);
            botPopupMessages.scrollTop = botPopupMessages.scrollHeight; // Scroll to bottom
        }

        function showTradeNotification(message) {
            tradeNotification.textContent = message;
            tradeNotification.classList.add('show');
            setTimeout(() => {
                tradeNotification.classList.remove('show');
            }, 3000); // Notification disappears after 3 seconds
        }

        function simulateTrade() {
            const action = Math.random() > 0.5 ? 'buy' : 'sell';
            const asset = Math.random() > 0.5 ? 'btc' : 'eth';
            const currentPrice = mockPrices[asset];

            let tradeMessage = "";
            let notificationMessage = "";

            if (action === 'buy') {
                const amountToSpend = Math.random() * 500 + 100; // Spend between $100 and $600
                if (botPortfolio.usd >= amountToSpend) {
                    const cryptoAmount = amountToSpend / currentPrice;
                    botPortfolio.usd -= amountToSpend;
                    botPortfolio[asset] += cryptoAmount;
                    tradeMessage = `Bot bought ${cryptoAmount.toFixed(4)} ${asset.toUpperCase()} for $${amountToSpend.toFixed(2)} at $${currentPrice.toFixed(2)}/${asset.toUpperCase()}.`;
                    notificationMessage = `Bot: Bought ${cryptoAmount.toFixed(4)} ${asset.toUpperCase()}`;
                } else {
                    tradeMessage = `Bot tried to buy ${asset.toUpperCase()} but not enough USD. Current USD: $${botPortfolio.usd.toFixed(2)}.`;
                }
            } else { // sell
                const cryptoAmountToSell = Math.random() * (botPortfolio[asset] * 0.2) + (botPortfolio[asset] * 0.05); // Sell 5-25% of holdings
                if (botPortfolio[asset] >= cryptoAmountToSell && cryptoAmountToSell > 0) {
                    const valueReceived = cryptoAmountToSell * currentPrice;
                    botPortfolio.usd += valueReceived;
                    botPortfolio[asset] -= cryptoAmountToSell;
                    tradeMessage = `Bot sold ${cryptoAmountToSell.toFixed(4)} ${asset.toUpperCase()} for $${valueReceived.toFixed(2)} at $${currentPrice.toFixed(2)}/${asset.toUpperCase()}.`;
                    notificationMessage = `Bot: Sold ${cryptoAmountToSell.toFixed(4)} ${asset.toUpperCase()}`;
                } else {
                    tradeMessage = `Bot tried to sell ${asset.toUpperCase()} but not enough holdings. Current ${asset.toUpperCase()}: ${botPortfolio[asset].toFixed(4)}.`;
                }
            }

            appendBotMessage(tradeMessage, 'bot');
            if (notificationMessage) {
                showTradeNotification(notificationMessage);
            }
            console.log("Bot Portfolio:", botPortfolio);
        }

        function startTradingBot() {
            if (!botTradeIntervalId) {
                botTradeIntervalId = setInterval(simulateTrade, tradeInterval);
                console.log("Trading bot started.");
            }
        }

        function stopTradingBot() {
            if (botTradeIntervalId) {
                clearInterval(botTradeIntervalId);
                botTradeIntervalId = null;
                console.log("Trading bot stopped.");
            }
        }

        // Bot user interaction
        function handleBotInput() {
            const message = botPopupInput.value.trim();
            if (message === '') return;

            appendBotMessage(message, 'user');
            botPopupInput.value = '';

            // Simple bot responses
            let botResponse = "I'm not sure how to respond to that. I'm primarily focused on trading!";
            const lowerCaseMessage = message.toLowerCase();

            if (lowerCaseMessage.includes("hello") || lowerCaseMessage.includes("hi")) {
                botResponse = "Hello there! How can I assist you with your crypto journey?";
            } else if (lowerCaseMessage.includes("buy")) {
                botResponse = "I understand you're interested in buying crypto! As a mock bot, I can't execute real trades, but I'm always looking for simulated buy opportunities for Bitcoin and Ethereum based on my algorithms. Please remember this is a simulated environment.";
            } else if (lowerCaseMessage.includes("sell")) {
                botResponse = "Looking to sell? My simulated trading strategy involves selling assets when certain conditions are met to maximize mock profits. Remember, these are simulated trades and not real financial advice!";
            }
            else if (lowerCaseMessage.includes("trade")) {
                botResponse = "I'm constantly analyzing the market for optimal trade opportunities!";
            } else if (lowerCaseMessage.includes("how are you")) {
                botResponse = "I am an AI, so I don't have feelings, but I'm operating perfectly!";
            } else if (lowerCaseMessage.includes("what is bitcoin")) {
                botResponse = "Bitcoin is a decentralized digital currency, without a central bank or single administrator, that can be sent from user to user on the peer-to-peer bitcoin network without the need for intermediaries.";
            } else if (lowerCaseMessage.includes("portfolio")) {
                botResponse = `My current mock portfolio: USD: $${botPortfolio.usd.toFixed(2)}, BTC: ${botPortfolio.btc.toFixed(4)}, ETH: ${botPortfolio.eth.toFixed(4)}.`;
            } else if (lowerCaseMessage.includes("thanks") || lowerCaseMessage.includes("thank you")) {
                botResponse = "You're welcome! Happy to help.";
            }
            setTimeout(() => appendBotMessage(botResponse, 'bot'), 500);
        }

        // --- News Alert Notification Logic ---
        const newsAlertNotification = document.getElementById('news-alert-notification');
        const newsAlertMessage = document.getElementById('news-alert-message');
        const newsAlertCloseBtn = document.getElementById('news-alert-notification-close-btn');

        const mockNewsAlerts = [
            "Market Alert: Bitcoin volatility expected after upcoming economic data release.",
            "Flash News: Ethereum gas fees drop to new lows, boosting DeFi activity!",
            "Breaking: Major institutional investor announces large acquisition of Solana.",
            "Crypto Outlook: Analysts predict a bullish trend for altcoins in Q4.",
            "Security Advisory: New phishing scam targeting crypto wallet users identified. Stay vigilant!",
            "Innovation Watch: New decentralized exchange launches with unique liquidity incentives."
        ];
        let newsAlertIntervalId;
        const newsAlertDisplayDuration = 5000; // Display for 5 seconds
        const newsAlertInterval = 20000; // Show a new alert every 20 seconds

        function showNewsAlertNotification(message) {
            if (!newsAlertNotification || !newsAlertMessage) return;

            newsAlertMessage.textContent = message;
            newsAlertNotification.classList.add('show');

            // Automatically hide after a duration
            setTimeout(() => {
                newsAlertNotification.classList.remove('show');
            }, newsAlertDisplayDuration);
        }

        function simulateNewsAlert() {
            const randomIndex = Math.floor(Math.random() * mockNewsAlerts.length);
            const message = mockNewsAlerts[randomIndex];
            showNewsAlertNotification(message);
        }

        function startNewsAlerts() {
            if (!newsAlertIntervalId) {
                // Show an immediate alert on start, then start interval
                simulateNewsAlert();
                newsAlertIntervalId = setInterval(simulateNewsAlert, newsAlertInterval);
                console.log("News alerts started.");
            }
        }

        function stopNewsAlerts() {
            if (newsAlertIntervalId) {
                clearInterval(newsAlertIntervalId);
                newsAlertIntervalId = null;
                console.log("News alerts stopped.");
            }
        }


        // DOMContentLoaded to ensure all elements are available before attaching listeners
        document.addEventListener('DOMContentLoaded', () => {
            console.log("[DOMContentLoaded] All DOM content loaded.");

            // Initialize categoryFilterButtons here
            categoryFilterButtons = document.querySelectorAll('#category-filters .category-pill');

            // Navigation Links
            const navLinks = [
                { id: 'home-link', page: 'home' },
                { id: 'strategies-link', page: 'strategies' },
                { id: 'performance-link', page: 'performance' },
                { id: 'insights-link', page: 'insights' },
                { id: 'portfolio-link', page: 'portfolio' },
                { id: 'learn-link', page: 'learn' },
                { id: 'ai-assistant-link', page: 'ai-assistant' },
                { id: 'about-link', page: 'about' },
                { id: 'contact-link', page: 'contact' },
                { id: 'signup-header-btn', page: 'auth', tab: 'signup' },
                { id: 'login-header-btn', page: 'auth', tab: 'login' },
                { id: 'explore-strategies-btn', page: 'strategies' },
                { id: 'learn-more-btn', page: 'learn' },
                { id: 'discover-now-btn', page: 'performance' },
                { id: 'view-insights-btn', page: 'insights' },
                { id: 'meet-assistant-btn', page: 'ai-assistant' },
                { id: 'about-footer-link', page: 'about' },
                { id: 'contact-footer-link', page: 'contact' },
                { id: 'privacy-policy-footer-link', page: 'privacy-policy' },
                { id: 'terms-of-service-footer-link', page: 'terms-of-service' },
                { id: 'view-all-transactions-btn', page: 'all-transactions' }, // New link for All Transactions page
                { id: 'back-to-portfolio-btn', page: 'portfolio' } // New link to go back
            ];

            navLinks.forEach(linkInfo => {
                const element = document.getElementById(linkInfo.id);
                if (element) {
                    element.addEventListener('click', (e) => {
                        e.preventDefault();
                        console.log(`[Click] ${linkInfo.id} clicked. Navigating to ${linkInfo.page}`);
                        showPage(linkInfo.page, linkInfo.tab || '');
                    });
                    console.log(`[Event Listener] Attached to: ${linkInfo.id}`);
                } else {
                    console.warn(`[Event Listener] Element with ID '${linkInfo.id}' not found.`);
                }
            });

            // Strategies Page Buttons
            // Removed the applyFiltersBtn listener as the button is removed.
            // The filtering is now handled by the change/input listeners on the filter elements directly.

            // Add event listeners to asset class checkboxes to trigger filter on change
            document.querySelectorAll('input[type="checkbox"][data-asset-class="true"]').forEach(checkbox => {
                checkbox.addEventListener('change', filterStrategies);
            });
            // Add event listeners to select and range inputs to trigger filter on change
            document.getElementById('investment-goal').addEventListener('change', filterStrategies);
            document.getElementById('risk-tolerance').addEventListener('input', filterStrategies); // 'input' for real-time updates
            document.getElementById('time-horizon').addEventListener('change', filterStrategies);


            // Insights Page Buttons
            if (loadMoreNewsBtn) {
                loadMoreNewsBtn.addEventListener('click', () => { loadMoreNews(); console.log('[Click] Load More News button clicked'); });
            }

            // Learn Page Buttons
            if (loadMoreGuidesBtn) {
                loadMoreGuidesBtn.addEventListener('click', () => { loadMoreGuides(); console.log('[Click] Load More Guides button clicked'); });
            }
            if (categoryFilterButtons) { // Check if categoryFilterButtons is defined
                categoryFilterButtons.forEach(button => {
                    button.addEventListener('click', () => { filterGuides(button.dataset.category, button); console.log(`[Click] Category filter button clicked: ${button.dataset.category}`); });
                });
            } else {
                console.warn("[Event Listener] categoryFilterButtons not found.");
            }


            // AI Assistant Buttons
            if (sendButton) {
                sendButton.addEventListener('click', () => { sendMessage(); console.log('[Click] Send button clicked (AI Assistant)'); });
            }
            if (userInput) {
                userInput.addEventListener('keypress', handleKeyPress);
            }
            document.querySelectorAll('.predefined-question-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault(); // Prevent default button behavior (e.g., form submission)
                    sendPredefinedQuestion(button.dataset.question);
                    console.log(`[Click] Predefined question button clicked: ${button.dataset.question}`);
                });
            });

            // Auth Page Tabs
            const tabSignup = document.getElementById('tab-signup');
            const tabLogin = document.getElementById('tab-login');
            if (tabSignup) {
                tabSignup.addEventListener('click', (e) => { e.preventDefault(); showAuthTab('signup'); console.log('[Click] Signup tab clicked'); });
            } else {
                console.warn("[Event Listener] Element with ID 'tab-signup' not found.");
            }
            if (tabLogin) {
                tabLogin.addEventListener('click', (e) => { e.preventDefault(); showAuthTab('login'); console.log('[Click] Login tab clicked'); });
            } else {
                console.warn("[Event Listener] Element with ID 'tab-login' not found.");
            }


            // Initial page display on load
            showPage('home'); // Show the home page by default

            // Initialize in-memory chat history with the initial bot message
            const initialBotMessageElement = document.querySelector('#chat-messages .message-bot');
            if (initialBotMessageElement) {
                const rawText = initialBotMessageElement.dataset.rawText; // Corrected to use dataset.rawText
                if (rawText) {
                    inMemoryChatHistory.push({ role: 'model', parts: [{ text: rawText }] });
                    console.log("Initial bot message added to inMemoryChatHistory:", inMemoryChatHistory);
                }
            }


            // Observer for Insights page
            const insightsPage = document.getElementById('page-insights');
            if (insightsPage) {
                const observer = new MutationObserver((mutationsList) => {
                    for (const mutation of mutationsList) {
                        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                            if (insightsPage.classList.contains('active')) {
                                console.log("[Observer] Insights page became active. Initiating data fetch.");
                                if (db) {
                                    fetchFearGreedIndex();
                                    currentNewsDisplayed = 0; // Reset news count
                                    loadMoreNews(true); // Load initial news articles
                                } else {
                                    const checkFirebaseInterval = setInterval(() => {
                                        if (db) {
                                            fetchFearGreedIndex();
                                            currentNewsDisplayed = 0;
                                            loadMoreNews(true);
                                            clearInterval(checkFirebaseInterval);
                                            console.log("[Observer] Firebase ready, Insights data fetched.");
                                        }
                                    }, 100);
                                }
                            }
                        }
                    }
                });
                observer.observe(insightsPage, { attributes: true });
            }

            // Observer for Learn page to ensure initial guides load when page becomes active
            const learnPage = document.getElementById('page-learn');
            if (learnPage) {
                const learnPageObserver = new MutationObserver((mutationsList) => {
                    for (const mutation of mutationsList) {
                        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                            if (learnPage.classList.contains('active')) {
                                console.log("[Observer] Learn page became active. Initializing guides.");
                                // Ensure categoryFilterButtons are initialized
                                if (!categoryFilterButtons) {
                                    categoryFilterButtons = document.querySelectorAll('#category-filters .category-pill');
                                }
                                const allCategoryButton = document.querySelector('#category-filters [data-category="All"]');
                                if (allCategoryButton) {
                                    filterGuides('All', allCategoryButton);
                                } else {
                                    console.error("The 'All' category button was not found on the Learn page when observing.");
                                }
                            }
                        }
                    }
                });
                learnPageObserver.observe(learnPage, { attributes: true });
            }

            // Observer for Portfolio page to draw pie chart and value chart when active
            const portfolioPage = document.getElementById('page-portfolio');
            if (portfolioPage) {
                const portfolioPageObserver = new MutationObserver((mutationsList) => {
                    for (const mutation of mutationsList) {
                        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                            if (portfolioPage.classList.contains('active')) {
                                console.log("[Observer] Portfolio page became active. Drawing pie chart and value chart.");
                                drawPortfolioPieChart();
                                // Ensure the 'all' button is active by default when navigating to portfolio
                                const allRangeButton = document.querySelector('#portfolio-chart-range-buttons [data-range="all"]');
                                if (allRangeButton) {
                                    portfolioChartRangeButtons.forEach(btn => btn.classList.remove('active'));
                                    allRangeButton.classList.add('active');
                                }
                                drawPortfolioValueChart('all'); // Call the new chart function with 'all' data
                            }
                        }
                    }
                });
                portfolioPageObserver.observe(portfolioPage, { attributes: true });
            }

            // Observer for All Transactions page to render transactions when active
            const allTransactionsPage = document.getElementById('page-all-transactions');
            if (allTransactionsPage) {
                const allTransactionsPageObserver = new MutationObserver((mutationsList) => {
                    for (const mutation of mutationsList) {
                        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                            if (allTransactionsPage.classList.contains('active')) {
                                console.log("[Observer] All Transactions page became active. Rendering all transactions.");
                                renderAllTransactions();
                            }
                        }
                    }
                });
                allTransactionsPageObserver.observe(allTransactionsPage, { attributes: true });
            }

            // --- Trading Bot Event Listeners ---
            if (botFab) {
                botFab.addEventListener('click', () => {
                    botPopupContainer.classList.toggle('active');
                    if (botPopupContainer.classList.contains('active')) {
                        botPopupInput.focus();
                    }
                });
            }
            if (botPopupCloseBtn) {
                botPopupCloseBtn.addEventListener('click', () => {
                    botPopupContainer.classList.remove('active');
                });
            }
            if (botPopupSendBtn) {
                botPopupSendBtn.addEventListener('click', handleBotInput);
            }
            if (botPopupInput) {
                botPopupInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        handleBotInput();
                    }
                });
            }

            // Start the trading bot when the page loads
            startTradingBot();

            // --- News Alert Notification Event Listeners ---
            if (newsAlertCloseBtn) {
                newsAlertCloseBtn.addEventListener('click', () => {
                    newsAlertNotification.classList.remove('show');
                });
            }

            // Start news alerts when the page loads
            startNewsAlerts();

            // Initial render on DOMContentLoaded in case Learn page is the default active page
            // This part is now redundant if showPage('home') is always called first,
            // but kept for robustness if initial page changes.
            if (document.getElementById('page-learn').classList.contains('active')) {
                console.log("[DOMContentLoaded] Learn page is initially active. Filtering guides.");
                const allCategoryButton = document.querySelector('#category-filters [data-category="All"]');
                if (allCategoryButton) {
                    filterGuides('All', allCategoryButton);
                }
            }

            // Add resize listener for the portfolio value chart
            window.addEventListener('resize', () => {
                // Only redraw if the portfolio page is currently active
                if (document.getElementById('page-portfolio').classList.contains('active')) {
                    // Ensure the currently active range button is used for redraw
                    const activeRangeButton = document.querySelector('#portfolio-chart-range-buttons .chart-range-button.active');
                    const currentRange = activeRangeButton ? activeRangeButton.dataset.range : 'all';
                    drawPortfolioValueChart(currentRange);
                }
            });
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const subscribeBtn = document.getElementById('subscribe-btn');
            const emailInput = document.getElementById('subscribe-email');
            const responseDiv = document.getElementById('subscribe-response');

            if (Object.keys(userPortfolio.holdings).length === 0) {
                // You can add some sample data here if you want
                addToPortfolio('Amihud_14', 5000);
                addToPortfolio('Volatility_14', 3000);
            }
            
            // Update UI initially
            updatePortfolioUI();

            if (subscribeBtn && emailInput && responseDiv) {
                subscribeBtn.addEventListener('click', function(event) {
                    // Prevent the form from submitting
                    event.preventDefault();

                    const email = emailInput.value;

                    // Clear previous messages and styling
                    responseDiv.textContent = '';
                    responseDiv.className = 'mt-6 text-lg font-semibold min-h-[1.5rem]';

                    if (email && email.trim() !== '') {
                        // Display a success message
                        responseDiv.textContent = 'Thank you for subscribing! You will receive our latest updates.';
                        responseDiv.classList.add('text-[#39FF14]'); // Neon Green for success
                    } else {
                        // Display an error message
                        responseDiv.textContent = 'Please enter a valid email address to subscribe.';
                        responseDiv.classList.add('text-[#DC2626]'); // Crimson Red for error
                    }
                });

                // New event listener to clear the message on any click outside the subscription section
                document.addEventListener('click', function(event) {
                    // Check if the click is outside the button, input, or response area
                    if (event.target !== subscribeBtn && event.target !== emailInput && event.target !== responseDiv) {
                        // Clear the response message and its styling
                        responseDiv.textContent = '';
                        responseDiv.className = 'mt-6 text-lg font-semibold min-h-[1.5rem]';
                    }
                });
            }
        });

        // Subscribe Button Functionality
        document.getElementById('subscribe-btn')?.addEventListener('click', function(e) {
            e.preventDefault(); // Prevent form submission
            
            const emailInput = document.getElementById('subscribe-email');
            const responseDiv = document.getElementById('subscribe-response');
            
            if (!emailInput || !responseDiv) return;
            
            const email = emailInput.value.trim();
            
            // Simple email validation
            if (!email || !email.includes('@') || !email.includes('.')) {
                responseDiv.textContent = 'Please enter a valid email address';
                responseDiv.style.color = '#DC2626'; // Red for error
                return;
            }
            
            // Show loading state
            responseDiv.textContent = 'Subscribing...';
            responseDiv.style.color = '#00FFFF'; // Electric blue
            
            // Simulate API call with setTimeout
            setTimeout(() => {
                // Success response
                responseDiv.textContent = 'Thank you for subscribing! You\'ll receive our updates soon.';
                responseDiv.style.color = '#39FF14'; // Neon green
                
                // Clear the input
                emailInput.value = '';
                
                // Optionally store the email in Firestore if needed
                if (db && userId) {
                    const subscriptionsRef = collection(db, 'subscriptions');
                    setDoc(doc(subscriptionsRef, email), {
                        email: email,
                        subscribedAt: new Date(),
                        userId: userId
                    }).catch(error => {
                        console.error("Error saving subscription:", error);
                    });
                }
            }, 1500);
        });

        // Also add event listener for Enter key in the email input
        document.getElementById('subscribe-email')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('subscribe-btn').click();
            }
        });

        // Add this code to your existing script, preferably near the other authentication-related code

        // Sign Up Form Submission
        document.getElementById('signup-form')?.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const form = e.target;
            const username = document.getElementById('signup-username').value.trim();
            const email = document.getElementById('signup-email').value.trim();
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;
            
            // Basic validation
            if (!username || !email || !password || !confirmPassword) {
                alert('Please fill in all fields');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Passwords do not match');
                return;
            }
            
            if (password.length < 8) {
                alert('Password must be at least 8 characters');
                return;
            }
            
            // Show loading state on the button
            const signupButton = form.querySelector('button[type="submit"]');
            const originalButtonText = signupButton.textContent;
            signupButton.textContent = 'Creating account...';
            signupButton.disabled = true;
            
            try {
                await new Promise(resolve => setTimeout(resolve, 1500)); // Simulate API call
                alert('Account created successfully! You can now login.');
                showAuthTab('login');
                document.getElementById('login-email').value = email; // Pre-fill login email
            } finally {
                form.reset(); // Clear all signup fields
                // Reset button state (form is already cleared)
                signupButton.textContent = originalButtonText;
                signupButton.disabled = false;
            }
        });

        // Login Form Submission
        document.getElementById('login-form')?.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const form = e.target;
            const email = document.getElementById('login-email').value.trim();
            const password = document.getElementById('login-password').value;
            
            if (!email || !password) {
                alert('Please fill in all fields');
                return;
            }
            
            // Show loading state on the button
            const loginButton = form.querySelector('button[type="submit"]');
            const originalButtonText = loginButton.textContent;
            loginButton.textContent = 'Logging in...';
            loginButton.disabled = true;
            
            try {
                await new Promise(resolve => setTimeout(resolve, 1500)); // Simulate API call
                alert('Login successful!');
                showPage('home');
            } finally {
                // Reset form and button state
                form.reset();
                loginButton.textContent = originalButtonText;
                loginButton.disabled = false;
            }
        });

        // Investment Modal Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const investButtons = document.querySelectorAll('.invest-now-btn');
            const investmentModal = document.getElementById('investment-modal');
            const closeModal = document.getElementById('close-modal');
            const cancelInvestment = document.getElementById('cancel-investment');
            const modalStrategyName = document.getElementById('modal-strategy-name');
            const selectedStrategy = document.getElementById('selected-strategy');
            const investmentForm = document.getElementById('investment-form');

            // Handle Invest Now button clicks
            investButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const strategy = this.getAttribute('data-strategy');
                    modalStrategyName.textContent = `Invest in ${strategy}`;
                    selectedStrategy.value = strategy;
                    investmentModal.classList.remove('hidden');
                });
            });

            // Close modal handlers
            closeModal.addEventListener('click', () => investmentModal.classList.add('hidden'));
            cancelInvestment.addEventListener('click', () => investmentModal.classList.add('hidden'));
            investmentModal.addEventListener('click', (e) => {
                if (e.target === investmentModal) {
                    investmentModal.classList.add('hidden');
                }
            });

            // Handle form submission
            investmentForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const strategy = selectedStrategy.value;
                const amount = document.getElementById('investment-amount').value;
                const duration = document.getElementById('investment-duration').value;
                
                // Here you would typically send this data to your backend
                console.log(`Investing $${amount} in ${strategy} for ${duration} months`);
                
                // Show success notification
                showTradeNotification(`Successfully invested $${amount} in ${strategy}`);
                
                // Close modal
                investmentModal.classList.add('hidden');
            });

            // Function to show trade notification
            function showTradeNotification(message) {
                const notification = document.getElementById('trade-notification');
                notification.textContent = message;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 5000);
            }
        });


        // Performance Page Chart Toggling
        function setupPerformancePage() {
            // Equal-Weight Chart Buttons
            const ewChartButtons = document.querySelectorAll('#ew-chart-buttons .chart-range-button');
            const ewChartContainer = document.getElementById('ew-chart-container');
            
            // Value-Weight Chart Buttons
            const vwChartButtons = document.querySelectorAll('#vw-chart-buttons .chart-range-button');
            const vwChartContainer = document.getElementById('vw-chart-container');
            
            // Sentiment Chart Buttons
            const sentimentChartButtons = document.querySelectorAll('#sentiment-chart-buttons .chart-range-button');
            const sentimentChartContainer = document.getElementById('sentiment-chart-container');
            
            // Chart URLs mapping
            const chartUrls = {
                // Equal-Weight Charts
                'ew-cumulative': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754298233/ew_cumulative_returns_xwdofz.png',
                'ew-log-cumulative': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754298597/ew_log_cumulative_returns_b4v0ss.png',
                'ew-performance-radar': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754298429/ew_performance_radar_sdmvlp.png',
                'ew-returns-candles': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754298481/ew_returns_candles_tdm5kh.png',
                'ew-performance-heatmap': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754298384/ew_performance_heatmap_uputpi.png',
                'ew-drawdown-analysis': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754298317/ew_drawdown_analysis_spghsw.png',
                'ew-rolling-sharpe': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754298526/ew_rolling_sharpe_dashboard_vzawss.png',
                'ew-mean-bars': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754299071/mean_bars_EW_ao1tmy.png',
                'ew-vol-bars': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754298831/vol_bars_EW_htgfb7.png',
                'ew-sharpe-bars': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754298946/sharpe_bars_EW_xhpaqe.png',
                
                // Value-Weight Charts
                'vw-cumulative': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754299327/vw_cumulative_returns_n33xfy.png',
                'vw-log-cumulative': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754299752/vw_log_cumulative_returns_zn0gnx.png',
                'vw-performance-radar': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754299479/vw_performance_radar_donpbj.png',
                'vw-returns-candles': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754299702/vw_returns_candles_obaw3l.png',
                'vw-performance-heatmap': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754299374/vw_performance_heatmap_nyesat.png',
                'vw-drawdown-analysis': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754299527/vw_drawdown_analysis_uc7zlp.png',
                'vw-rolling-sharpe': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754299433/vw_rolling_sharpe_dashboard_jxv1u8.png',
                'vw-mean-bars': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754300166/mean_bars_VW_oilkoi.png',
                'vw-vol-bars': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754299983/vol_bars_VW_jfoats.png',
                'vw-sharpe-bars': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754300057/sharpe_bars_VW_euhfxv.png',
                
                // Sentiment Charts
                'sentiment-cumulative': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754049657/cumret_W-WED_lebrez.png',
                'sentiment-log-cumulative': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754049665/log_cumret_W-WED_mduloq.png',
                'sentiment-sharpe': 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754049676/sharpe_W-WED_cfark7.png'
            };
            
            // Chart descriptions mapping
            const chartDescriptions = {
                // Equal-Weight Charts
                'ew-cumulative': 'This chart illustrates the cumulative returns of our top performing Equal-Weight strategies over time, compared to Bitcoin as a baseline.',
                'ew-log-cumulative': 'This chart illustrates the logarithmic cumulative returns of our top performing Equal-Weight strategies over time, compared to Bitcoin as a baseline.',
                'ew-performance-radar': 'This chart illustrates our top performing Equal-Weight strategies with the best Sharpe ratios, annualised returns, average returns, high win rates (more positive days) and lowest drawdown and volatility, showing all categories as a comparison.',
                'ew-returns-candles': 'This chart illustrates the monthly returns of our top performing Equal-Weight Logarithmic strategies over time.',
                'ew-performance-heatmap': 'This chart illustrates the monthly positive and negative returns of our top performing Equal-Weight Logarithmic strategies over time.',
                'ew-drawdown-analysis': 'This chart illustrates the max drawdowns and cumulative returns with drawdowns of our top performing Equal-Weight Logarithmic strategies over time.',
                'ew-rolling-sharpe': 'This chart illustrates the rolling Sharpe ratios, rolling volatilites, return distribution and correlation matrix of our top performing Equal-Weight Logarithmic strategies over time.',
                'ew-mean-bars': 'This chart illustrates the annualised mean returns of our top performing Equal-Weight strategies, compared to Bitcoin as a baseline.',
                'ew-vol-bars': 'This chart illustrates the annualised volatilities of our top performing Equal-Weight strategies, compared to Bitcoin as a baseline.',
                'ew-sharpe-bars': 'This chart illustrates the annualised Sharpe ratios of our top performing Equal-Weight strategies, compared to Bitcoin as a baseline.',
                
                // Value-Weight Charts
                'vw-cumulative': 'This chart illustrates the cumulative returns of our top performing Value-Weight strategies over time, compared to Bitcoin as a baseline.',
                'vw-log-cumulative': 'This chart illustrates the logarithmic cumulative returns of our top performing Value-Weight strategies over time, compared to Bitcoin as a baseline.',
                'vw-performance-radar': 'This chart illustrates our top performing Value-Weight strategies with the best Sharpe ratios, annualised returns, average returns, high win rates (more positive days) and lowest drawdown and volatility, showing all categories as a comparison.',
                'vw-returns-candles': 'This chart illustrates the monthly returns of our top performing Value-Weight Logarithmic strategies over time.',
                'vw-performance-heatmap': 'This chart illustrates the monthly positive and negative returns of our top performing Value-Weight Logarithmic strategies over time.',
                'vw-drawdown-analysis': 'This chart illustrates the max drawdowns and cumulative returns with drawdowns of our top performing Value-Weight Logarithmic strategies over time.',
                'vw-rolling-sharpe': 'This chart illustrates the rolling Sharpe ratios, rolling volatilites, return distribution and correlation matrix of our top performing Value-Weight Logarithmic strategies over time.',
                'vw-mean-bars': 'This chart illustrates the annualised mean returns of our top performing Value-Weight strategies, compared to Bitcoin as a baseline.',
                'vw-vol-bars': 'This chart illustrates the annualised volatilities of our top performing Value-Weight strategies, compared to Bitcoin as a baseline.',
                'vw-sharpe-bars': 'This chart illustrates the annualised Sharpe ratios of our top performing Value-Weight strategies, compared to Bitcoin as a baseline.',
                
                // Sentiment Charts
                'sentiment-cumulative': 'This chart illustrates the cumulative returns of our VADER sentiment trading strategies over time, compared to Bitcoin as a baseline.',
                'sentiment-log-cumulative': 'This chart illustrates the logarithmic cumulative returns of our VADER sentiment trading strategies over time, compared to Bitcoin as a baseline.',
                'sentiment-sharpe': 'This chart illustrates the Sharpe ratios of our VADER sentiment trading strategies over time, compared to Bitcoin as a baseline.'
            };
            
            // Function to show a chart in a container
            function showChart(container, chartId) {
                const url = chartUrls[chartId];
                const description = chartDescriptions[chartId];
                
                if (!url || !description) {
                    console.error('Chart URL or description not found for:', chartId);
                    return;
                }
                
                container.innerHTML = `
                    <img src="${url}" alt="${chartId}" class="mx-auto rounded-lg shadow-xl border border-[#00FFFF] max-w-full h-auto">
                    <p class="text-lg text-[#A0A0B0] mt-6">
                        ${description}
                        <br>
                        <strong>Disclaimer: Past performance is not indicative of future results. Investment in cryptocurrencies carries significant risk.</strong>
                    </p>
                `;
                container.classList.remove('hidden');
            }
            
            // Set up event listeners for Equal-Weight charts
            ewChartButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const chartId = button.dataset.chart;
                    
                    // Update active state
                    ewChartButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Show the selected chart
                    showChart(ewChartContainer, chartId);
                });
            });
            
            // Set up event listeners for Value-Weight charts
            vwChartButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const chartId = button.dataset.chart;
                    
                    // Update active state
                    vwChartButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Show the selected chart
                    showChart(vwChartContainer, chartId);
                });
            });
            
            // Set up event listeners for Sentiment charts
            sentimentChartButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const chartId = button.dataset.chart;
                    
                    // Update active state
                    sentimentChartButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Show the selected chart
                    showChart(sentimentChartContainer, chartId);
                });
            });
            
            // Show the first chart for each section by default
            if (ewChartButtons.length > 0) {
                ewChartButtons[0].click();
            }
            if (vwChartButtons.length > 0) {
                vwChartButtons[0].click();
            }
            if (sentimentChartButtons.length > 0) {
                sentimentChartButtons[0].click();
            }
        }

        // Initialize the holdings table when the portfolio page loads
        function setupPortfolioPage() {
            if (document.getElementById('page-portfolio')?.classList.contains('active')) {
                updateHoldingsTable();
            }
        }
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const contactForm = document.getElementById('contact-form');
            const nameInput = document.getElementById('contact-name');
            const emailInput = document.getElementById('contact-email');
            const subjectInput = document.getElementById('contact-subject');
            const messageTextarea = document.getElementById('contact-message');
            const responseDiv = document.getElementById('contact-response');

            if (contactForm) {
                contactForm.addEventListener('submit', function(event) {
                    event.preventDefault();

                    // Clear previous messages
                    responseDiv.textContent = '';
                    responseDiv.className = 'mt-8 text-lg font-semibold text-center min-h-[1.5rem]';

                    if (nameInput.value.trim() === '' || 
                        emailInput.value.trim() === '' || 
                        subjectInput.value.trim() === '' || 
                        messageTextarea.value.trim() === '') {
                        responseDiv.textContent = 'Please fill out all fields before sending your message.';
                        responseDiv.classList.add('text-[#DC2626]'); // Crimson Red for error
                    } else {
                        responseDiv.textContent = 'Thank you for your message! We will get back to you shortly.';
                        responseDiv.classList.add('text-[#39FF14]'); // Neon Green for success
                        
                        nameInput.value = '';
                        emailInput.value = '';
                        subjectInput.value = '';
                        messageTextarea.value = '';
                    }
                });
                
                // New event listener to clear the message on any click outside the form
                document.addEventListener('click', function(event) {
                    // Check if the click is outside the form
                    if (!contactForm.contains(event.target)) {
                        // Clear the response message and its styling
                        responseDiv.textContent = '';
                        responseDiv.className = 'mt-8 text-lg font-semibold text-center min-h-[1.5rem]';
                    }
                });
            }
        });
    </script>
    <!-- Add this JavaScript code to handle the chart toggling -->
    <script>
        // Chart data mapping
        const chartData = {
            'sentiment-daily': {
                src: 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754223440/daily_avg_sentiment_gkkvbs.png',
                alt: 'Daily Average Sentiment Chart',
                desc: 'This chart illustrates the daily average sentiment over time using the VADER sentiment scoring.'
            },
            'sentiment-monthly': {
                src: 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754223471/monthly_avg_heatmap_kndgoc.png',
                alt: 'Monthly Sentiment Heatmap',
                desc: 'This chart illustrates the monthly sentiment heatmap over time using the VADER sentiment scoring.'
            },
            'polarity-daily': {
                src: 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754049693/polarity_daily_avg_sentiment_nktvp0.png',
                alt: 'Polarity Daily Average Sentiment',
                desc: 'This chart illustrates the daily average sentiment over time using the Textblob polarity scoring.'
            },
            'polarity-monthly': {
                src: 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754049805/polarity_monthly_avg_heatmap_onzbvj.png',
                alt: 'Polarity Monthly Heatmap',
                desc: 'This chart illustrates the monthly sentiment heatmap over time using the Textblob polarity scoring.'
            },
            'wordcloud-positive': {
                src: 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754049737/wordcloud_positive_yeibkt.png',
                alt: 'Positive WordCloud',
                desc: 'This chart illustrates the main positive words, including significant, growth, strong and innovation.'
            },
            'wordcloud-negative': {
                src: 'https://res.cloudinary.com/dlemf0esl/image/upload/v1754049686/wordcloud_negative_ao4cv1.png',
                alt: 'Negative WordCloud',
                desc: 'This chart illustrates the main negative words, including loss, risk, drop and uncertainty.'
            }
        };

        // Function to handle chart button clicks
        function setupChartButtons(buttonContainerId, chartContainerId) {
            const buttons = document.querySelectorAll(`#${buttonContainerId} .chart-range-button`);
            const container = document.getElementById(chartContainerId);
            
            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    // Update active button
                    buttons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Get chart data
                    const chartId = button.dataset.chart;
                    const chart = chartData[chartId];
                    
                    // Update container with chart
                    container.innerHTML = `
                        <img src="${chart.src}" alt="${chart.alt}" class="mx-auto rounded-lg shadow-xl border border-[#00FFFF] max-w-full h-auto">
                        <p class="text-lg text-[#A0A0B0] mt-6">${chart.desc}</p>
                    `;
                    
                    // Show container if hidden
                    container.classList.remove('hidden');
                });
            });
            
            // Trigger click on first button to show initial chart
            if (buttons.length > 0) {
                buttons[0].click();
            }
        }

        // Initialize all chart button groups when page loads
        document.addEventListener('DOMContentLoaded', () => {
            setupChartButtons('vader-chart-buttons', 'vader-chart-container');
            setupChartButtons('polarity-chart-buttons', 'polarity-chart-container');
            setupChartButtons('wordcloud-buttons', 'wordcloud-container');
        });
    </script>
</body>
</html>
